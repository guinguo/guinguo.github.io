<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Guinguo&#39;s blog</title>
  <subtitle>Just try it</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.guinguo.top/"/>
  <updated>2016-09-14T16:47:59.185Z</updated>
  <id>http://www.guinguo.top/</id>
  
  <author>
    <name>guinguo</name>
    <email>guinguo@yahoo.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Kafka Use</title>
    <link href="http://www.guinguo.top/2016/09/13/Kafka-Use/"/>
    <id>http://www.guinguo.top/2016/09/13/Kafka-Use/</id>
    <published>2016-09-13T03:03:55.000Z</published>
    <updated>2016-09-14T16:47:59.185Z</updated>
    
    <content type="html">&lt;h2 id=&quot;Kafka简介&quot;&gt;&lt;a href=&quot;#Kafka简介&quot; class=&quot;headerlink&quot; title=&quot;Kafka简介&quot;&gt;&lt;/a&gt;Kafka简介&lt;/h2&gt;&lt;p&gt;　　Kafka是一个高吞吐量的分布式消息订阅发布系统，它采用独特的设计提供消息传递系统的功能。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;术语&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;topic&lt;/strong&gt; Kafka维护的消息流称为topic&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;物理上不同的topic的消息分开存储，逻辑上一个topic的消息虽然保存于一个或多个broker上，
但用户只需指定消息的topic即可生产或者消费数据而不必担心数据存于何处
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;producer&lt;/strong&gt; 消息发布者称为producer&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;consumer&lt;/strong&gt; 订阅并消费消息的称为consumer&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;broker&lt;/strong&gt; Kafka集群中的每个节点称为broker&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;partition&lt;/strong&gt; 物理概念，每个topic包含一个或者多个partition&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;http://kafka.apache.org/images/producer_consumer.png&quot; alt=&quot;Kafka&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;下载解压&quot;&gt;&lt;a href=&quot;#下载解压&quot; class=&quot;headerlink&quot; title=&quot;下载解压&quot;&gt;&lt;/a&gt;下载解压&lt;/h2&gt;&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;wget  http://archive.apache.org/dist/kafka/0.10.0.0/kafka_2.11-0.10.0.0.tgz
tar -zxvf kafka_2.11-0.10.0.0.tgz
mv kafka_2.11-0.10.0.0 kafka
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;h2 id=&quot;配置分发&quot;&gt;&lt;a href=&quot;#配置分发&quot; class=&quot;headerlink&quot; title=&quot;配置分发&quot;&gt;&lt;/a&gt;配置分发&lt;/h2&gt;&lt;p&gt;kafka自带zookeeper，但是我们使用我们自己的,找到zookeeper.connect 这一配置项，修改&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;cd kafka/config
vi server.properties
     zookeeper.connect=server1:2181,server2:2181,server3:2181
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p&gt;创建一个启动脚本用于启动Kafka&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;vi kafka/start.sh
nohup bin/kafka-server-start.sh     config/server.properties &amp;gt; kafka.log 2&amp;gt;&amp;amp;1 &amp;amp;
:wq
chmod +x kafka/start.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p&gt;复制到其他节点&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;scp -r kafka server2:~/
scp -r kafka server3:~/
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;h2 id=&quot;启动测试&quot;&gt;&lt;a href=&quot;#启动测试&quot; class=&quot;headerlink&quot; title=&quot;启动测试&quot;&gt;&lt;/a&gt;启动测试&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;首先启动zookeeper&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;zkServer.sh start
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;再启动Kafka&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;./kafka/start.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;使用jps命令查看&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;   [hadoop@server1 ~]$ jps&lt;br&gt; 19114 JournalNode&lt;br&gt; 19979 Jps&lt;br&gt; 18400 JobHistoryServer&lt;br&gt; 18479 ResourceManager&lt;br&gt; 18331 DFSZKFailoverController&lt;br&gt; 18277 QuorumPeerMain&lt;br&gt; 11797 NameNode&lt;br&gt; 12485 Kafka&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; 可以看到已经启动了&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;创建topic&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;[hadoop@server3 ~]$ cd kafka
[hadoop@server3 ~]$ bin/kafka-topics.sh --zookeeper server1:2181 --create --topic test-kafka --replication-factor 2 --partitions 2
Created topic &amp;quot;test-kafka&amp;quot;.
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p&gt; 这条命令指定了zookeeper节点为server1(随便指定一个都行，因为zk是一个集群) 创建一个名为test-kafka的topic，副本数为2&lt;/p&gt;
&lt;p&gt; 可以查看zk上面是否已经有了这个topic&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;[hadoop@server3 kafka]$ bin/kafka-topics.sh --zookeeper server1:2181 --list
test-kafka
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;查看topic描述&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;[hadoop@server3 kafka]$ bin/kafka-topics.sh --zookeeper server1:2181 --describe --topic test-kafka
Topic:test-kafka    PartitionCount:2    ReplicationFactor:2    Configs:
Topic: test-kafka    Partition: 0    Leader: 2    Replicas: 2,3    Isr: 2,3
Topic: test-kafka    Partition: 1    Leader: 3    Replicas: 3,1    Isr: 3,1
[hadoop@server3 kafka]$
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p&gt; 可以看到test-kafka 有两个partition， partition 0 上 存在Leader 2 (Broker2)，因为副本数为2，所以Broker3也存了一份，&lt;br&gt; 这个Leader表示，我在Broker2这个节点找不到就到Broker3那里去找，提高了可靠性，不会因为某台机子宕掉了而停止工作&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;启动消费者与生产者&lt;/p&gt;
&lt;p&gt; server2为生产者，server3消费者–zookeeper 后面跟zk集群中某一台机子就行&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;[hadoop@server2 kafka]$ bin/kafka-console-producer.sh --broker-list server3:9092 --topic test-kafka 
test kafka 
hello  I&amp;apos;m guin_guo
[hadoop@server3 kafka]$ bin/kafka-console-consumer.sh --zookeeper server1:2181 --topic test-kafka
test kafka 
hello  I&amp;apos;m guin_guo
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;在server2上输入(生产)内容，server3就显示(消费)出来了&lt;/p&gt;
&lt;h2 id=&quot;参考文档&quot;&gt;&lt;a href=&quot;#参考文档&quot; class=&quot;headerlink&quot; title=&quot;参考文档&quot;&gt;&lt;/a&gt;参考文档&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://kafka.apache.org/documentation.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://kafka.apache.org/documentation.html&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      Kafka集群的安装
    
    </summary>
    
      <category term="BigData" scheme="http://www.guinguo.top/categories/BigData/"/>
    
    
      <category term="kafka" scheme="http://www.guinguo.top/tags/kafka/"/>
    
  </entry>
  
  <entry>
    <title>Flume Use</title>
    <link href="http://www.guinguo.top/2016/08/29/Flume-Use/"/>
    <id>http://www.guinguo.top/2016/08/29/Flume-Use/</id>
    <published>2016-08-29T09:45:13.000Z</published>
    <updated>2016-09-12T05:02:06.576Z</updated>
    
    <content type="html">&lt;p&gt;　　Apache Flume是一个分布式，可靠性，可用性的系统，可以有效地从不同的数据源收集，整合，和移动大量日志数据到其他的存储（HDFS，HBase etc…）&lt;br&gt;flume其实没有集群概念,每个flume都是一个独立的个体，每个flume agent收集数据汇总到flume collector，由collector写入flume storage。&lt;br&gt;&lt;img src=&quot;http://flume.apache.org/_images/UserGuide_image00.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;　　Flume event是一个有效字节数据单元和一组可选的字符串属性组成.Flume agent是一个JVM进程，控制组件事件流从外部流向目的地.Flume消费外部源传送给它的数据，像web server。外部数据源以Flume Source认可的形式传递给flume，例如，Avro Flume 源可以用来从Avro客户端或者从Flume代理的Avro 槽(sink) 流出的事件流接收Avro事件。类似的流可以使用第一Thrift Sink或者一个Flume Thrift Rpc 客户端，或者用任意语言编写的遵循Thrift协议栈的Thrift客户端。&lt;br&gt;  当一个Sink 源接收到一个事件时，它可以存储到一个或者多个渠道(channel)。channel是存储事件直到事件被sink消费。文件渠道(channel)，就是一种，它支持本地文件系统，Sink 从channel移除一个事件并把它放到外部仓库像HDFS(通过Flume HDFS sink)，或者直接（转发）流向下一个数据源被其使用。指定agent中的source和sink 在channel上进行异步事件处理&lt;/p&gt;
&lt;p&gt;&lt;hr&gt;以上翻译自flume官网，措辞不对请见谅！&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;使用&quot;&gt;&lt;a href=&quot;#使用&quot; class=&quot;headerlink&quot; title=&quot;使用&quot;&gt;&lt;/a&gt;使用&lt;/h2&gt;&lt;p&gt;  server1作为collector，server2 作为agent。实现agent连接collector然后想collector发送日志，最终collector将日志写到HDFS。&lt;/p&gt;
&lt;h2 id=&quot;系统要求&quot;&gt;&lt;a href=&quot;#系统要求&quot; class=&quot;headerlink&quot; title=&quot;系统要求&quot;&gt;&lt;/a&gt;系统要求&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;jdk 大于1.6，最好是1.7&lt;/li&gt;
&lt;li&gt;内存 足够的内存配置以使用source，channels，sinks&lt;/li&gt;
&lt;li&gt;磁盘空间 足够的磁盘空间使用source，channels，sinks&lt;/li&gt;
&lt;li&gt;目录权限 agent可以直接读写响应目录&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;下载安装&quot;&gt;&lt;a href=&quot;#下载安装&quot; class=&quot;headerlink&quot; title=&quot;下载安装&quot;&gt;&lt;/a&gt;下载安装&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;[hadoop@server1 ~]$ wget http://www-us.apache.org/dist/flume/stable/apache-flume-1.6.0-bin.tar.gz
[hadoop@server1 ~]$ tar -zxvf apache-flume-1.6.0-bin.tar.gz 
[hadoop@server1 ~]$ mv apache-flume-1.6.0-bin flume-1.6.0
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;修改配置文件&quot;&gt;&lt;a href=&quot;#修改配置文件&quot; class=&quot;headerlink&quot; title=&quot;修改配置文件&quot;&gt;&lt;/a&gt;修改配置文件&lt;/h2&gt;&lt;h3 id=&quot;jdk环境变量&quot;&gt;&lt;a href=&quot;#jdk环境变量&quot; class=&quot;headerlink&quot; title=&quot;jdk环境变量&quot;&gt;&lt;/a&gt;jdk环境变量&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;[hadoop@server1 ~]$ mv flume-1.6.0/conf/flume-env.sh.template flume-1.6.0/conf/flume-env.sh          
[hadoop@server1 ~]$ vi flume-1.6.0/conf/flume-env.sh 
#把jdk目录填上去
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;
&lt;p&gt;复制到server2&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code&gt;[hadoop@server1 ~]$ scp -r flume-1.6.0/ hadoop@server2:~/
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;agent启动文件&quot;&gt;&lt;a href=&quot;#agent启动文件&quot; class=&quot;headerlink&quot; title=&quot;agent启动文件&quot;&gt;&lt;/a&gt;agent启动文件&lt;/h3&gt;&lt;p&gt;在server1节点，conf目录下，将flume-conf.properties.template 重命名一份出来&lt;br&gt;用于启动配置。关于三大组件的详细配置，请参考&lt;a href=&quot;http://flume.apache.org/FlumeUserGuide.html#configuration&quot; title=&quot;flumeUserGuide&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;官方文档&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;创建server2事件监听目录/home/hadoop/flume-test&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;server1上的配置&lt;/p&gt;
&lt;p&gt;  [hadoop@server1 flume-1.6.0]$ cp conf/flume-conf.properties.template conf/avro.conf&lt;/p&gt;
&lt;p&gt;  [hadoop@server1 flume-1.6.0]$ cat conf/avro.conf&lt;br&gt;  #defind source sink channel&lt;br&gt;  a1.sources = r1&lt;br&gt;  a1.sinks = k1&lt;br&gt;  a1.channels = c1&lt;/p&gt;
&lt;p&gt;  #specify configure&lt;br&gt;  #r1的类型是Avro&lt;br&gt;  a1.sources.r1.type = avro&lt;br&gt;  #channel为c1，注意，这里是r1.channels&lt;br&gt;  a1.sources.r1.channels = c1&lt;br&gt;  #绑定本机端口4141&lt;br&gt;  a1.sources.r1.bind = 0.0.0.0&lt;br&gt;  a1.sources.r1.port = 4141&lt;/p&gt;
&lt;p&gt;  #sink k1的类型为HDFS&lt;br&gt;  #see &lt;a href=&quot;http://flume.apache.org/FlumeUserGuide.html#hdfs-sink&quot; title=&quot;hdfs-sink&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://flume.apache.org/FlumeUserGuide.html#hdfs-sink&lt;/a&gt;&lt;br&gt;  a1.sinks.k1.type = hdfs&lt;br&gt;  a1.sinks.k1.hdfs.path = hdfs://server1:9000/flume-test/&lt;br&gt;  a1.sinks.k1.hdfs.fileType = DataStream&lt;br&gt;  a1.sinks.k1.hdfs.writeFormat = TEXT&lt;br&gt;  a1.sinks.k1.hdfs.round = true&lt;br&gt;  a1.sinks.k1.hdfs.roundValue = 5&lt;br&gt;  a1.sinks.k1.hdfs.roundUnit = minute&lt;br&gt;  a1.sinks.k1.hdfs.useLocalTimeStamp = true&lt;br&gt;  a1.sinks.k1.hdfs.filePrefix = events-&lt;br&gt;  #而这里是k1.channel&lt;br&gt;  a1.sinks.k1.channel = c1&lt;/p&gt;
&lt;p&gt;  #使用内存作为channel&lt;br&gt;  a1.channels.c1.type = memory&lt;br&gt;  a1.channels.c1.capacity = 1000&lt;br&gt;  a1.channels.c1.transactionCapacity = 100&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;server2上的配置&lt;/p&gt;
&lt;p&gt;  [hadoop@server2 flume-1.6.0]$ cat conf/avro.conf&lt;br&gt;  a1.sources = r1&lt;br&gt;  a1.channels = c1&lt;br&gt;  a1.sinks = k1&lt;/p&gt;
&lt;p&gt;  #For each one of the sources, the type is defined&lt;br&gt;  a1.sources.r1.type = spooldir&lt;br&gt;  a1.sources.r1.spoolDir = /home/hadoop/flume-test&lt;br&gt;  a1.sources.r1.channels = c1&lt;/p&gt;
&lt;p&gt;  #Each sink’s type must be defined&lt;br&gt;  a1.sinks.k1.type = avro&lt;br&gt;  a1.sinks.k1.hostname = server1&lt;br&gt;  a1.sinks.k1.port = 4141&lt;br&gt;  a1.sinks.k1.channel = c1&lt;/p&gt;
&lt;p&gt;  #Each channel’s type is defined.&lt;br&gt;  a1.channels.c1.type = memory&lt;br&gt;  a1.channels.c1.capacity = 1000&lt;br&gt;  a1.channels.c1.transcationCapacity = 100&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;启动测试&quot;&gt;&lt;a href=&quot;#启动测试&quot; class=&quot;headerlink&quot; title=&quot;启动测试&quot;&gt;&lt;/a&gt;启动测试&lt;/h2&gt;&lt;p&gt;　　&lt;br&gt;　　以上Avro配置是：server2监听目录/home/hadoop/flume-test，如果有文件变化，就把事件传递到server1的4141端口上，server1监听本机的4141端口，如果有事件接收，就传递到hdfs hdfs://server1:9000/flume-test/上存储下来 文件名前缀events-&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;先启动server1：&lt;/p&gt;
&lt;p&gt; cd bin&lt;br&gt; bin/flume-ng agent -n agent -c conf -f conf/avro.conf -Dflume.root.logger=DEBUG,console&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;然后是server2：&lt;br&gt; bin/flume-ng agent -n agent -c conf -f conf/avro.conf -Dflume.root.logger=DEBUG,console&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;进入目录&lt;br&gt; [hadoop@server2 flume-test]$ cd /home/hadoop/flume-test&lt;br&gt; [hadoop@server2 flume-test]$ echo “hello flume source is avro and write to hdfs” &amp;gt; test.txt&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;查看结果&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;然后可以看到server2打印出：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;2016-08-29 22:22:12,724 (pool-4-thread-1) [INFO - org.apache.flume.client.avro.ReliableSpoolingFileEventReader.readEvents(ReliableSpoolingFileEventReader.java:258)] Last read took us just up to a file boundary. Rolling to the next file, if there is one.
2016-08-29 22:22:12,730 (pool-4-thread-1) [INFO - org.apache.flume.client.avro.ReliableSpoolingFileEventReader.rollCurrentFile(ReliableSpoolingFileEventReader.java:348)] Preparing to move file /home/hadoop/flume-test/test.txt to /home/hadoop/flume-test/test.txt.COMPLETED
2016-08-29 22:22:12,735 (pool-4-thread-1) [DEBUG - org.apache.flume.client.avro.ReliableSpoolingFileEventReader.rollCurrentFile(ReliableSpoolingFileEventReader.java:384)] Successfully rolled file /home/hadoop/flume-test/test.txt to /home/hadoop/flume-test/test.txt.COMPLETED
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;server1打印出：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;2016-08-29 22:34:00,734 (SinkRunner-PollingRunner-DefaultSinkProcessor) [INFO - org.apache.flume.sink.hdfs.HDFSDataStream.configure(HDFSDataStream.java:58)] Serializer = TEXT, UseRawLocalFileSystem = false
2016-08-29 22:34:01,602 (SinkRunner-PollingRunner-DefaultSinkProcessor) [INFO - org.apache.flume.sink.hdfs.BucketWriter.open(BucketWriter.java:234)] Creating hdfs://server1:9000/flume-test//events-.1473647640735.tmp
2016-08-29 22:34:32,796 (hdfs-k1-roll-timer-0) [INFO - org.apache.flume.sink.hdfs.BucketWriter.close(BucketWriter.java:363)] Closing hdfs://server1:9000/flume-test//events-.1473647640735.tmp
2016-08-29 22:34:35,975 (hdfs-k1-call-runner-0) [INFO - org.apache.flume.sink.hdfs.BucketWriter$8.call(BucketWriter.java:629)] Renaming hdfs://server1:9000/flume-test/events-.1473647640735.tmp to hdfs://server1:9000/flume-test/events-.1473647640735
2016-08-29 22:34:36,067 (hdfs-k1-roll-timer-0) [INFO - org.apache.flume.sink.hdfs.HDFSEventSink$1.run(HDFSEventSink.java:394)] Writer callback called.
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;查看hdfs 发现已经有了文件，flume测试成功！&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[hadoop@server2 flume-test]$ hadoop fs -ls /flume-test/
Found 1 items
-rw-r--r--   3 hadoop supergroup         45 2016-08-29 22:23 /flume-test/events-.1473646940947
[hadoop@server2 flume-test]$ hadoop fs -cat /flume-test/events-.1473646940947
hello flume source is avro and write to hdfs
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;参考文档&quot;&gt;&lt;a href=&quot;#参考文档&quot; class=&quot;headerlink&quot; title=&quot;参考文档&quot;&gt;&lt;/a&gt;参考文档&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://flume.apache.org/FlumeUserGuide.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://flume.apache.org/FlumeUserGuide.html&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://my.oschina.net/u/2000675/blog/604267&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://my.oschina.net/u/2000675/blog/604267&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://blog.csdn.net/u010022051/article/details/42522441&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://blog.csdn.net/u010022051/article/details/42522441&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.cnblogs.com/lishouguang/p/4560862.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.cnblogs.com/lishouguang/p/4560862.html&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      Apache Flume 1.6.0 的安装与使用
    
    </summary>
    
      <category term="BigData" scheme="http://www.guinguo.top/categories/BigData/"/>
    
    
  </entry>
  
  <entry>
    <title>Storm Base Used demon</title>
    <link href="http://www.guinguo.top/2016/08/24/Storm-BaseUsed-demon/"/>
    <id>http://www.guinguo.top/2016/08/24/Storm-BaseUsed-demon/</id>
    <published>2016-08-24T11:37:27.000Z</published>
    <updated>2016-09-12T03:24:17.364Z</updated>
    
    <content type="html">&lt;h2 id=&quot;栗子介绍&quot;&gt;&lt;a href=&quot;#栗子介绍&quot; class=&quot;headerlink&quot; title=&quot;栗子介绍&quot;&gt;&lt;/a&gt;栗子介绍&lt;/h2&gt;&lt;p&gt;spout：它会随机发射一系列的句子，句子的格式是 谁：说的话&lt;br&gt;    RandomSpout&lt;br&gt;bolt：处理源流出来的数据，末尾添加”, hi guinguo~”，然后打印。两个功能，两个Bolt。&lt;br&gt;    ExclaimBasicBolt&lt;br&gt;    PrintBolt&lt;br&gt;Topology:用于启动&lt;/p&gt;
&lt;h2 id=&quot;建立MAVEN项目&quot;&gt;&lt;a href=&quot;#建立MAVEN项目&quot; class=&quot;headerlink&quot; title=&quot;建立MAVEN项目&quot;&gt;&lt;/a&gt;建立MAVEN项目&lt;/h2&gt;&lt;p&gt;　　基本的pom.xml&lt;/p&gt;
&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;project&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;xmlns&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;http://maven.apache.org/POM/4.0.0&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;xmlns:xsi&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;xsi:schemaLocation&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;modelVersion&lt;/span&gt;&amp;gt;&lt;/span&gt;4.0.0&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;modelVersion&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;top.guinguo.storm&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;storm-samples&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;1.0-SNAPSHOT&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;packaging&lt;/span&gt;&amp;gt;&lt;/span&gt;jar&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;packaging&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;storm-samples&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;properties&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;project.build.sourceEncoding&lt;/span&gt;&amp;gt;&lt;/span&gt;UTF-8&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;project.build.sourceEncoding&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;properties&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;repositories&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;repository&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;id&lt;/span&gt;&amp;gt;&lt;/span&gt;clojars.org&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;id&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;url&lt;/span&gt;&amp;gt;&lt;/span&gt;http://clojars.org/repo&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;url&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;repository&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;repositories&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;build&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;finalName&lt;/span&gt;&amp;gt;&lt;/span&gt;storm-samples&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;finalName&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;plugins&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;plugin&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;org.apache.maven.plugins&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;maven-compiler-plugin&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;3.1&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;source&lt;/span&gt;&amp;gt;&lt;/span&gt;1.7&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;source&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;target&lt;/span&gt;&amp;gt;&lt;/span&gt;1.7&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;target&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;encoding&lt;/span&gt;&amp;gt;&lt;/span&gt;$&amp;#123;project.build.sourceEncoding&amp;#125;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;encoding&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;plugin&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;plugin&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;maven-assembly-plugin&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;descriptorRefs&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;descriptorRef&lt;/span&gt;&amp;gt;&lt;/span&gt;jar-with-dependencies&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;descriptorRef&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;descriptorRefs&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;executions&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;execution&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;id&lt;/span&gt;&amp;gt;&lt;/span&gt;make-assembly&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;id&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;phase&lt;/span&gt;&amp;gt;&lt;/span&gt;package&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;phase&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;goals&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;goal&lt;/span&gt;&amp;gt;&lt;/span&gt;single&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;goal&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;goals&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;execution&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;executions&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;plugin&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;plugins&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;build&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;dependencies&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- https://mvnrepository.com/artifact/org.apache.storm/storm-core --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;org.apache.storm&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;storm-core&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;1.0.2&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;scope&lt;/span&gt;&amp;gt;&lt;/span&gt;provided&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;scope&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- 注意，这里必须是provided，不然打包上传到集群跑回报错，&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      因为Storm集群自带了核心包，我们只需把我们写的class打包即可--&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;dependencies&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;project&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;加了个build 插件：maven-assembly-plugin： 为了把所有依赖包最后打到一个jar包去，方便测试和部署。&lt;/p&gt;
&lt;h2 id=&quot;建立Spout&quot;&gt;&lt;a href=&quot;#建立Spout&quot; class=&quot;headerlink&quot; title=&quot;建立Spout&quot;&gt;&lt;/a&gt;建立Spout&lt;/h2&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/**&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * Created by guin_guo on 2016/8/23.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;RandomSpout&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;BaseRichSpout&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; SpoutOutputCollector collector;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; Random rand;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; String[] sentences = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; String[]&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;guinguo:I&#39;m happy&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&quot;ggn:I&#39;m angry&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;guin_guo:I&#39;m sad&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;John:I&#39;m excited&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;Micheal:I&#39;m dangerous&quot;&lt;/span&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;declareOutputFields&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(OutputFieldsDeclarer outputFieldsDeclarer)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        outputFieldsDeclarer.declare(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Fields(&lt;span class=&quot;string&quot;&gt;&quot;sentence&quot;&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;//declarer.declare方法用来给我们发射的value在整个Stream中定义一个别名。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;//可以理解为key。该值必须在整个topology定义中唯一。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Map map, TopologyContext topologyContext, SpoutOutputCollector spoutOutputCollector)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.collector = spoutOutputCollector;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.rand = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Random();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;nextTuple&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        String toSay = sentences[rand.nextInt(sentences.length)];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.collector.emit(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Values(toSay));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;//发射tuple,不用自己实现tuple，&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;//我们只需要定义tuple的value，Storm会帮我们生成tuple&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;   Tuple的概念。&lt;br&gt;    Storm中，基本元数据是靠Tuple才承载的。或者说，Tuple是数据的一个大抽象。它要求实现类必须能序列化。&lt;br&gt;    Tuple中以List存放Values，List的Index按照new Values(obj1, obj2,…)的参数的index,例如我们emit(new Values(“v1”, “v2”)), 那么Tuple的属性即为：{ [ “v1” ], [ “V2” ] }&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;建立Bolt&quot;&gt;&lt;a href=&quot;#建立Bolt&quot; class=&quot;headerlink&quot; title=&quot;建立Bolt&quot;&gt;&lt;/a&gt;建立Bolt&lt;/h2&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/**&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * 末尾添加&quot;,hi guinguo~&quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;ExclaimBasicBolt&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;BaseBasicBolt&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;execute&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Tuple tuple, BasicOutputCollector basicOutputCollector)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        String sentence = tuple.getString(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        String out = sentence + &lt;span class=&quot;string&quot;&gt;&quot;,hi guinguo~&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        basicOutputCollector.emit(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Values(out));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;//取到以后，我们在末尾添加&quot;,hi guinguo~&quot;后，仍然发射一个Tuple&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;declareOutputFields&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(OutputFieldsDeclarer outputFieldsDeclarer)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        outputFieldsDeclarer.declare(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Fields(&lt;span class=&quot;string&quot;&gt;&quot;excl_sentence&quot;&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;//定义其唯一的value的field 名字为&quot;excl_sentence&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在上面的Spout中，我们发射的Tuple是{[“guinguo: I’m Happy”]},所以可以使用tuple.getValue(0)取到。&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/**&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * print bolt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;PrintBolt&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;BaseBasicBolt&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//private int indexId;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;prepare&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Map stormConf, TopologyContext context)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//this.indexId = context.getThisTaskIndex();&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;execute&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Tuple tuple, BasicOutputCollector basicOutputCollector)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        String sentence = tuple.getString(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;//仍然是取第一个&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        System.err.println(&lt;span class=&quot;string&quot;&gt;&quot;String recieved: &quot;&lt;/span&gt; + sentence);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//System.err.println(String.format(&quot;Bolt[%d] String recieved: %s&quot;, this.indexId, sentence));&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;declareOutputFields&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(OutputFieldsDeclarer outputFieldsDeclarer)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    	&lt;span class=&quot;comment&quot;&gt;//不再发tuple了&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;建立Topology&quot;&gt;&lt;a href=&quot;#建立Topology&quot; class=&quot;headerlink&quot; title=&quot;建立Topology&quot;&gt;&lt;/a&gt;建立Topology&lt;/h2&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;ExclaimBasicTopo&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String[] args)&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;throws&lt;/span&gt; Exception &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        TopologyBuilder builder = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; TopologyBuilder();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        builder.setSpout(&lt;span class=&quot;string&quot;&gt;&quot;spout&quot;&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; RandomSpout());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;//定义一个spout，id为&quot;spout&quot; &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		builder.setBolt(&lt;span class=&quot;string&quot;&gt;&quot;exclaim&quot;&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; ExclaimBasicBolt()).shuffleGrouping(&lt;span class=&quot;string&quot;&gt;&quot;spout&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;//定义了一个id为exclaim的bolt，并且按照随机分组获得spout发射的tuple&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        builder.setBolt(&lt;span class=&quot;string&quot;&gt;&quot;print&quot;&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; PrintBolt()).shuffleGrouping(&lt;span class=&quot;string&quot;&gt;&quot;exclaim&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;//定义了一个id为print的bolt，并且按照随机分组获得exclaim发射出来的tuple&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//builder.setBolt(&quot;exclaim&quot;, new ExclaimBasicBolt(),2).shuffleGrouping(&quot;spout&quot;);&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//builder.setBolt(&quot;print&quot;, new PrintBolt(),3).shuffleGrouping(&quot;exclaim&quot;);&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Config conf = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Config();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        conf.setDebug(&lt;span class=&quot;keyword&quot;&gt;false&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (args != &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; args.length &amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            conf.setNumWorkers(&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			&lt;span class=&quot;comment&quot;&gt;//交到集群中运行&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            StormSubmitter.submitTopology(args[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;], conf, builder.createTopology());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			&lt;span class=&quot;comment&quot;&gt;//本地运行&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            LocalCluster cluster = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; LocalCluster();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            cluster.submitTopology(&lt;span class=&quot;string&quot;&gt;&quot;test&quot;&lt;/span&gt;, conf, builder.createTopology());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Utils.sleep(&lt;span class=&quot;number&quot;&gt;100000&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            cluster.killTopology(&lt;span class=&quot;string&quot;&gt;&quot;test&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            cluster.shutdown();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;运行测试&quot;&gt;&lt;a href=&quot;#运行测试&quot; class=&quot;headerlink&quot; title=&quot;运行测试&quot;&gt;&lt;/a&gt;运行测试&lt;/h2&gt;&lt;h3 id=&quot;本地运行&quot;&gt;&lt;a href=&quot;#本地运行&quot; class=&quot;headerlink&quot; title=&quot;本地运行&quot;&gt;&lt;/a&gt;本地运行&lt;/h3&gt;&lt;p&gt;  运行ExclaimBasicTopo可以看到不停的输出：    &lt;/p&gt;
&lt;pre&gt;&lt;code&gt;String recieved: marry:I&amp;apos;m angry,hi guin_guo~
String recieved: marry:I&amp;apos;m angry,hi guin_guo~
String recieved: marry:I&amp;apos;m angry,hi guin_guo~
String recieved: ted:I&amp;apos;m excited,hi guin_guo~
String recieved: marry:I&amp;apos;m angry,hi guin_guo~
String recieved: ted:I&amp;apos;m excited,hi guin_guo~
String recieved: laden:I&amp;apos;m dangerous,hi guin_guo~
String recieved: john:I&amp;apos;m sad,hi guin_guo~
String recieved: ted:I&amp;apos;m excited,hi guin_guo~
String recieved: laden:I&amp;apos;m dangerous,hi guin_guo~
String recieved: laden:I&amp;apos;m dangerous,hi guin_guo~
String recieved: edi:I&amp;apos;m happy,hi guin_guo~
String recieved: john:I&amp;apos;m sad,hi guin_guo~
String recieved: laden:I&amp;apos;m dangerous,hi guin_guo~
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;　　我们可以指定并行数，在ExclaimBasicTopo中我注释掉的那两行，跟PrintBolt中的那个打印任务Id&lt;br&gt;由于我们并没有多指定task数目，所以默认，会有两个exectuor去执行两个exclaimBasicBolt的task，3个executor去执行3个PrintBolt的task。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Bolt[1] String recieved: john:I&amp;apos;m sad,hi guin_guo~
Bolt[2] String recieved: edi:I&amp;apos;m happy,hi guin_guo~
Bolt[1] String recieved: laden:I&amp;apos;m dangerous,hi guin_guo~
Bolt[2] String recieved: edi:I&amp;apos;m happy,hi guin_guo~
Bolt[1] String recieved: laden:I&amp;apos;m dangerous,hi guin_guo~
Bolt[0] String recieved: marry:I&amp;apos;m angry,hi guin_guo~
Bolt[1] String recieved: marry:I&amp;apos;m angry,hi guin_guo~
Bolt[0] String recieved: edi:I&amp;apos;m happy,hi guin_guo~
Bolt[1] String recieved: john:I&amp;apos;m sad,hi guin_guo~
Bolt[0] String recieved: marry:I&amp;apos;m angry,hi guin_guo~
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;　　PrintBolt 的prepare方法从上下文中拿到该Bolt的TaskIndex，我们指定了3的并发度，所以理论上有3个task，那么该值应该为[0,1,2]。&lt;br&gt;证实确实是并发了。&lt;/p&gt;
&lt;h3 id=&quot;集群运行&quot;&gt;&lt;a href=&quot;#集群运行&quot; class=&quot;headerlink&quot; title=&quot;集群运行&quot;&gt;&lt;/a&gt;集群运行&lt;/h3&gt;&lt;p&gt;用 mvn clean install 命令编译，然后把target目录下生成的 storm-samples-jar-with-dependencies.jar 拷到nimbus机器上，执行&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd apache-storm-1.0.2/bin

./storm jar /home/hadoop/storm-samples-jar-with-dependencies.jar top.guinguo.storm.ExclaimBasicTopo test
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;然后可以到web UI里面查看详情信息&lt;br&gt;点进去test，可以看到&lt;br&gt;&lt;img src=&quot;http://7xsve9.com1.z0.glb.clouddn.com/Storm-spouts.jpg&quot; alt=&quot;test-spouts&quot;&gt;&lt;br&gt;&lt;img src=&quot;http://7xsve9.com1.z0.glb.clouddn.com/Storm-bolts.jpg&quot; alt=&quot;test-bolts&quot;&gt;&lt;/p&gt;
&lt;p&gt;看到spout已经发射了76780个tuple了，而id为exclaim的bolt已经接收了72780个tuple了，&lt;br&gt;而print没有输出，emit为0。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;参考&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://itindex.net/detail/47353-storm-%E7%B3%BB%E5%88%97&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://itindex.net/detail/47353-storm-%E7%B3%BB%E5%88%97&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      Storm之最基本的例子
    
    </summary>
    
      <category term="BigData" scheme="http://www.guinguo.top/categories/BigData/"/>
    
    
      <category term="Storm" scheme="http://www.guinguo.top/tags/Storm/"/>
    
  </entry>
  
  <entry>
    <title>Hadoop Cluster Set Up P7 Storm</title>
    <link href="http://www.guinguo.top/2016/08/24/Hadoop-Cluster-Set-Up-P7-Storm/"/>
    <id>http://www.guinguo.top/2016/08/24/Hadoop-Cluster-Set-Up-P7-Storm/</id>
    <published>2016-08-23T16:00:35.000Z</published>
    <updated>2016-09-12T03:24:08.923Z</updated>
    
    <content type="html">&lt;h2 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h2&gt;&lt;h3 id=&quot;术语&quot;&gt;&lt;a href=&quot;#术语&quot; class=&quot;headerlink&quot; title=&quot;术语&quot;&gt;&lt;/a&gt;术语&lt;/h3&gt;&lt;p&gt;　　Storm相关术语都用斜体英文表示。 这些术语的字面意义翻译如下，由于这个工具的名字叫Storm，这些术语一律按照气象名词解释&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;spout 龙卷，读取原始数据为bolt提供数据&lt;/li&gt;
&lt;li&gt;bolt 雷电，从spout或其它bolt接收数据，并处理数据，处理结果可作为其它bolt的数据源或最终结果&lt;/li&gt;
&lt;li&gt;nimbus 雨云，主节点的守护进程，负责为工作节点分发任务。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;下面的术语跟气象就没有关系了&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;topology 拓扑结构，Storm的一个任务单元&lt;/li&gt;
&lt;li&gt;define field(s) 定义域，由spout或bolt提供，被bolt接收&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;基础知识&quot;&gt;&lt;a href=&quot;#基础知识&quot; class=&quot;headerlink&quot; title=&quot;基础知识&quot;&gt;&lt;/a&gt;基础知识&lt;/h3&gt;&lt;p&gt;　　Storm是一个分布式的，可靠的，容错的数据流处理系统。它会把工作任务委托给不同类型的组件，&lt;br&gt;每个组件负责一项简单特定的任务。Storm集群的输入流由一个被称作spout的组件管理，spout把数据&lt;br&gt;传递给bolt，bolt要么把数据保存到某种存储器，要么把数据传递给其他的bolt。你可以想象一下，&lt;br&gt;一个Storm集群就是在一连串的bolt之间转换spout传过来的数据。&lt;/p&gt;
&lt;h3 id=&quot;应用案例&quot;&gt;&lt;a href=&quot;#应用案例&quot; class=&quot;headerlink&quot; title=&quot;应用案例&quot;&gt;&lt;/a&gt;应用案例&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;连续计算&lt;br&gt;连续发送数据到客户端，使它们能够实时更新并显示结果，如网站指标。&lt;/li&gt;
&lt;li&gt;分布式远程过程调用&lt;/li&gt;
&lt;li&gt;频繁的CPU密集型操作并行化&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;Storm组件&quot;&gt;&lt;a href=&quot;#Storm组件&quot; class=&quot;headerlink&quot; title=&quot;Storm组件&quot;&gt;&lt;/a&gt;Storm组件&lt;/h3&gt;&lt;p&gt;对于一个Storm集群，一个连续运行的主节点组织若干节点工作。有两类节点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;主节点：master node 运行这一个叫做Nimbus的守护进程，负责在集群中分发代码，分配任务，监控等。&lt;/li&gt;
&lt;li&gt;工作节点：worker nodes 运行Supervisor的守护进程，作为拓扑的一部分运行在节点上，&lt;br&gt;一个Storm拓扑结构在不同的机器上运行着众多的工作节点。&lt;h2 id=&quot;安装前要求与流程&quot;&gt;&lt;a href=&quot;#安装前要求与流程&quot; class=&quot;headerlink&quot; title=&quot;安装前要求与流程&quot;&gt;&lt;/a&gt;安装前要求与流程&lt;/h2&gt;&lt;/li&gt;
&lt;li&gt;Zookeeper集群&lt;br&gt;参考 &lt;a href=&quot;/2016/05/26/Zookeeper集群安装于部署/&quot;&gt;Zookeeper集群安装于部署&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;安装Storm依赖库&lt;/li&gt;
&lt;li&gt;下载并解压Storm发布版本&lt;/li&gt;
&lt;li&gt;修改storm.yaml配置文件&lt;/li&gt;
&lt;li&gt;启动&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;安装Storm依赖库&quot;&gt;&lt;a href=&quot;#安装Storm依赖库&quot; class=&quot;headerlink&quot; title=&quot;安装Storm依赖库&quot;&gt;&lt;/a&gt;安装Storm依赖库&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;http://zeromq.org/area:download&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ZeroMQ&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt;wget https://github.com/zeromq/zeromq4-1/releases/download/v4.1.5/zeromq-4.1.5.tar.gz
tar -zxvf zeromq-4.1.5.tar.gz
cd zeromq-4.1.5 
./configure
make
sudo make install
&lt;/code&gt;&lt;/pre&gt;&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/nathanmarz/jzmq&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ZJMQ&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt;git clone https://github.com/nathanmarz/jzmq.git
cd jzmq
./autogen.sh
./configure
make
sudo make install
&lt;/code&gt;&lt;/pre&gt;&lt;ol&gt;
&lt;li&gt;JAVA &amp;gt;6&lt;/li&gt;
&lt;li&gt;Python&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;下载并解压&quot;&gt;&lt;a href=&quot;#下载并解压&quot; class=&quot;headerlink&quot; title=&quot;下载并解压&quot;&gt;&lt;/a&gt;下载并解压&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;wget http://www-us.apache.org/dist/storm/apache-storm-1.0.2/apache-storm-1.0.2.tar.gz

tar -zxvf apache-storm-1.0.2.tar.gz 
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;配置&quot;&gt;&lt;a href=&quot;#配置&quot; class=&quot;headerlink&quot; title=&quot;配置&quot;&gt;&lt;/a&gt;配置&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;[hadoop@server1 ~]$ vi storm/conf/storm.yaml 

        storm.zookeeper.servers:
            - &amp;quot;server1&amp;quot;
            - &amp;quot;server2&amp;quot;
            - &amp;quot;server3&amp;quot;

        storm.local.dir: &amp;quot;/home/hadoop/storm/data&amp;quot;

        nimbus.seeds: [&amp;quot;server1&amp;quot;]

scp -rq apache-storm-1.0.2 server2:~/
scp -rq apache-storm-1.0.2 server3:~/
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;启动&quot;&gt;&lt;a href=&quot;#启动&quot; class=&quot;headerlink&quot; title=&quot;启动&quot;&gt;&lt;/a&gt;启动&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;启动主控节点&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt;[hadoop@server1 ~]$  apache-storm-1.0.2/bin/storm nimbus
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这会一直占用着控制台，可以使用下面命令让其后台运行&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[hadoop@server1 ~]$  apache-storm-1.0.2/bin/storm nimbus &amp;gt; /dev/null 2&amp;gt;&amp;amp;1 &amp;amp;
&lt;/code&gt;&lt;/pre&gt;&lt;ol&gt;
&lt;li&gt;启动工作节点&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt;[hadoop@server2 ~]$  apache-storm-1.0.2/bin/storm supervisor &amp;gt; /dev/null 2&amp;gt;&amp;amp;1 &amp;amp;
[hadoop@server3 ~]$  apache-storm-1.0.2/bin/storm supervisor &amp;gt; /dev/null 2&amp;gt;&amp;amp;1 &amp;amp;
&lt;/code&gt;&lt;/pre&gt;&lt;ol&gt;
&lt;li&gt;启动管理页面&lt;br&gt;在主控节点上运行&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt;[hadoop@server1 ~]$  apache-storm-1.0.2/bin/storm ui &amp;gt; /dev/null 2&amp;gt;&amp;amp;1 &amp;amp;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;web ui地址端口8080&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[hadoop@server1 ~]$ jps
7845 Jps
2567 core
6777 nimbus

[hadoop@server2 ~]$ jps
3657 Jps
2411 supervisor

[hadoop@server3 ~]$ jps
19259 Jps
18767 supervisor
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;参考&quot;&gt;&lt;a href=&quot;#参考&quot; class=&quot;headerlink&quot; title=&quot;参考&quot;&gt;&lt;/a&gt;参考&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://storm.apache.org/releases/1.0.2/Setting-up-a-Storm-cluster.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://storm.apache.org/releases/1.0.2/Setting-up-a-Storm-cluster.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://blog.csdn.net/lulongzhou_llz/article/details/46433107&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://blog.csdn.net/lulongzhou_llz/article/details/46433107&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://yq.aliyun.com/articles/25772&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://yq.aliyun.com/articles/25772&lt;/a&gt;&lt;br&gt;报错参考&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://my.oschina.net/mingdongcheng/blog/43009&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://my.oschina.net/mingdongcheng/blog/43009&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      Storm1.0.2 的安装
    
    </summary>
    
      <category term="BigData" scheme="http://www.guinguo.top/categories/BigData/"/>
    
    
      <category term="Storm" scheme="http://www.guinguo.top/tags/Storm/"/>
    
  </entry>
  
  <entry>
    <title>Hadoop Cluster Set Up P6 Sqoop</title>
    <link href="http://www.guinguo.top/2016/08/16/Hadoop-Cluster-Set-Up-P6-Sqoop/"/>
    <id>http://www.guinguo.top/2016/08/16/Hadoop-Cluster-Set-Up-P6-Sqoop/</id>
    <published>2016-08-16T15:17:16.000Z</published>
    <updated>2016-09-12T03:23:57.014Z</updated>
    
    <content type="html">&lt;p&gt;Sqoop1.99.7 暂时只支持mysql到hdfs或者hdfs到mysql，不支持hive或者hbase。&lt;a href=&quot;sqoop.apache.org&quot;&gt;官网&lt;/a&gt;也说了不用与生产环境。这里我只是先装 &lt;del&gt;(踩)&lt;/del&gt; 着 &lt;del&gt;(坑)&lt;/del&gt;&lt;br&gt;&lt;img src=&quot;/images/acmusume/01.png&quot; height=&quot;50px&quot; ,=&quot;&quot; width=&quot;50px&quot; style=&quot;margin:0 0&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;下载并解压&quot;&gt;&lt;a href=&quot;#下载并解压&quot; class=&quot;headerlink&quot; title=&quot;下载并解压&quot;&gt;&lt;/a&gt;下载并解压&lt;/h2&gt;&lt;p&gt;由于服务器在美国，所以我换了一个镜像,大家如果在国内的话，可以使用北理工的&lt;a href=&quot;http://mirror.bit.edu.cn&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://mirror.bit.edu.cn&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;wget http://www-us.apache.org/dist/sqoop/1.99.7/sqoop-1.99.7-bin-hadoop200.tar.gz

tar -zxvf sqoop-1.99.7-bin-hadoop200.tar.gz 
mv sqoop-1.99.7-bin-hadoop200 sqoop-1.99.7
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;配置&quot;&gt;&lt;a href=&quot;#配置&quot; class=&quot;headerlink&quot; title=&quot;配置&quot;&gt;&lt;/a&gt;配置&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;环境变量&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;/etc/profile
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;
&lt;p&gt;   export SQOOP_HOME=/home/hadoop/sqoop-1.99.7&lt;br&gt;    export PATH=$PATH:$SQOOP_HOME/bin&lt;br&gt;    export CATALINE_BASE=$SQOOP_HOME/server&lt;br&gt;    export LOGDIR=$SQOOP_HOME/logs&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;sqoop配置文件&lt;br&gt;　　这里&lt;strong&gt;注意&lt;/strong&gt;，配置文件不再存放于${SQOOP_HOME}/server/conf/目录下，而是直接存在安装的目录${SQOOP_HOME}/conf/下&lt;/p&gt;
&lt;p&gt;  vi ${SQOOP_HOME}/conf/sqoop.properties&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;　　把下面的属性替换成hadoop的配置文件目录，&lt;strong&gt;注意&lt;/strong&gt;！我第一次换成hadoop安装目录，然后就报错了，尴尬。。。    &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;   org.apache.sqoop.submission.engine.mapreduce.configuration.directory=/usr/local/hadoop-2.7.2/etc/hadoop/&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;　　并且替换@LOGDIR@ 和@BASEDIR@ ：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;   :0,$ s/@LOGDIR@/logs/g&lt;br&gt;    :0,$ s/@BASEDIR@/base/g&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code&gt;vi ${SQOOP_HOME}/conf/sqoop_bootstrap.properties 
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;　　这里要注意，有个坑，1.99.7版本之前，都是catalina.properties这个配置文件，然后我下了1.99.7就没有发现，而且官网也没显式说明，改名为sqoop_bootstrap.properties&lt;br&gt;    把hadoop的所以jar都加进来&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;   common.loader=${catalina.base}/lib,${catalina.base}/lib/&lt;em&gt;.jar,${catalina.home}/lib,${catalina.home}/lib/&lt;/em&gt;.jar,${catalina.home}/../lib/&lt;em&gt;.jar,/usr/local/hadoop-2.7.2/share/hadoop/common/&lt;/em&gt;.jar,/usr/local/hadoop-2.7.2/share/hadoop/common/lib/&lt;em&gt;.jar,/usr/local/hadoop-2.7.2/share/hadoop/hdfs/&lt;/em&gt;.jar,/usr/local/hadoop-2.7.2/share/hadoop/hdfs/lib/&lt;em&gt;.jar,/usr/local/hadoop-2.7.2/share/hadoop/mapreduce/&lt;/em&gt;.jar,/usr/local/hadoop-2.7.2/share/hadoop/mapreduce/lib/&lt;em&gt;.jar,/usr/local/hadoop-2.7.2/share/hadoop/tools/&lt;/em&gt;.jar,/usr/local/hadoop-2.7.2/share/hadoop/tools/lib/&lt;em&gt;.jar,/usr/local/hadoop-2.7.2/share/hadoop/yarn/&lt;/em&gt;.jar,/usr/local/hadoop-2.7.2/share/hadoop/yarn/lib/&lt;em&gt;.jar,/usr/local/hadoop-2.7.2/share/hadoop/httpfs/tomcat/lib/&lt;/em&gt;.jar&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;复制mysql-connector-java-*-bin.jar到${SQOOP_HOME}/server/lib/下&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;wget https://dev.mysql.com/get/Downloads/Connector-J/mysql-connector-java-5.1.39.tar.gz&quot;&gt;mysql-connector&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cp mysql-connector-java-5.1.39-bin.jar ${SQOOP_HOME}/server/lib/
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;运行测试&quot;&gt;&lt;a href=&quot;#运行测试&quot; class=&quot;headerlink&quot; title=&quot;运行测试&quot;&gt;&lt;/a&gt;运行测试&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;首先验证配置是否正确&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;sqoop2-tool verify
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这里我又踩了一个坑&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;   Verification has failed, please check Server logs for further details.&lt;br&gt;    Tool class org.apache.sqoop.tools.tool.VerifyTool has failed.&lt;br&gt;查看日志 ${SQOOP_HOME}/logs/sqoop.log&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;figcaption&gt;&lt;span&gt;log&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2016&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;08&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;18&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;58&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;34&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;400&lt;/span&gt; ERROR [org.apache.sqoop.core.SqoopServer.initialize(SqoopServer.java:&lt;span class=&quot;number&quot;&gt;67&lt;/span&gt;)] Failure in server initialization  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;org.apache.sqoop.common.SqoopException: MAPREDUCE_0002:Failure on submission engine initialization  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at org.apache.sqoop.submission.mapreduce.MapreduceSubmissionEngine.initialize(MapreduceSubmissionEngine.java:&lt;span class=&quot;number&quot;&gt;127&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at org.apache.sqoop.driver.JobManager.initialize(JobManager.java:&lt;span class=&quot;number&quot;&gt;257&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at org.apache.sqoop.core.SqoopServer.initialize(SqoopServer.java:&lt;span class=&quot;number&quot;&gt;64&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at org.apache.sqoop.tools.tool.VerifyTool.runTool(VerifyTool.java:&lt;span class=&quot;number&quot;&gt;36&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at org.apache.sqoop.tools.ToolRunner.main(ToolRunner.java:&lt;span class=&quot;number&quot;&gt;72&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Caused by: java.io.IOException: Cannot initialize Cluster. Please check your configuration &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; mapreduce.framework.name and the correspond server addresses.  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at org.apache.hadoop.mapreduce.Cluster.initialize(Cluster.java:&lt;span class=&quot;number&quot;&gt;120&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at org.apache.hadoop.mapreduce.Cluster.&amp;lt;init&amp;gt;(Cluster.java:&lt;span class=&quot;number&quot;&gt;82&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at org.apache.hadoop.mapreduce.Cluster.&amp;lt;init&amp;gt;(Cluster.java:&lt;span class=&quot;number&quot;&gt;75&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at org.apache.hadoop.mapred.JobClient.init(JobClient.java:&lt;span class=&quot;number&quot;&gt;475&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at org.apache.hadoop.mapred.JobClient.&amp;lt;init&amp;gt;(JobClient.java:&lt;span class=&quot;number&quot;&gt;454&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at org.apache.sqoop.submission.mapreduce.MapreduceSubmissionEngine.initialize(MapreduceSubmissionEngine.java:&lt;span class=&quot;number&quot;&gt;125&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ... &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt; more  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2016&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;08&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;18&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;58&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;34&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;403&lt;/span&gt; ERROR [org.apache.sqoop.tools.tool.VerifyTool.runTool(VerifyTool.java:&lt;span class=&quot;number&quot;&gt;41&lt;/span&gt;)] Got exception &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; initializing/destroying Sqoop server:  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;java.lang.RuntimeException: Failure in server initialization  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at org.apache.sqoop.core.SqoopServer.initialize(SqoopServer.java:&lt;span class=&quot;number&quot;&gt;68&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at org.apache.sqoop.tools.tool.VerifyTool.runTool(VerifyTool.java:&lt;span class=&quot;number&quot;&gt;36&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at org.apache.sqoop.tools.ToolRunner.main(ToolRunner.java:&lt;span class=&quot;number&quot;&gt;72&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Caused by: org.apache.sqoop.common.SqoopException: MAPREDUCE_0002:Failure on submission engine initialization  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at org.apache.sqoop.submission.mapreduce.MapreduceSubmissionEngine.initialize(MapreduceSubmissionEngine.java:&lt;span class=&quot;number&quot;&gt;127&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at org.apache.sqoop.driver.JobManager.initialize(JobManager.java:&lt;span class=&quot;number&quot;&gt;257&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at org.apache.sqoop.core.SqoopServer.initialize(SqoopServer.java:&lt;span class=&quot;number&quot;&gt;64&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ... &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; more  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Caused by: java.io.IOException: Cannot initialize Cluster. Please check your configuration &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; mapreduce.framework.name and the correspond server addresses.  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at org.apache.hadoop.mapreduce.Cluster.initialize(Cluster.java:&lt;span class=&quot;number&quot;&gt;120&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at org.apache.hadoop.mapreduce.Cluster.&amp;lt;init&amp;gt;(Cluster.java:&lt;span class=&quot;number&quot;&gt;82&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at org.apache.hadoop.mapreduce.Cluster.&amp;lt;init&amp;gt;(Cluster.java:&lt;span class=&quot;number&quot;&gt;75&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at org.apache.hadoop.mapred.JobClient.init(JobClient.java:&lt;span class=&quot;number&quot;&gt;475&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at org.apache.hadoop.mapred.JobClient.&amp;lt;init&amp;gt;(JobClient.java:&lt;span class=&quot;number&quot;&gt;454&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    at org.apache.sqoop.submission.mapreduce.MapreduceSubmissionEngine.initialize(MapreduceSubmissionEngine.java:&lt;span class=&quot;number&quot;&gt;125&lt;/span&gt;)  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ... &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt; more  &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;MapReduce配置出错了？&lt;br&gt;搞了半天，无语啊，我配置了TEZ，mapreduce框架默认使用yarn作为管理，但是我在yarn-site.xml中配了tez&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;property&amp;gt;  
  &amp;lt;name&amp;gt;mapreduce.framework.name&amp;lt;/name&amp;gt;  
  &amp;lt;value&amp;gt;yarn-tez&amp;lt;/value&amp;gt;  
&amp;lt;/property&amp;gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;把这个配置去掉，使用默认的yarn就正常了，，，sqoop2的兼容实在是不敢恭维。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[hadoop@server1 sqoop-1.99.7]$ sqoop2-tool verify
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;
&lt;p&gt;   Running tool: class org.apache.sqoop.tools.tool.VerifyTool&lt;br&gt;    1    [main] INFO  org.apache.sqoop.core.SqoopServer  - Initializing Sqoop server.&lt;br&gt;    82   [main] INFO  org.apache.sqoop.core.PropertiesConfigurationProvider  - Starting config file poller thread&lt;br&gt;    Verification was successful.&lt;br&gt;    Tool class org.apache.sqoop.tools.tool.VerifyTool has finished correctly.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;启动sqoop2-server&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;sqoop2-server start 
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;
&lt;p&gt;   [hadoop@server1 sqoop-1.99.7]$ sqoop2-server start&lt;br&gt;    Setting conf dir: /home/hadoop/sqoop-1.99.7/bin/../conf&lt;br&gt;    Sqoop home directory: /home/hadoop/sqoop-1.99.7&lt;br&gt;    Starting the Sqoop2 server…&lt;br&gt;    Sqoop2 server started.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;默认端口是12000 在sqoop.properties 中可以改&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[hadoop@server1 sqoop-1.99.7]$  wget -qO -  http://server1:12000/sqoop/version
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;
&lt;p&gt;   {“source-url”:”git:\/\/mbp.abrahamfine.com\/Users\/abefine\/cloudera_code\/sqoop-clean\/common”,”source-revision”:”435d5e61b922a32d7bce567fe5fb1a9c0d9b1bbb”,”build-version”:”1.99.7”,”api-versions”:[“v1”],”user”:”abefine”,”build-date”:”Tue Jul 19 16:08:27 PDT 2016”}&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;参考&quot;&gt;&lt;a href=&quot;#参考&quot; class=&quot;headerlink&quot; title=&quot;参考&quot;&gt;&lt;/a&gt;参考&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.th7.cn/db/nosql/201510/134172.shtml&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;hadoop-2.6.0与sqoop-1.99.6的安裝配置&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://blog.csdn.net/gdmzlhj1/article/details/50483171&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;sqoop1.4.6安装和使用&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      Sqoop1.99.7的安装
    
    </summary>
    
      <category term="BigData" scheme="http://www.guinguo.top/categories/BigData/"/>
    
    
      <category term="Sqoop2" scheme="http://www.guinguo.top/tags/Sqoop2/"/>
    
  </entry>
  
  <entry>
    <title>Hadoop Cluster Set Up P5 Hive</title>
    <link href="http://www.guinguo.top/2016/07/28/Hadoop-Cluster-Set-Up-P5-Hive/"/>
    <id>http://www.guinguo.top/2016/07/28/Hadoop-Cluster-Set-Up-P5-Hive/</id>
    <published>2016-07-28T12:39:36.000Z</published>
    <updated>2016-09-12T03:23:33.518Z</updated>
    
    <content type="html">&lt;p&gt;Hive原则上可以安装在集群上的任何一台机器上面，如果 master节点的负荷比较大，可以选择一台机器性能较好的datanode来安装hive。这里我选择master来安装hive，因为另一台namenode的配置跟datanode差不多，而且我的master配置相比其他node好一点。另外，在我们的安装中采用 MySQL来存放hive的meta数据&lt;/p&gt;
&lt;h2 id=&quot;Centos7-install-mysql-server&quot;&gt;&lt;a href=&quot;#Centos7-install-mysql-server&quot; class=&quot;headerlink&quot; title=&quot;Centos7 install mysql-server&quot;&gt;&lt;/a&gt;Centos7 install mysql-server&lt;/h2&gt;&lt;p&gt;Centos 使用mariadb 作为默认数据库，mariadb是MySQL一个分支，而且是开源的。不过我们仍可以安装mysql,使用RPM包进行安装&lt;/p&gt;
&lt;h3 id=&quot;下载MySQL的rpm包&quot;&gt;&lt;a href=&quot;#下载MySQL的rpm包&quot; class=&quot;headerlink&quot; title=&quot;下载MySQL的rpm包&quot;&gt;&lt;/a&gt;下载MySQL的rpm包&lt;/h3&gt;&lt;p&gt;yum install wget &lt;a href=&quot;http://repo.mysql.com/mysql-community-release-el7-5.noarch.rpm&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://repo.mysql.com/mysql-community-release-el7-5.noarch.rpm&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;安装mysql-community-release-el75-noarch-rpm-包&quot;&gt;&lt;a href=&quot;#安装mysql-community-release-el75-noarch-rpm-包&quot; class=&quot;headerlink&quot; title=&quot;安装mysql-community-release-el75.noarch.rpm 包&quot;&gt;&lt;/a&gt;安装mysql-community-release-el75.noarch.rpm 包&lt;/h3&gt;&lt;p&gt;rpm -ivh mysql-community-release-el7-5.noarch.rpm&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;－ivh：安装显示安装进度--install--verbose--hash
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;安装后就会有两个yum源&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@ ~]# ls -1 /etc/yum.repos.d/mysql-community*
/etc/yum.repos.d/mysql-community.repo
/etc/yum.repos.d/mysql-community-source.repo
[root@server1 ~]#
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;安装MySQL-Server&quot;&gt;&lt;a href=&quot;#安装MySQL-Server&quot; class=&quot;headerlink&quot; title=&quot;安装MySQL Server&quot;&gt;&lt;/a&gt;安装MySQL Server&lt;/h3&gt;&lt;p&gt;yum install mysql-server&lt;/p&gt;
&lt;h3 id=&quot;启动-停止-重启-状态命令&quot;&gt;&lt;a href=&quot;#启动-停止-重启-状态命令&quot; class=&quot;headerlink&quot; title=&quot;启动 停止 重启 状态命令&quot;&gt;&lt;/a&gt;启动 停止 重启 状态命令&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;systemctl start mysqld&lt;/li&gt;
&lt;li&gt;systemctl stop mysqld&lt;/li&gt;
&lt;li&gt;systemctl restart mysqld&lt;/li&gt;
&lt;li&gt;systemctl status mysqld&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;更改root密码&quot;&gt;&lt;a href=&quot;#更改root密码&quot; class=&quot;headerlink&quot; title=&quot;更改root密码&quot;&gt;&lt;/a&gt;更改root密码&lt;/h3&gt;&lt;p&gt;mysql_secure_installation&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Enter current password for root (enter for none):   //当前密码,第一次使用为null
OK, successfully used password, moving on...

Setting the root password ensures that nobody can log into the MySQL
root user without the proper authorisation.

Set root password? [Y/n] Y      //设置密码
New password:                   /root
Re-enter new password:          //root
Password updated successfully!
Reloading privilege tables..
... Success!

By default, a MySQL installation has an anonymous user, allowing anyone
to log into MySQL without having to have a user account created for
them.  This is intended only for testing, and to make the installation
go a bit smoother.  You should remove them before moving into a
production environment.

Remove anonymous users? [Y/n] n     //是否删除匿名用户
... skipping.

Normally, root should only be allowed to connect from &amp;apos;localhost&amp;apos;.  This
ensures that someone cannot guess at the root password from the network.

Disallow root login remotely? [Y/n] n       //不允许root远程登录
... skipping.

By default, MySQL comes with a database named &amp;apos;test&amp;apos; that anyone can
access.  This is also intended only for testing, and should be removed
before moving into a production environment.

Remove test database and access to it? [Y/n] n  //是否删除测试数据库
... skipping.

Reloading the privilege tables will ensure that all changes made so far
will take effect immediately.

Reload privilege tables now? [Y/n] Y        //重新加载权限表
... Success!

Cleaning up...

All done!  If you&amp;apos;ve completed all of the above steps, your MySQL
installation should now be secure.

Thanks for using MySQL!
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;登录验证&quot;&gt;&lt;a href=&quot;#登录验证&quot; class=&quot;headerlink&quot; title=&quot;登录验证&quot;&gt;&lt;/a&gt;登录验证&lt;/h3&gt;&lt;p&gt;mysql -uroot -proot&lt;/p&gt;
&lt;h3 id=&quot;创建数据库并授权&quot;&gt;&lt;a href=&quot;#创建数据库并授权&quot; class=&quot;headerlink&quot; title=&quot;创建数据库并授权&quot;&gt;&lt;/a&gt;创建数据库并授权&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;mysql -uroot -proot
mysql&amp;gt; create database hive;
[授权hive在任何位置(%)远程可以登陆]
mysql&amp;gt; grant all on hive.* to &amp;apos;hive&amp;apos;@&amp;apos;%&amp;apos; identified by &amp;apos;hive&amp;apos;; 
mysql&amp;gt; grant all on hive.* to &amp;apos;hive&amp;apos;@&amp;apos;server1&amp;apos; identified by &amp;apos;hive&amp;apos;;
mysql&amp;gt; flush privileges;    [刷新权限]
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;下载hive1-2-1并解压&quot;&gt;&lt;a href=&quot;#下载hive1-2-1并解压&quot; class=&quot;headerlink&quot; title=&quot;下载hive1.2.1并解压&quot;&gt;&lt;/a&gt;下载hive1.2.1并解压&lt;/h2&gt;&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;wget http://archive.apache.org/dist/hive/stable/apache-hive-1.2.1-bin.tar.gz

tar -zxvf apache-hive-1.2.1-bin.tar.gz -C /usr/local/
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;h2 id=&quot;配置&quot;&gt;&lt;a href=&quot;#配置&quot; class=&quot;headerlink&quot; title=&quot;配置&quot;&gt;&lt;/a&gt;配置&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;环境变量&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;[root@server1 hive-1.2.1]# vi /etc/profile
#HIVE
export HIVE_HOME=/usr/local/hive-1.2.1
export PATH=$PATH:$HIVE_HOME/bin
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;   [root@server1 hive-1.2.1]# source /etc/profile&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;修改bin/hive-config.sh&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;vi /usr/local/hive-1.2.1/bin/hive-config.sh
#Install add
export JAVA_HOME=/usr/local/jdk1.7.0_79
export HIVE_HOME=/usr/local/hive-1.2.1
export HADOOP_HOME=/usr/local/hadoop-2.7.2
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p&gt;复制配置文件&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;[root@server1 hive-1.2.1]# cd conf/
[root@server1 conf]# ls
beeline-log4j.properties.template  hive-exec-log4j.properties.template
hive-default.xml.template          hive-log4j.properties.template
hive-env.sh.template               ivysettings.xml
[root@server1 conf]# cp hive-exec-log4j.properties.template hive-exec-log4j.properties      
[root@server1 conf]# cp hive-log4j.properties.template hive-log4j.properties          
[root@server1 conf]# cp hive-env.sh.template hive-env.sh          
[root@server1 conf]# cp hive-default.xml.template hive-site.xml
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;修改hbase-site.xml&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;修改hive-site.xml 以MySQL做metastore&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;javax.jdo.option.ConnectionURL&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;jdbc:mysql://server1:3306/hive?createDatabaseIfNotExist=true&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;property&amp;gt;
//mysql驱动
&amp;lt;name&amp;gt;javax.jdo.option.ConnectionDriverName&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;com.mysql.jdbc.Driver&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
//用户名
&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;javax.jdo.option.ConnectionUserName&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;hive&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
//用户密码
&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;javax.jdo.option.ConnectionPassword&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;hive&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
//默认数据库位置
&amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;hive.metastore.warehouse.dir&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;/user/hive/warehouse&amp;lt;/value&amp;gt;
    &amp;lt;description&amp;gt;location of default database for the warehouse&amp;lt;/description&amp;gt;
&amp;lt;/property&amp;gt;

//hive远程metastore的thrift地址        
&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;hive.metastore.uris&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;thrift://server1:9083&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;


//hiveserver2的配置
&amp;lt;property&amp;gt;  
    &amp;lt;name&amp;gt;hive.support.concurrency&amp;lt;/name&amp;gt;   
    &amp;lt;description&amp;gt;Enable Hive&amp;apos;s Table Lock Manager Service&amp;lt;/description&amp;gt;   
    &amp;lt;value&amp;gt;true&amp;lt;/value&amp;gt;  
&amp;lt;/property&amp;gt; 
&amp;lt;property&amp;gt;  
    &amp;lt;name&amp;gt;hive.zookeeper.quorum&amp;lt;/name&amp;gt;  
    &amp;lt;description&amp;gt;Zookeeper quorum used by Hive&amp;apos;s Table Lock Manager&amp;lt;/description&amp;gt;
    &amp;lt;value&amp;gt;server1,server2,server3&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt; 
&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;hive.zookeeper.client.port&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;2181&amp;lt;/value&amp;gt;
  &amp;lt;description&amp;gt;The port of zookeeper servers to talk to. This is only needed for read/write locks.&amp;lt;/description&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;property&amp;gt;  
    &amp;lt;name&amp;gt;hive.server2.thrift.bind.host&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;server1&amp;lt;/value&amp;gt;
    &amp;lt;description&amp;gt;Bind host on which to run the HiveServer2 Thrift interface. Can    be overridden by setting $HIVE_SERVER2_THRIFT_BIND_HOST&amp;lt;/description&amp;gt;  
&amp;lt;/property&amp;gt; 

//关闭推测式执行,一些优化项
&amp;lt;property&amp;gt;
 &amp;lt;name&amp;gt;hive.mapred.reduce.tasks.speculative.execution&amp;lt;/name&amp;gt;
 &amp;lt;value&amp;gt;false&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;property&amp;gt;
 &amp;lt;name&amp;gt;mapreduce.reduce.speculative&amp;lt;/name&amp;gt;
 &amp;lt;value&amp;gt;false&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
小表mapjoin
&amp;lt;property&amp;gt;
 &amp;lt;name&amp;gt;hive.ignore.mapjoin.hint&amp;lt;/name&amp;gt;
 &amp;lt;value&amp;gt;false&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;property&amp;gt;
 &amp;lt;name&amp;gt;hive.mapjoin.smalltable.filesize&amp;lt;/name&amp;gt;
 &amp;lt;value&amp;gt;500000000&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
并行执行
&amp;lt;property&amp;gt;
 &amp;lt;name&amp;gt;hive.exec.parallel&amp;lt;/name&amp;gt;
 &amp;lt;value&amp;gt;true&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;property&amp;gt;
 &amp;lt;name&amp;gt;hive.exec.parallel.thread.number&amp;lt;/name&amp;gt;
 &amp;lt;value&amp;gt;16&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
客户端显示
&amp;lt;property&amp;gt;
 &amp;lt;name&amp;gt;hive.cli.print.current.db&amp;lt;/name&amp;gt;
 &amp;lt;value&amp;gt;true&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;property&amp;gt;
 &amp;lt;name&amp;gt;hive.cli.print.header&amp;lt;/name&amp;gt;
 &amp;lt;value&amp;gt;true&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
关闭自动统计
&amp;lt;property&amp;gt;
 &amp;lt;name&amp;gt;hive.stats.autogather&amp;lt;/name&amp;gt;
 &amp;lt;value&amp;gt;false&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;复制mysql-connector&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@server1 ~]# wget https://dev.mysql.com/get/Downloads/Connector-J/mysql-connector-java-5.1.39.tar.gz
--2016-08-04 09:20:40--  https://dev.mysql.com/get/Downloads/Connector-J/mysql-connector-java-5.1.39.tar.gz
Resolving dev.mysql.com (dev.mysql.com)... 137.254.60.11
Connecting to dev.mysql.com (dev.mysql.com)|137.254.60.11|:443... connected.
HTTP request sent, awaiting response... 302 Found
Location: http://cdn.mysql.com//Downloads/Connector-J/mysql-connector-java-5.1.39.tar.gz [following]
--2016-08-04 09:20:45--  http://cdn.mysql.com//Downloads/Connector-J/mysql-connector-java-5.1.39.tar.gz
Resolving cdn.mysql.com (cdn.mysql.com)... 23.213.79.98
Connecting to cdn.mysql.com (cdn.mysql.com)|23.213.79.98|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 3899019 (3.7M) [application/x-tar-gz]
Saving to: &amp;apos;mysql-connector-java-5.1.39.tar.gz&amp;apos;

100%[===================================================&amp;gt;] 3,899,019   1.93MB/s   in 1.9s   

2016-08-04 09:20:47 (1.93 MB/s) - &amp;apos;mysql-connector-java-5.1.39.tar.gz&amp;apos; saved [3899019/3899019]

[root@server1 ~]# tar -zxvf mysql-connector-java-5.1.39.tar.gz 
[root@server1 ~]# cd mysql-connector-java-5.1.39
[root@server1 mysql-connector-java-5.1.39]# cp mysql-connector-java-5.1.39-bin.jar /usr/local/hive-1.2.1/lib/
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;文件夹权限问题，由于permition，可能会报错。所以做如下修改&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@server1 hive-1.2.1]# hdfs dfs -mkdir /user/hive/
[root@server1 hive-1.2.1]# hdfs dfs -mkdir /user/hive/warehouse
[root@server1 hive-1.2.1]# hdfs dfs -chmod g+w /user/hive/warehouse   
[root@server1 hive-1.2.1]# hdfs dfs -chmod 777 /tmp
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;如果启动报jline包错误，执行下面的语句&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@server1 hive-1.2.1]# export HADOOP_USER_CLASSPATH_FIRST=true
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;启动&quot;&gt;&lt;a href=&quot;#启动&quot; class=&quot;headerlink&quot; title=&quot;启动&quot;&gt;&lt;/a&gt;启动&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;启动metastore&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;# hive-1.2.1/bin/hive --service metastore &amp;amp;       [jobs查看]
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;启动hive&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;# hive-1.2.1/bin/hive
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;启动hiveserver2 [jdbc服务]&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;hive-1.2.1/bin/hive --service hiveserver2 --hiveconf hive.server2.thrift.port=14000 start &amp;amp;

[root@server1 bin]#  lsof -i :14000
COMMAND   PID USER   FD   TYPE     DEVICE SIZE/OFF NODE NAME
java    23747 root  316u  IPv4 3330453723      0t0  TCP server1:scotty-ft (LISTEN)
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;测试&quot;&gt;&lt;a href=&quot;#测试&quot; class=&quot;headerlink&quot; title=&quot;测试&quot;&gt;&lt;/a&gt;测试&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;测试 hiverserver2&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;[root@server1 bin]# beeline 
Beeline version 1.2.1 by Apache Hive
beeline&amp;gt; !connect jdbc:hive2://server1:14000 root admin org.apache.hive.jdbc.HiveDriver
Connecting to jdbc:hive2://server1:14000
Connected to: Apache Hive (version 1.2.1)
Driver: Hive JDBC (version 1.2.1)
Transaction isolation: TRANSACTION_REPEATABLE_READ
0: jdbc:hive2://server1:14000&amp;gt; create table test(id int);
No rows affected (0.184 seconds)
0: jdbc:hive2://server1:14000&amp;gt; insert into table test values (1),(2),(3);
INFO  : Number of reduce tasks is set to 0 since there&amp;apos;s no reduce operator
INFO  : number of splits:1
INFO  : Submitting tokens for job: job_1469961992051_0003
INFO  : The url to track the job: http://server1:23188/proxy/application_1469961992051_0003/
INFO  : Starting Job = job_1469961992051_0003, Tracking URL = http://server1:23188/proxy/application_1469961992051_0003/
INFO  : Kill Command = /usr/local/hadoop-2.7.2/bin/hadoop job  -kill job_1469961992051_0003
INFO  : Hadoop job information for Stage-1: number of mappers: 1; number of reducers: 0
INFO  : 2016-08-04 21:35:49,284 Stage-1 map = 0%,  reduce = 0%
INFO  : 2016-08-04 21:35:56,766 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 2.32 sec
INFO  : MapReduce Total cumulative CPU time: 2 seconds 320 msec
INFO  : Ended Job = job_1469961992051_0003
INFO  : Stage-3 is selected by condition resolver.
INFO  : Stage-2 is filtered out by condition resolver.
INFO  : Stage-4 is filtered out by condition resolver.
INFO  : Moving data to: hdfs://mycluster/user/hive/warehouse/test/.hive-staging_hive_2016-08-04_21-35-12_875_2422159926076678033-1/-ext-10000 from hdfs://mycluster/user/hive/warehouse/test/.hive-staging_hive_2016-08-04_21-35-12_875_2422159926076678033-1/-ext-10002
INFO  : Loading data to table default.test from hdfs://mycluster/user/hive/warehouse/test/.hive-staging_hive_2016-08-04_21-35-12_875_2422159926076678033-1/-ext-10000
No rows affected (48.918 seconds)
0: jdbc:hive2://server1:14000&amp;gt; 
0: jdbc:hive2://server1:14000&amp;gt; select * from test;
+----------+--+
| test.id  |
+----------+--+
| 1        |
| 2        |
| 3        |
+----------+--+
3 rows selected (0.178 seconds)
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;参考&quot;&gt;&lt;a href=&quot;#参考&quot; class=&quot;headerlink&quot; title=&quot;参考&quot;&gt;&lt;/a&gt;参考&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://www.91ri.org/13896.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://www.91ri.org/13896.html&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.itweet.cn/2015/07/10/hive0.13.1-install/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.itweet.cn/2015/07/10/hive0.13.1-install/&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://sharadchhetri.com/2014/07/31/how-to-install-mysql-server-5-6-on-centos-7-rhel-7/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://sharadchhetri.com/2014/07/31/how-to-install-mysql-server-5-6-on-centos-7-rhel-7/&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      SQL-on-Hadoop 之 Hive1.2.1的安装
    
    </summary>
    
      <category term="BigData" scheme="http://www.guinguo.top/categories/BigData/"/>
    
    
  </entry>
  
  <entry>
    <title>Hbase Shell Base Use</title>
    <link href="http://www.guinguo.top/2016/07/25/Hbase-Shell_Base-Use/"/>
    <id>http://www.guinguo.top/2016/07/25/Hbase-Shell_Base-Use/</id>
    <published>2016-07-25T09:20:40.000Z</published>
    <updated>2016-09-12T03:23:19.760Z</updated>
    
    <content type="html">&lt;p&gt;&lt;strong&gt;HBase shell支持Tab键自动补全&lt;/strong&gt;&lt;br&gt;基于hdfs，所以底层只有put，即增删改都是增加一行记录。&lt;/p&gt;
&lt;h1 id=&quot;常用命令&quot;&gt;&lt;a href=&quot;#常用命令&quot; class=&quot;headerlink&quot; title=&quot;常用命令&quot;&gt;&lt;/a&gt;常用命令&lt;/h1&gt;&lt;p&gt;status 查看集群数据库状态&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hbase(main):001:0&amp;gt; status
1 active master, 0 backup masters, 3 servers, 0 dead, 0.6667 average load
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;查看HBase 版本信息&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;version
hbase(main):002:0&amp;gt; version
1.2.2, r3f671c1ead70d249ea4598f1bbcc5151322b3a13, Fri Jul  1 08:28:55 CDT 2016
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;list 查看数据表&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hbase(main):003:0&amp;gt; list
TABLE                                                                                      
0 row(s) in 0.1270 seconds

=&amp;gt; []
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;create 创建数据表user，有user_id，info两列&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hbase(main):002:0&amp;gt; create &amp;apos;user&amp;apos;,&amp;apos;user_id&amp;apos;,&amp;apos;username&amp;apos;,&amp;apos;address&amp;apos;,&amp;apos;info&amp;apos;
0 row(s) in 4.8590 seconds

=&amp;gt; Hbase::Table - user
hbase(main):003:0&amp;gt; list
TABLE                                                                                      
user                                                                                       
1 row(s) in 0.0650 seconds

=&amp;gt; [&amp;quot;user&amp;quot;]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;describe 查看表信息，对每列的描述&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hbase(main):010:0&amp;gt; describe &amp;apos;user&amp;apos;
Table user is ENABLED                                                                      
user                                                                                       
COLUMN FAMILIES DESCRIPTION                                                                
{NAME =&amp;gt; &amp;apos;address&amp;apos;, DATA_BLOCK_ENCODING =&amp;gt; &amp;apos;NONE&amp;apos;, BLOOMFILTER =&amp;gt; &amp;apos;ROW&amp;apos;, REPLICATION_SCOPE 
=&amp;gt; &amp;apos;0&amp;apos;, VERSIONS =&amp;gt; &amp;apos;1&amp;apos;, COMPRESSION =&amp;gt; &amp;apos;NONE&amp;apos;, MIN_VERSIONS =&amp;gt; &amp;apos;0&amp;apos;, TTL =&amp;gt; &amp;apos;FOREVER&amp;apos;, KEEP
_DELETED_CELLS =&amp;gt; &amp;apos;FALSE&amp;apos;, BLOCKSIZE =&amp;gt; &amp;apos;65536&amp;apos;, IN_MEMORY =&amp;gt; &amp;apos;false&amp;apos;, BLOCKCACHE =&amp;gt; &amp;apos;true&amp;apos;
}                                                                                          
{NAME =&amp;gt; &amp;apos;info&amp;apos;, DATA_BLOCK_ENCODING =&amp;gt; &amp;apos;NONE&amp;apos;, BLOOMFILTER =&amp;gt; &amp;apos;ROW&amp;apos;, REPLICATION_SCOPE =&amp;gt; 
&amp;apos;0&amp;apos;, VERSIONS =&amp;gt; &amp;apos;1&amp;apos;, COMPRESSION =&amp;gt; &amp;apos;NONE&amp;apos;, MIN_VERSIONS =&amp;gt; &amp;apos;0&amp;apos;, TTL =&amp;gt; &amp;apos;FOREVER&amp;apos;, KEEP_DE
LETED_CELLS =&amp;gt; &amp;apos;FALSE&amp;apos;, BLOCKSIZE =&amp;gt; &amp;apos;65536&amp;apos;, IN_MEMORY =&amp;gt; &amp;apos;false&amp;apos;, BLOCKCACHE =&amp;gt; &amp;apos;true&amp;apos;}  
{NAME =&amp;gt; &amp;apos;user_id&amp;apos;, DATA_BLOCK_ENCODING =&amp;gt; &amp;apos;NONE&amp;apos;, BLOOMFILTER =&amp;gt; &amp;apos;ROW&amp;apos;, REPLICATION_SCOPE 
=&amp;gt; &amp;apos;0&amp;apos;, VERSIONS =&amp;gt; &amp;apos;1&amp;apos;, COMPRESSION =&amp;gt; &amp;apos;NONE&amp;apos;, MIN_VERSIONS =&amp;gt; &amp;apos;0&amp;apos;, TTL =&amp;gt; &amp;apos;FOREVER&amp;apos;, KEEP
_DELETED_CELLS =&amp;gt; &amp;apos;FALSE&amp;apos;, BLOCKSIZE =&amp;gt; &amp;apos;65536&amp;apos;, IN_MEMORY =&amp;gt; &amp;apos;false&amp;apos;, BLOCKCACHE =&amp;gt; &amp;apos;true&amp;apos;
}                                                                                          
{NAME =&amp;gt; &amp;apos;username&amp;apos;, DATA_BLOCK_ENCODING =&amp;gt; &amp;apos;NONE&amp;apos;, BLOOMFILTER =&amp;gt; &amp;apos;ROW&amp;apos;, REPLICATION_SCOPE
 =&amp;gt; &amp;apos;0&amp;apos;, VERSIONS =&amp;gt; &amp;apos;1&amp;apos;, COMPRESSION =&amp;gt; &amp;apos;NONE&amp;apos;, MIN_VERSIONS =&amp;gt; &amp;apos;0&amp;apos;, TTL =&amp;gt; &amp;apos;FOREVER&amp;apos;, KEE
P_DELETED_CELLS =&amp;gt; &amp;apos;FALSE&amp;apos;, BLOCKSIZE =&amp;gt; &amp;apos;65536&amp;apos;, IN_MEMORY =&amp;gt; &amp;apos;false&amp;apos;, BLOCKCACHE =&amp;gt; &amp;apos;true
&amp;apos;}                                                                                         
4 row(s) in 0.0520 seconds   
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;alter 修改表结构&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hbase(main):012:0&amp;gt; alter &amp;apos;user&amp;apos;,{NAME=&amp;gt;&amp;apos;username&amp;apos;,METHOD=&amp;gt;&amp;apos;delete&amp;apos;}
Updating all regions with the new schema...
0/1 regions updated.
0/1 regions updated.
1/1 regions updated.
Done.
0 row(s) in 4.5440 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;drop 删除表(先disable 再 drop)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hbase(main):006:0&amp;gt; drop &amp;apos;temp_table&amp;apos;

ERROR: Table temp_table is enabled. Disable it first.

Here is some help for this command:
Drop the named table. Table must first be disabled:
  hbase&amp;gt; drop &amp;apos;t1&amp;apos;
  hbase&amp;gt; drop &amp;apos;ns1:t1&amp;apos;

hbase(main):007:0&amp;gt; disable &amp;apos;temp_table&amp;apos;
0 row(s) in 19.6310 seconds

hbase(main):008:0&amp;gt; drop &amp;apos;temp_table&amp;apos;
0 row(s) in 1.4960 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;is_(dis)enabled 判断表状态&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hbase(main):010:0&amp;gt; is_enabled &amp;apos;user&amp;apos;
true                                                                                       
0 row(s) in 0.0260 seconds

hbase(main):011:0&amp;gt; is_disabled &amp;apos;user&amp;apos;
false                                                                                      
0 row(s) in 0.0170 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;put hbase不用add，使用put添加数据&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hbase(main):013:0&amp;gt; put &amp;apos;user&amp;apos;,&amp;apos;1&amp;apos;,&amp;apos;info:age&amp;apos;,&amp;apos;22&amp;apos;
0 row(s) in 0.2990 seconds

hbase(main):014:0&amp;gt; put &amp;apos;user&amp;apos;,&amp;apos;1&amp;apos;,&amp;apos;info:birthday&amp;apos;,&amp;apos;1995-01-01&amp;apos;
0 row(s) in 0.1280 seconds

hbase(main):015:0&amp;gt; put &amp;apos;user&amp;apos;,&amp;apos;1&amp;apos;,&amp;apos;info:school&amp;apos;,&amp;apos;scau&amp;apos;
0 row(s) in 0.0280 seconds

hbase(main):016:0&amp;gt; put &amp;apos;user&amp;apos;,&amp;apos;1&amp;apos;,&amp;apos;info:contry&amp;apos;,&amp;apos;china&amp;apos;
0 row(s) in 0.0080 seconds

hbase(main):017:0&amp;gt; put &amp;apos;user&amp;apos;,&amp;apos;1&amp;apos;,&amp;apos;info:name&amp;apos;,&amp;apos;guinguo&amp;apos;
0 row(s) in 0.2350 seconds

hbase(main):018:0&amp;gt; put &amp;apos;user&amp;apos;,&amp;apos;1&amp;apos;,&amp;apos;address:province&amp;apos;,&amp;apos;guangdong&amp;apos;
0 row(s) in 0.0600 seconds

hbase(main):019:0&amp;gt; put &amp;apos;user&amp;apos;,&amp;apos;2&amp;apos;,&amp;apos;info:birthday&amp;apos;,&amp;apos;1990-11-01&amp;apos;
0 row(s) in 0.0170 seconds

hbase(main):025:0&amp;gt; put &amp;apos;user&amp;apos;,&amp;apos;2&amp;apos;,&amp;apos;info:hight&amp;apos;,&amp;apos;173+&amp;apos;
0 row(s) in 0.1230 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;get 查询数据，不使用select，根据行健获取&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hbase(main):027:0&amp;gt; get &amp;apos;user&amp;apos;,&amp;apos;1&amp;apos;
COLUMN                   CELL                                                                
 address:province        timestamp=1469463433805, value=guangdong                            
 info:age                timestamp=1469463216059, value=22                                   
 info:birthday           timestamp=1469463335389, value=1995-01-01                           
 info:contry             timestamp=1469463377085, value=china                                
 info:name               timestamp=1469463403556, value=guinguo                              
 info:school             timestamp=1469463361228, value=scau                                 
6 row(s) in 0.0340 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;get 根据行健+列名获取&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hbase(main):013:0&amp;gt; get &amp;apos;user&amp;apos;,&amp;apos;1&amp;apos;,&amp;apos;info&amp;apos;
COLUMN                  CELL                                                               
 info:age               timestamp=1469690058926, value=22                                  
 info:birthday          timestamp=1469690067239, value=1995-01-01                          
 info:contry            timestamp=1469690081381, value=china                               
 info:name              timestamp=1469690089676, value=guinguo                             
 info:school            timestamp=1469690076309, value=scau

hbase(main):014:0&amp;gt; get &amp;apos;user&amp;apos;,&amp;apos;1&amp;apos;,&amp;apos;address&amp;apos;
COLUMN                  CELL                                                               
 address:province       timestamp=1469690096718, value=guangdong                           
1 row(s) in 0.0070 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;get 根据行健+列名+key获取value&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hbase(main):015:0&amp;gt; get &amp;apos;user&amp;apos;,&amp;apos;1&amp;apos;,&amp;apos;info:age&amp;apos;
COLUMN                  CELL                                                               
 info:age               timestamp=1469690058926, value=22                                  
1 row(s) in 0.0210 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;hbase使用时间戳存数据，get的是最近的数据，可以通过时间戳获取&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hbase(main):016:0&amp;gt; put &amp;apos;user&amp;apos;,&amp;apos;1&amp;apos;,&amp;apos;info:age&amp;apos;,&amp;apos;20&amp;apos;
0 row(s) in 0.1520 seconds

hbase(main):003:0&amp;gt; get &amp;apos;user&amp;apos;,&amp;apos;1&amp;apos;,&amp;apos;info:age&amp;apos;
COLUMN                  CELL                                                               
 info:age               timestamp=1469690524575, value=20                                  
1 row(s) in 0.0410 seconds

hbase(main):004:0&amp;gt; get &amp;apos;user&amp;apos;,&amp;apos;1&amp;apos;,{COLUMN=&amp;gt;&amp;apos;info:age&amp;apos;,TIMESTAMP=&amp;gt;1469690058926}
COLUMN                  CELL                                                               
 info:age               timestamp=1469690058926, value=22                                  
1 row(s) in 0.0060 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;scan 全表扫描&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hbase(main):006:0&amp;gt; scan &amp;apos;user&amp;apos;
ROW                     COLUMN+CELL                                                        
 1                      column=address:province, timestamp=1469690096718, value=guangdong  
 1                      column=info:age, timestamp=1469690524575, value=20                 
 1                      column=info:birthday, timestamp=1469690067239, value=1995-01-01    
 1                      column=info:contry, timestamp=1469690081381, value=china           
 1                      column=info:name, timestamp=1469690089676, value=guinguo           
 1                      column=info:school, timestamp=1469690076309, value=scau            
 2                      column=info:birthday, timestamp=1469690105292, value=1990-11-01    
 2                      column=info:hight, timestamp=1469690138930, value=173+             
2 row(s) in 0.0630 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;delete 删除，格式是通过 table row column 然后通过key定位&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hbase(main):007:0&amp;gt; put &amp;apos;user&amp;apos;,&amp;apos;3&amp;apos;,&amp;apos;address:contry&amp;apos;,&amp;apos;USA&amp;apos;
0 row(s) in 0.2130 seconds

hbase(main):009:0&amp;gt; get &amp;apos;user&amp;apos;,&amp;apos;3&amp;apos;
COLUMN                  CELL                                                               
 address:contry         timestamp=1469691253773, value=USA                                 
1 row(s) in 0.0090 seconds

hbase(main):011:0&amp;gt; delete &amp;apos;user&amp;apos;,&amp;apos;3&amp;apos;,&amp;apos;address:contry&amp;apos;
0 row(s) in 0.0950 seconds

hbase(main):012:0&amp;gt; get &amp;apos;user&amp;apos;,&amp;apos;3&amp;apos;
COLUMN                  CELL                                                               
0 row(s) in 0.0480 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;deleteall 删除整个行健&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hbase(main):017:0&amp;gt; deleteall &amp;apos;user&amp;apos;,&amp;apos;2&amp;apos;
0 row(s) in 0.1820 seconds

hbase(main):018:0&amp;gt; scan &amp;apos;user&amp;apos;
ROW                     COLUMN+CELL                                                        
 1                      column=address:province, timestamp=1469690096718, value=guangdong  
 1                      column=info:age, timestamp=1469690524575, value=20                 
 1                      column=info:birthday, timestamp=1469690067239, value=1995-01-01    
 1                      column=info:contry, timestamp=1469690081381, value=china           
 1                      column=info:name, timestamp=1469690089676, value=guinguo           
 1                      column=info:school, timestamp=1469690076309, value=scau            
 3                      column=address:contr, timestamp=1469691478971, value=USA           
2 row(s) in 0.0630 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;count 统计多少个行健，注意是行健，不是行&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hbase(main):028:0&amp;gt; scan &amp;apos;user&amp;apos;
ROW                     COLUMN+CELL                                                        
 1                      column=address:province, timestamp=1469690096718, value=guangdong  
 1                      column=info:age, timestamp=1469690524575, value=20                 
 1                      column=info:birthday, timestamp=1469690067239, value=1995-01-01    
 1                      column=info:contry, timestamp=1469690081381, value=china           
 1                      column=info:name, timestamp=1469690089676, value=guinguo           
 1                      column=info:school, timestamp=1469690076309, value=scau            
1 row(s) in 0.0240 seconds

hbase(main):029:0&amp;gt; count &amp;apos;user&amp;apos;
1 row(s) in 0.0170 seconds

=&amp;gt; 1
hbase(main):030:0&amp;gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;truncate 清空表&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hbase(main):030:0&amp;gt; truncate &amp;apos;user&amp;apos;
Truncating &amp;apos;user&amp;apos; table (it may take a while):
 - Disabling table...
 - Truncating table...
0 row(s) in 30.3090 seconds

=&amp;gt; [&amp;quot;user&amp;quot;]
hbase(main):032:0&amp;gt; scan &amp;apos;user&amp;apos;
ROW                     COLUMN+CELL                                                        
0 row(s) in 0.4280 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&quot;日常维护命令&quot;&gt;&lt;a href=&quot;#日常维护命令&quot; class=&quot;headerlink&quot; title=&quot;日常维护命令&quot;&gt;&lt;/a&gt;日常维护命令&lt;/h1&gt;&lt;p&gt;flush table,将所有memstore刷新到hdfs，这个操作会造成hbase的storefile数量剧增，应尽量避免这个操作&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hbase(main):001:0&amp;gt; flush &amp;apos;user&amp;apos;
0 row(s) in 1.6950 seconds

hbase(main):002:0&amp;gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&quot;重启一个regionserver&quot;&gt;&lt;a href=&quot;#重启一个regionserver&quot; class=&quot;headerlink&quot; title=&quot;重启一个regionserver&quot;&gt;&lt;/a&gt;重启一个regionserver&lt;/h1&gt;&lt;p&gt;bin/graceful_stop.sh –restart –reload –debug nodename&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;这个操作是平滑的重启regionserver进程，对服务不会有影响，他会先将需要重启的regionserver上面的所有region迁移到其它的服务器，然后重启，最后又会将之前的region迁移回来，但我们修改一个配置时，可以用这种方式重启每一台机子，这个命令会关闭balancer，所以最后我们要在hbase shell里面执行一下balance_switch true，对于hbase regionserver重启，不要直接kill进程，这样会造成在zookeeper.session.timeout这个时间长的中断，也不要通过bin/hbase-daemon.sh stop regionserver去重启，如果运气不太好，-ROOT-或者.META.表在上面的话，所有的请求会全部失败。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;&lt;code&gt;graceful_stop.sh --restart --debug server3

hbase(main):001:0&amp;gt; balance_switch true
true                                                                                       
0 row(s) in 0.2650 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&quot;关闭下线一台regionserver&quot;&gt;&lt;a href=&quot;#关闭下线一台regionserver&quot; class=&quot;headerlink&quot; title=&quot;关闭下线一台regionserver&quot;&gt;&lt;/a&gt;关闭下线一台regionserver&lt;/h1&gt;&lt;p&gt;bin/graceful_stop.sh –stop  nodename&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;和上面一样，系统会在关闭之前迁移所有region，然后stop进程，同样最后我们要手工balance_switch true，开启master的region均衡。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;检查region是否正常以及修复&quot;&gt;&lt;a href=&quot;#检查region是否正常以及修复&quot; class=&quot;headerlink&quot; title=&quot;检查region是否正常以及修复&quot;&gt;&lt;/a&gt;检查region是否正常以及修复&lt;/h1&gt;&lt;p&gt;bin/hbase hbck  (检查)&lt;br&gt;bin/hbase hbck -fix  （修复）&lt;/p&gt;
&lt;p&gt;参考 &lt;a href=&quot;http://www.w2bc.com/article/123398&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.w2bc.com/article/123398&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      HBase shell的基本操作
    
    </summary>
    
      <category term="BigData" scheme="http://www.guinguo.top/categories/BigData/"/>
    
    
      <category term="HBase" scheme="http://www.guinguo.top/tags/HBase/"/>
    
  </entry>
  
  <entry>
    <title>Hadoop Cluster Set Up P4 HBase</title>
    <link href="http://www.guinguo.top/2016/07/23/Hadoop-Cluster-Set-Up-P4-HBase/"/>
    <id>http://www.guinguo.top/2016/07/23/Hadoop-Cluster-Set-Up-P4-HBase/</id>
    <published>2016-07-23T15:50:32.000Z</published>
    <updated>2016-09-12T03:23:43.590Z</updated>
    
    <content type="html">&lt;p&gt;　　HBase是一个开源的非关系型分布式数据库（NoSQL），它参考了谷歌的BigTable建模，实现的编程语言为 Java。它是Apache软件基金会的Hadoop项目的一部分，运行于HDFS文件系统之上，为 Hadoop 提供类似于BigTable 规模的服务。因此，它可以容错地存储海量稀疏的数据。&lt;/p&gt;
&lt;p&gt;　　HBase在列上实现了BigTable论文提到的压缩算法、内存操作和布隆过滤器。HBase的表能够作为MapReduce任务的输入和输出，可以通过Java API来访问数据，也可以通过REST、Avro或者Thrift的API来访问。&lt;/p&gt;
&lt;h2 id=&quot;下载并解压&quot;&gt;&lt;a href=&quot;#下载并解压&quot; class=&quot;headerlink&quot; title=&quot;下载并解压&quot;&gt;&lt;/a&gt;下载并解压&lt;/h2&gt;&lt;p&gt;　　先选择合适的版本，由于我之前装的是jdk1.7，Hadoop2.7.2，所以这里我选择HBase1.2.2的版本，都支持&lt;/p&gt;
&lt;p&gt;看版本支持 &lt;a href=&quot;http://hbase.apache.org/book.html#basic.prerequisites&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;prerequisite&lt;/a&gt;&lt;br&gt;　　　HBaseVersion　　JDK 6　　JDK 7　　JDK 8&lt;br&gt;　　　　- 1.3　　　　　　NS　　　yes　　　yes&lt;br&gt;　　　　- 1.2　　　　　　NS　　　yes　　　yes&lt;br&gt;　　　　- 1.1　　　　　　NS　　　yes　　　not well&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;NS-Not Supported&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;　　　　　　　　　HBase-1.0.x　　　HBase-1.1.x　　　HBase-1.2.x　　　HBase-1.3.x&lt;br&gt;Hadoop-2.6.0　　　　　X　　　　　　　　X　　　　　　　　X　　　　　　　　X&lt;br&gt;Hadoop-2.6.1+　　　　NT　　　　　　　　NT　　　　　　　S　　　　　　　　S&lt;br&gt;Hadoop-2.7.0　　　　　X　　　　　　　　X　　　　　　　　X　　　　　　　　X&lt;br&gt;Hadoop-2.7.1+　　　　NT　　　　　　　　NT　　　　　　　S　　　　　　　　S&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;“S” = supported&lt;/li&gt;
&lt;li&gt;“X” = not supported&lt;/li&gt;
&lt;li&gt;“NT” = Not tested&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;[root@server1 ~]# wget http://archive.apache.org/dist/hbase/1.2.2/hbase-1.2.2-bin.tar.gz
[root@server1 ~]# tar -zxvf hbase-1.2.2-bin.tar.gz -C /usr/local/
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;h2 id=&quot;配置&quot;&gt;&lt;a href=&quot;#配置&quot; class=&quot;headerlink&quot; title=&quot;配置&quot;&gt;&lt;/a&gt;配置&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;环境变量&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;root@server1 ~]# vi /etc/profile
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p&gt;在结尾追加&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;export HBASE_HOME=/usr/local/hbase-1.2.2
export PATH=$PATH:$HBASE_HOME/bin
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p&gt;使环境变量生效&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;[root@server1 ~]# source /etc/profile
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p&gt;查看HBase版本&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;[root@server1 ~]# hbase version
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;pre&gt;&lt;code&gt;HBase 1.2.2
Source code repository git://asf-dev/home/busbey/projects/hbase revision=3f671c1ead70d249ea4598f1bbcc5151322b3a13
Compiled by busbey on Fri Jul  1 08:28:55 CDT 2016
From source with checksum 7ac43c3d2f62f134b2a6aa1a05ad66ac
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;修改HBase配置文件 hbase-env.sh&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;[root@server1 ~]# cd /usr/local/hbase-1.2.2/conf/
[root@server1 conf]# ls
hadoop-metrics2-hbase.properties  hbase-env.cmd  hbase-env.sh  hbase-policy.xml  hbase-site.xml  log4j.properties  regionservers
[root@server1 conf]# vi hbase-env.sh 
export JAVA_HOME=/usr/local/java/jdk1.7.0_79
export HBASE_MANAGES_ZK=false  #不使用HBase自带的Zookeeper    
export HBASE_CLASSPATH=/usr/local/hadoop-1.2.2/conf
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;修改hbase-site.xml&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;  [root@server1 conf]# vi hbase-site.xml &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--hbase存储在HADOOP HDFS上文件根目录路径--&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;hbase.rootdir&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;hdfs://server1:9000/hbase&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--采用分布式模式--&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;hbase.cluster.distributed&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;true&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--zookeeper地址，端口不指定的话就默认为2181--&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;hbase.zookeeper.quorum&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;server1,server2,server3&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--hbase临时文件存储目录，比如一些数据表的预分区信息等等--&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;hbase.tmp.dir&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;/home/root/hbase&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;hbase.master&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;hdfs://server1:60000&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--zookeeper存储数据位置--&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;hbase.zookeeper.property.dataDir&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;/usr/local/zookeeper-3.4.6/data&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--这里设置hbase API客户端侧缓存值，大于此值就进行一次提交，/opt/hbase-1.2.1/conf/hbase-site.xml统一配置为5M，对所有HTable都生效，那么客户端API就可不设置--&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--htable.setWriteBufferSize(5242880);//5M --&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;hbase.client.write.buffer&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;5242880&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--这里设置Master并发最大线程数--&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;hbase.regionserver.handler.count&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;300&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;description&lt;/span&gt;&amp;gt;&lt;/span&gt;Count of RPC Listener instances spun up on  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            RegionServers.Same property is used by the Master for count of master  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            handlers.&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;description&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--hbase 数据表基本检查，放置数据表存储文件被compact两次--&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;hbase.table.sanity.checks&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;false&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--ZooKeeper 会话超时.HBase把这个值传递改zk集群，向他推荐一个会话的最大超时时间--&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--every 40s,the master will check regionser is working --&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;zookeeper.session.timeout&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;40000&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--数据表创建时会预分区，每个预分区最大大小这里设置为30G，放置频繁的split阻塞数据读写，只有当预分区超过30G时才会进行split，正式环境应该首先预测数据存储时间内的大致数据量，然后如果每个预分区为30G，计算出分区数，建表时指定分区设置，放置后期频繁split--&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--every region max file size set to 30G --&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;hbase.hregion.max.filesize&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;32212254720&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--默认hbase每24小时会进行一次major_compact，major_compact会阻塞读写，这里先禁用，但不代表这个操作不做，可以后期指定linux shell加入到cron定时任务在hbase集群空闲情况下执行--&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;hbase.hregion.majorcompaction&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;0&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--hbase本质上可以说是HADOOP HDFS的客户端，虽然Hadoop的core-site.xml里设置了文件副本数，但是仍然是客户端传值优先，这里设置为2，意思是一个文件，最终在Hadoop上总个数为2，正式环境最好设置为3，目前发现此值小于3时，在遇到All datanodes xxx.xxx.xxx.&lt;span class=&quot;doctag&quot;&gt;xxx:&lt;/span&gt;port are bad. Aborting...错误信息时，如果某个DataNode宕机，原则上hbase调用的DFSClient会去其他Datanode  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;上重试写，但发现配置的值低于3就不会去尝试--&amp;gt;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;dfs.replication&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;3&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            IncreasingToUpperBoundRegionSplitPolicy策略的意思是，数据表如果预分区为2，配置的memstore flush size=128M，那么下一次分裂大小是2的平方然后乘以128MB，即2*2*128M=512MB;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ConstantSizeRegionSplitPolicy策略的意思是按照上面指定的region大小超过30G才做分裂  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;hbase.regionserver.region.split.policy&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;org.apache.hadoop.hbase.regionserver.ConstantSizeRegionSplitPolicy&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--一个edit版本在内存中的cache时长，默认3600000毫秒--&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;hbase.regionserver.optionalcacheflushinterval&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;7200000&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;description&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Maximum amount of time an edit lives in memory before being automatically  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            flushed.  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Default 1 hour. Set it to 0 to disable automatic flushing.&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;description&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--分配给HFile/StoreFile的block cache占最大堆(-Xmx setting)的比例。默认0.4意思是分配40%，设置为0就是禁用，但不推荐。--&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;hfile.block.cache.size&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;0.3&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;description&lt;/span&gt;&amp;gt;&lt;/span&gt;Percentage of maximum heap (-Xmx setting) to allocate to  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            block cache  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            used by HFile/StoreFile. Default of 0.4 means allocate 40%.  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            Set to 0 to disable but it&#39;s not recommended; you need at least  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            enough cache to hold the storefile indices.&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;description&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--当memstore的大小超过这个值的时候，会flush到磁盘。这个值被一个线程每隔hbase.server.thread.wakefrequency检查一下。--&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;hbase.hregion.memstore.flush.size&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;52428800&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--单个region server的全部memtores的最大值。超过这个值，一个新的update操作会被挂起，强制执行flush操作。以前版本中是通过hbase.regionserver.global.memstore.upperLimit设置，老版本中含义是在hbase-env.sh中配置的HEAP_SIZE比如4G，那么以该值4G乘以配置的0.5就是2G，意思是所有memstore总和达到2G值时，阻塞所有读写，现在1.2.1版本hbase中被hbase.regionserver.global.memstore.size替代，计算方法仍然是HEAP_SIZE乘以配置的百分比比如下面的0.5，那么阻塞读写的阀值就为2G--&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;hbase.regionserver.global.memstore.size&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;0.5&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--当强制执行flush操作的时候，当低于这个值的时候，flush会停止。默认是堆大小的 35% . 如果这个值和 hbase.regionserver.global.memstore.upperLimit 相同就意味着当update操作因为内存限制被挂起时，会尽量少的执行flush(译者注:一旦执行flush，值就会比下限要低，不再执行)。  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;在老版本中该值是通过hbase.regionserver.global.memstore.size.lower.limit设置，计算方法是HEAP_SIZE乘以配置的百分比比如0.3就是HEAP_SIZE4G乘以0.3=1.2G，达到这个值的话就在所有memstore中选择最大的那个做flush动作，新版本则完全不同了，首先是通过hbase.regionserver.global.memstore.lowerLimit设置，而且不是以HEAP_SIZE作为参考，二是以配置的hbase.regionserver.global.memstore.size的值再乘以配置的比例比如0.5，如果HEAP_SIZE=4G，hbase.regionserver.global.memstore.size配置为0.5，hbase.regionserver.global.memstore.size.lower.limit配置的为0.5，则计算出来的值为4G乘以0.5再乘以0.5就是1G了，达到1G就先找最大的memstore触发flush--&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;hbase.regionserver.global.memstore.size.lower.limit&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;0.5&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--这里设置HDFS客户端最大超时时间，尽量改大，后期hbase经常会因为该问题频繁宕机--&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;dfs.client.socket-timeout&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;name&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;value&lt;/span&gt;&amp;gt;&lt;/span&gt;600000/value&amp;gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;configuration&lt;/span&gt;&amp;gt;&lt;/span&gt;  &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;关于Hbase的HA配置：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;property&amp;gt;  
    &amp;lt;name&amp;gt;hbase.master&amp;lt;/name&amp;gt;            
    &amp;lt;value&amp;gt;60000&amp;lt;/value&amp;gt;  
&amp;lt;/property&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;然后在server1上&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;start-hbase.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p&gt;server2作为第二master&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;hbase-deamon.sh start master     
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;编辑RegionServer信息&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;[root@server1 conf]# vi regionservers 
server2
server3
server4
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;分发节点&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;复制到其他节点去&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@server1 conf]# scp -rq /usr/local/hbase-1.2.2/ root@server2:/usr/local/
[root@server1 conf]# scp -rq /usr/local/hbase-1.2.2/ root@server3:/usr/local/
[root@server1 conf]# scp -rq /usr/local/hbase-1.2.2/ root@server4:/usr/local/
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;启动HBase&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@server1 conf]# start-hbase.sh
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;web ui地址&lt;br&gt;&lt;a href=&quot;http://server1:16010/master-status&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://server1:16010/master-status&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;运行测试&quot;&gt;&lt;a href=&quot;#运行测试&quot; class=&quot;headerlink&quot; title=&quot;运行测试&quot;&gt;&lt;/a&gt;运行测试&lt;/h2&gt;&lt;p&gt;查看进程&lt;br&gt;&lt;strong&gt;server1&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@server1 conf]# jps
10596 HMaster
3794 NameNode
2457 JobHistoryServer
2071 DFSZKFailoverController
12192 Jps
1771 QuorumPeerMain
2169 ResourceManager
10736 HRegionServer
1076 JournalNode
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;HBase shell&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@server1 conf]# hbase shell
SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/usr/local/hbase-1.2.2/lib/slf4j-log4j12-1.7.5.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/usr/local/hadoop-2.7.2/share/hadoop/common/lib/slf4j-log4j12-1.7.10.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.
SLF4J: Actual binding is of type [org.slf4j.impl.Log4jLoggerFactory]
HBase Shell; enter &amp;apos;help&amp;lt;RETURN&amp;gt;&amp;apos; for list of supported commands.
Type &amp;quot;exit&amp;lt;RETURN&amp;gt;&amp;quot; to leave the HBase Shell
Version 1.2.2, r3f671c1ead70d249ea4598f1bbcc5151322b3a13, Fri Jul  1 08:28:55 CDT 2016

hbase(main):001:0&amp;gt; list
TABLE                                                                                                                                                                                          
0 row(s) in 0.3950 seconds

=&amp;gt; []
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;server2&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@server2 data]# jps
2749 ResourceManager
3508 NameNode
16741 Jps
1613 QuorumPeerMain
1007 JournalNode
1825 DFSZKFailoverController
15578 HMaster
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;server3&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@server3 ~]# jps
1017 JournalNode
1641 NodeManager
3969 HRegionServer
4626 Jps
1538 DataNode
1454 QuorumPeerMain
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;server4&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@server4 ~]# jps
3300 HRegionServer
3951 Jps
676 DataNode
793 NodeManager
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;报错&quot;&gt;&lt;a href=&quot;#报错&quot; class=&quot;headerlink&quot; title=&quot;报错&quot;&gt;&lt;/a&gt;报错&lt;/h2&gt;&lt;p&gt;启动后，hregionserver 日志打印出如下，然后过一两个钟，regionserver全部挂掉，这个问题困扰了我挺久的。&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;figcaption&gt;&lt;span&gt;log&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2016&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;07&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;27&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;21&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;29&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;55&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;122&lt;/span&gt; WARN [ResponseProcessor &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; block BP-&lt;span class=&quot;number&quot;&gt;1601089490&lt;/span&gt;-xx.xx.xx.xx-&lt;span class=&quot;number&quot;&gt;1469276064635&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;blk_1073742337_1586] hdfs.DFSClient: DFSOutputStream ResponseProcessor exception &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; block BP-&lt;span class=&quot;number&quot;&gt;1601089490&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-xx.xx.xx.xx-&lt;span class=&quot;number&quot;&gt;1469276064635&lt;/span&gt;:blk_1073742337_1586 java.io.EOFException: Premature EOF: no length prefix available &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;at org.apache.hadoop.hdfs.protocolPB.PBHelper.vintPrefixed(PBHelper.java:&lt;span class=&quot;number&quot;&gt;2000&lt;/span&gt;) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;at org.apache.hadoop.hdfs.protocol.datatransfer.PipelineAck.readFields(PipelineAck.java:&lt;span class=&quot;number&quot;&gt;176&lt;/span&gt;) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;at org.apache.hadoop.hdfs.DFSOutputStream$DataStreamer$ResponseProcessor.run(DFSOutputStream.java:&lt;span class=&quot;number&quot;&gt;798&lt;/span&gt;) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2016&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;07&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;27&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;21&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;29&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;55&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;223&lt;/span&gt; WARN [DataStreamer &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; file /hbase/WALs/server2,&lt;span class=&quot;number&quot;&gt;16020&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;1469669327730&lt;/span&gt;/server2%&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;C16020%&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;C1469669327730.&lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt;.1469669334510 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;block BP-&lt;span class=&quot;number&quot;&gt;1601089490&lt;/span&gt;-xx.xx.xx.xx-&lt;span class=&quot;number&quot;&gt;1469276064635&lt;/span&gt;:blk_1073742337_1586] hdfs.DFSClient: Error Recovery &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; block BP-&lt;span class=&quot;number&quot;&gt;1601089490&lt;/span&gt;-xx.xx.xx.xx-&lt;span class=&quot;number&quot;&gt;1469276064635&lt;/span&gt;:blk_1073742337_1586 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;in pipeline xx.xx.xx.200:&lt;span class=&quot;number&quot;&gt;50010&lt;/span&gt;, xx.xx.xx.20:&lt;span class=&quot;number&quot;&gt;50010&lt;/span&gt;: bad datanode xx.xx.xx.200:&lt;span class=&quot;number&quot;&gt;50010&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2016&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;07&lt;/span&gt;-&lt;span class=&quot;number&quot;&gt;27&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;21&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;29&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;55&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;247&lt;/span&gt; WARN [DataStreamer &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; file /hbase/WALs/server2,&lt;span class=&quot;number&quot;&gt;16020&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;1469669327730&lt;/span&gt;/server2%&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;C16020%&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;C1469669327730.&lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt;.1469669334510 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;block BP-&lt;span class=&quot;number&quot;&gt;1601089490&lt;/span&gt;-xx.xx.xx.xx-&lt;span class=&quot;number&quot;&gt;1469276064635&lt;/span&gt;:blk_1073742337_1586] &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hdfs.DFSClient: DataStreamer Exception java.io.IOException: Failed to replace a bad datanode on the existing pipeline &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;due to no more good datanodes being available to &lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt;. (Nodes: current=[xx.xx.xx.20:&lt;span class=&quot;number&quot;&gt;50010&lt;/span&gt;], original=[xx.xx.xx.20:&lt;span class=&quot;number&quot;&gt;50010&lt;/span&gt;]). &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;The current failed datanode replacement policy is DEFAULT, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;and a client may configure &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt; via &lt;span class=&quot;string&quot;&gt;&#39;dfs.client.block.write.replace-datanode-on-failure.policy&#39;&lt;/span&gt; in its configuration. &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;at org.apache.hadoop.hdfs.DFSOutputStream$DataStreamer.findNewDatanode(DFSOutputStream.java:&lt;span class=&quot;number&quot;&gt;969&lt;/span&gt;) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;at org.apache.hadoop.hdfs.DFSOutputStream$DataStreamer.addDatanode2ExistingPipeline(DFSOutputStream.java:&lt;span class=&quot;number&quot;&gt;1035&lt;/span&gt;) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;at org.apache.hadoop.hdfs.DFSOutputStream$DataStreamer.setupPipelineForAppendOrRecovery(DFSOutputStream.java:&lt;span class=&quot;number&quot;&gt;1184&lt;/span&gt;) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;at org.apache.hadoop.hdfs.DFSOutputStream$DataStreamer.processDatanodeError(DFSOutputStream.java:&lt;span class=&quot;number&quot;&gt;933&lt;/span&gt;) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;at org.apache.hadoop.hdfs.DFSOutputStream$DataStreamer.run(DFSOutputStream.java:&lt;span class=&quot;number&quot;&gt;487&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;上网查了好久资料还是不能解决，最后发现可能是timeout的配置&lt;br&gt;在hbase-site.xml&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;property&amp;gt;  
      &amp;lt;name&amp;gt;dfs.client.socket-timeout&amp;lt;/name&amp;gt;  
      &amp;lt;value&amp;gt;600000&amp;lt;/value&amp;gt;  
&amp;lt;/property&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;但是在hdfs-site.xml 我没有设置，然后hdfs可能使用了默认值，所以在同步操作是可能就出现异常了&lt;br&gt;&lt;strong&gt;解决&lt;/strong&gt;在hdfs-site.xml添加同样配置&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;property&amp;gt;  
  &amp;lt;name&amp;gt;dfs.client.socket-timeout&amp;lt;/name&amp;gt;  
  &amp;lt;value&amp;gt;600000&amp;lt;/value&amp;gt;  
&amp;lt;/property&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这里介绍了超时原因–&amp;gt; &lt;a href=&quot;http://blog.csdn.net/zhaokunwu/article/details/7336892&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://blog.csdn.net/zhaokunwu/article/details/7336892&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      SQL-on-Hadoop 之 Hbase1.2.2的安装
    
    </summary>
    
      <category term="BigData" scheme="http://www.guinguo.top/categories/BigData/"/>
    
    
      <category term="Hbase" scheme="http://www.guinguo.top/tags/Hbase/"/>
    
  </entry>
  
  <entry>
    <title>Hadoop Cluster Set Up P3_Hadoop</title>
    <link href="http://www.guinguo.top/2016/07/23/Hadoop-Cluster-Set-Up-P3-Hadoop/"/>
    <id>http://www.guinguo.top/2016/07/23/Hadoop-Cluster-Set-Up-P3-Hadoop/</id>
    <published>2016-07-23T07:27:44.000Z</published>
    <updated>2016-09-12T03:23:10.374Z</updated>
    
    <content type="html">&lt;h1 id=&quot;获取安装包&quot;&gt;&lt;a href=&quot;#获取安装包&quot; class=&quot;headerlink&quot; title=&quot;获取安装包&quot;&gt;&lt;/a&gt;获取安装包&lt;/h1&gt;&lt;p&gt;　　你可以拿到源码包然后重新编译一次，我直接下载解压版&lt;br&gt;使用&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;wget http://archive.apache.org/dist/hadoop/core/current/hadoop-2.7.2.tar.gz
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;解压到 /usr/local下&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tar -zxvf hadoop-2.7.2.tar.gz -C /usr/local/
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&quot;修改配置文件&quot;&gt;&lt;a href=&quot;#修改配置文件&quot; class=&quot;headerlink&quot; title=&quot;修改配置文件&quot;&gt;&lt;/a&gt;修改配置文件&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;1、 core-site.xml&lt;br&gt;参考配置 &lt;a href=&quot;https://hadoop.apache.org/docs/r2.4.1/hadoop-project-dist/hadoop-common/core-default.xml&quot; title=&quot;core-default.xml&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;core-default.xml&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;configuration&amp;gt;
&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;fs.defaultFS&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;hdfs://mycluster&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;hadoop.tmp.dir&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;/home/root/hadoop/tmp&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;ha.zookeeper.quorum&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;server1:2181,server2:2181,server3:2181&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;fs.trash.interval&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;2000&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;/configuration&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;说明：&lt;br&gt;　　hadoop.tmp.dir 是hadoop文件系统依赖的基础配置，很多路径都依赖它。如果hdfs-site.xml中不配 置namenode和datanode的存放位置，默认就放在这个路径中&lt;/p&gt;
&lt;p&gt; 1、hadoop.tmp.dir&lt;/p&gt;
&lt;p&gt; 2、dfs.datanode.data.dir    &lt;/p&gt;
&lt;p&gt; 3、dfs.namenode.name.dir    &lt;/p&gt;
&lt;p&gt; 4、dfs.namenode.edits.dir    &lt;/p&gt;
&lt;p&gt; 5、dfs.namenode.checkpoint.dir    &lt;/p&gt;
&lt;p&gt; 6、dfs.namenode.checkpoint.edits.dir    &lt;/p&gt;
&lt;hr&gt;
&lt;ul&gt;
&lt;li&gt;2、hdfs-site.xml&lt;br&gt;参考配置 &lt;a href=&quot;https://hadoop.apache.org/docs/r2.4.1/hadoop-project-dist/hadoop-hdfs/hdfs-default.xml&quot; title=&quot;hdfs-default.xml&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;hdfs-default.xml&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;configuration&amp;gt;
&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;dfs.replication&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;2&amp;lt;/value&amp;gt; &amp;lt;!-- hdfs存的副本(数量) --&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;dfs.nameservices&amp;lt;/name&amp;gt; 
&amp;lt;value&amp;gt;mycluster&amp;lt;/value&amp;gt; &amp;lt;!-- 服务的名称，可用逗号分隔 --&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;dfs.ha.namenodes.mycluster&amp;lt;/name&amp;gt; 
&amp;lt;value&amp;gt;nn1,nn2&amp;lt;/value&amp;gt; &amp;lt;!-- HA的两个节点 --&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;dfs.namenode.rpc-address.mycluster.nn1&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;server1:9000&amp;lt;/value&amp;gt; 
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;dfs.namenode.http-address.mycluster.nn1&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;server1:50070&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;dfs.namenode.rpc-address.mycluster.nn2&amp;lt;/name&amp;gt; 
&amp;lt;value&amp;gt;server2:9000&amp;lt;/value&amp;gt; &amp;lt;!--处理所有客户端请求--&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;dfs.namenode.http-address.mycluster.nn2&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;server2:50070&amp;lt;/value&amp;gt; 
&amp;lt;!--dfs namenode web ui监听的端口--&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;dfs.ha.automatic-failover.enabled.mycluster&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;true&amp;lt;/value&amp;gt; &amp;lt;!--启用HA--&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;dfs.namenode.shared.edits.dir&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;qjournal://server1:8485;server2:8485;server3:8485/mycluster&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;dfs.journalnode.edits.dir&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;/home/root/hadoop/tmp/journal&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt; &amp;lt;!--配置ssh登录信息--&amp;gt;
&amp;lt;name&amp;gt;dfs.ha.fencing.methods&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;sshfence&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;dfs.ha.fencing.ssh.private-key-files&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;/root/.ssh/id_rsa&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
&amp;lt;name&amp;gt;dfs.client.failover.proxy.provider.mycluster&amp;lt;/name&amp;gt;
&amp;lt;value&amp;gt;org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;/configuration&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;3、yarn-site.xml&lt;br&gt;参考配置 &lt;a href=&quot;https://hadoop.apache.org/docs/r2.4.1/hadoop-yarn/hadoop-yarn-common/yarn-default.xml&quot; title=&quot;yarn-default.xml&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;yarn-default.xml&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;configuration&amp;gt;    
&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;yarn.nodemanager.aux-services&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;mapreduce_shuffle&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;yarn.nodemanager.aux-services.mapreduce.shuffle.class&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;org.apache.hadoop.mapred.ShuffleHandler&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;yarn.nodemanager.local-dirs&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;/home/root/hadoop/nm&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;yarn.nodemanager.log-dirs&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;/home/root/hadoop/logs&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;yarn.log-aggregation-enable&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;true&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt; 

&amp;lt;property&amp;gt;
  &amp;lt;description&amp;gt;Where to aggregate logs&amp;lt;/description&amp;gt;
  &amp;lt;name&amp;gt;yarn.nodemanager.remote-app-log-dir&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;hdfs://mycluster/var/log/hadoop-yarn/apps&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;!-- Resource Manager Configs --&amp;gt;
&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;yarn.resourcemanager.connect.retry-interval.ms&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;2000&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;yarn.resourcemanager.ha.enabled&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;true&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;yarn.resourcemanager.ha.automatic-failover.enabled&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;true&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;yarn.resourcemanager.ha.automatic-failover.embedded&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;true&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;yarn.resourcemanager.cluster-id&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;yarn-cluster&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;yarn.resourcemanager.ha.rm-ids&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;rm1,rm2&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;yarn.resourcemanager.ha.id&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;rm1&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;yarn.resourcemanager.scheduler.class&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;org.apache.hadoop.yarn.server.resourcemanager.scheduler.fair.FairScheduler&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;yarn.resourcemanager.recovery.enabled&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;true&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;yarn.resourcemanager.store.class&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;org.apache.hadoop.yarn.server.resourcemanager.recovery.ZKRMStateStore&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;yarn.resourcemanager.zk.state-store.address&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;server1:2181,server2:2181,server3:2181&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;yarn.app.mapreduce.am.scheduler.connection.wait.interval-ms&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;5000&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;


  &amp;lt;!-- RM1 configs --&amp;gt;
&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;yarn.resourcemanager.address.rm1&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;server1:23140&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;yarn.resourcemanager.scheduler.address.rm1&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;server1:23130&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;yarn.resourcemanager.webapp.https.address.rm1&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;server1:23189&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;yarn.resourcemanager.webapp.address.rm1&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;server1:23188&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;yarn.resourcemanager.resource-tracker.address.rm1&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;server1:23125&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;yarn.resourcemanager.admin.address.rm1&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;server1:23141&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;


&amp;lt;!-- RM2 configs --&amp;gt;
&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;yarn.resourcemanager.address.rm2&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;server2:23140&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;yarn.resourcemanager.scheduler.address.rm2&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;server2:23130&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;yarn.resourcemanager.webapp.https.address.rm2&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;server2:23189&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;yarn.resourcemanager.webapp.address.rm2&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;server2:23188&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;yarn.resourcemanager.resource-tracker.address.rm2&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;server2:23125&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;yarn.resourcemanager.admin.address.rm2&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;server2:23141&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;


&amp;lt;!-- Node Manager Configs --&amp;gt;
&amp;lt;property&amp;gt;
  &amp;lt;description&amp;gt;Address where the localizer IPC is.&amp;lt;/description&amp;gt;
  &amp;lt;name&amp;gt;yarn.nodemanager.localizer.address&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;0.0.0.0:23344&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;description&amp;gt;NM Webapp address.&amp;lt;/description&amp;gt;
  &amp;lt;name&amp;gt;yarn.nodemanager.webapp.address&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;0.0.0.0:23999&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;yarn.nodemanager.local-dirs&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;/home/root/hadoop/nodemanager/yarn/local&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;yarn.nodemanager.log-dirs&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;/home/root/hadoop/nodemanager/yarn/log&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;mapreduce.shuffle.port&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;23080&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;property&amp;gt;
  &amp;lt;name&amp;gt;yarn.resourcemanager.zk-address&amp;lt;/name&amp;gt;
  &amp;lt;value&amp;gt;server1:2181,server2:2181,server3:2181&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;

&amp;lt;/configuration&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;4、mapred-site.xml&lt;br&gt;参考配置 &lt;a href=&quot;https://hadoop.apache.org/docs/r2.7.1/hadoop-mapreduce-client/hadoop-mapreduce-client-core/mapred-default.xml&quot; title=&quot;mapred-default.xml&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;mapred-default.xml&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;configuration&amp;gt;
&amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;mapreduce.jobhistory.address&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;server1:10020&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;mapreduce.jobhistory.webapp.address&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;server1:19888&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;mapreduce.jobhistory.webapp.https.address&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;server1:19890&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;mapreduce.jobhistory.admin.address&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;server1:10033&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;mapreduce.framework.name&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;yarn&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;yarn.app.mapreduce.am.staging-dir&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;/user&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;mapreduce.task.timeout&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;1800000&amp;lt;/value&amp;gt;
&amp;lt;/property&amp;gt;
&amp;lt;/configuration&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;5、slaves &lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;vi slaves

server3
server4
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;6、hadoop-env.sh修改&lt;br&gt;  JAVA_HOME指定为jdk安装目录，JAVA_HOME=/usr/local/jdk1.7.0_79&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;复制到其他节点&quot;&gt;&lt;a href=&quot;#复制到其他节点&quot; class=&quot;headerlink&quot; title=&quot;复制到其他节点&quot;&gt;&lt;/a&gt;复制到其他节点&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;7、scp hadoop-2.7.2&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;[root@server1 local]# scp -rq hadoop-2.7.2 server2:/usr/local/
[root@server1 local]# scp -rq hadoop-2.7.2 server3:/usr/local/
[root@server1 local]# scp -rq hadoop-2.7.2 server4:/usr/local/
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&quot;启动各种服务&quot;&gt;&lt;a href=&quot;#启动各种服务&quot; class=&quot;headerlink&quot; title=&quot;启动各种服务&quot;&gt;&lt;/a&gt;启动各种服务&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;8、启动journalnode&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;[root@server1 local]# hadoop-daemon.sh start journalnode
[root@server2 local]# hadoop-daemon.sh start journalnode
[root@server3 local]# hadoop-daemon.sh start journalnode
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;9、格式化zkfc集群&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;[root@server1 local]# /usr/local/hadoop-2.7.2/bin/hdfs zkfc -formatZK
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;10、格式化hdfs文件系统[格式化namenode,接着启动namenode]&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;[root@server1 local]# /usr/local/hadoop-2.7.2/bin/hdfs namenode -format -clusterId mycluster
[root@server1 local]# /usr/local/hadoop-2.7.2/sbin/hadoop-daemon.sh start namenode
[root@server2 local]# /usr/local/hadoop-2.7.2/bin/hdfs namenode -bootstrapStandby
[root@server2 local]# /usr/local/hadoop-2.7.2/sbin/hadoop-daemon.sh start namenode
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;11、启动datanode&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;[root@server1 local]# /usr/local/hadoop-2.7.2/sbin/hadoop-daemons.sh start datanode
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;12、启动zkfc [DFSZKFailoverController]&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;[root@server1 local]# /usr/local/hadoop-2.7.2/sbin/hadoop-daemon.sh start zkfc
[root@server2 local]# /usr/local/hadoop-2.7.2/sbin/hadoop-daemon.sh start zkfc
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;13、启动yarn&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;[root@server1 local]# /usr/local/hadoop-2.7.2/sbin/yarn-daemon.sh start resourcemanager
[root@server1 local]# /usr/local/hadoop-2.7.2/sbin/yarn-daemons.sh start nodemanager
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;14、启动historyserver [查询作业执行的详细情况]&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;[root@server1 local]# mr-jobhistory-daemon.sh start historyserver  
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&quot;测试&quot;&gt;&lt;a href=&quot;#测试&quot; class=&quot;headerlink&quot; title=&quot;测试&quot;&gt;&lt;/a&gt;测试&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;15、测试hdfs+Yarn+MR&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;/usr/local/hadoop-2.7.2/bin/hadoop fs -put /usr/local/zookeeper.out /test/zookeeper.out
hadoop jar hadoop-mapreduce-examples-2.7.2.jar wordcount /test /output
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&quot;过程日志&quot;&gt;&lt;a href=&quot;#过程日志&quot; class=&quot;headerlink&quot; title=&quot;过程日志&quot;&gt;&lt;/a&gt;过程日志&lt;/h1&gt;&lt;h2 id=&quot;server1&quot;&gt;&lt;a href=&quot;#server1&quot; class=&quot;headerlink&quot; title=&quot;server1&quot;&gt;&lt;/a&gt;server1&lt;/h2&gt;&lt;p&gt;`&lt;br&gt;[root@server1 local]# hdfs zkfc -formatZK&lt;br&gt;16/07/23 08:13:03 INFO tools.DFSZKFailoverController: Failover controller configured for NameNode NameNode at server1/198.176.49.198:9000&lt;br&gt;16/07/23 08:13:03 INFO zookeeper.ZooKeeper: Client environment:zookeeper.version=3.4.6-1569965, built on 02/20/2014 09:09 GMT&lt;br&gt;16/07/23 08:13:03 INFO zookeeper.ZooKeeper: Client environment:host.name=server1&lt;br&gt;16/07/23 08:13:03 INFO zookeeper.ZooKeeper: Client environment:java.version=1.7.0_79&lt;br&gt;16/07/23 08:13:03 INFO zookeeper.ZooKeeper: Client environment:java.vendor=Oracle Corporation&lt;br&gt;16/07/23 08:13:03 INFO zookeeper.ZooKeeper: Client environment:java.home=/usr/local/java/jdk1.7.0_79/jre&lt;br&gt;16/07/23 08:13:03 INFO zookeeper.ZooKeeper: Client environment:java.class.path=/usr/local/hadoop-2.7.2/etc/hadoop:/usr/local/hadoop-2.7.2/share/hadoop/common/lib/jackson-core-asl-1.9.13.jar:/usr&lt;br&gt;&lt;strong&gt;此处省去大量lib…&lt;/strong&gt;&lt;br&gt;p-2.7.2/contrib/capacity-scheduler/&lt;em&gt;.jar&lt;br&gt;16/07/23 08:13:03 INFO zookeeper.ZooKeeper: Client environment:java.library.path=/usr/local/hadoop-2.7.2/lib/native&lt;br&gt;16/07/23 08:13:03 INFO zookeeper.ZooKeeper: Client environment:java.io.tmpdir=/tmp&lt;br&gt;16/07/23 08:13:03 INFO zookeeper.ZooKeeper: Client environment:java.compiler=&lt;na&gt;&lt;br&gt;16/07/23 08:13:03 INFO zookeeper.ZooKeeper: Client environment:os.name=Linux&lt;br&gt;16/07/23 08:13:03 INFO zookeeper.ZooKeeper: Client environment:os.arch=amd64&lt;br&gt;16/07/23 08:13:03 INFO zookeeper.ZooKeeper: Client environment:os.version=2.6.32-042stab112.15&lt;br&gt;16/07/23 08:13:03 INFO zookeeper.ZooKeeper: Client environment:user.name=root&lt;br&gt;16/07/23 08:13:03 INFO zookeeper.ZooKeeper: Client environment:user.home=/root&lt;br&gt;16/07/23 08:13:03 INFO zookeeper.ZooKeeper: Client environment:user.dir=/usr/local&lt;br&gt;16/07/23 08:13:03 INFO zookeeper.ZooKeeper: Initiating client connection, connectString=server1:2181,server2:2181,server3:2181 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@25a296b8&lt;br&gt;16/07/23 08:13:03 INFO zookeeper.ClientCnxn: Opening socket connection to server server1/198.176.49.198:2181. Will not attempt to authenticate using SASL (unknown error)&lt;br&gt;16/07/23 08:13:03 INFO zookeeper.ClientCnxn: Socket connection established to server1/198.176.49.198:2181, initiating session&lt;br&gt;16/07/23 08:13:03 INFO zookeeper.ClientCnxn: Session establishment complete on server server1/198.176.49.198:2181, sessionid = 0x15617ab536f0000, negotiated timeout = 20000&lt;br&gt;16/07/23 08:13:03 INFO ha.ActiveStandbyElector: Successfully created /hadoop-ha/mycluster in ZK.&lt;br&gt;16/07/23 08:13:03 INFO zookeeper.ZooKeeper: Session: 0x15617ab536f0000 closed&lt;br&gt;16/07/23 08:13:03 WARN ha.ActiveStandbyElector: Ignoring stale result from old client with sessionId 0x15617ab536f0000&lt;br&gt;16/07/23 08:13:03 INFO zookeeper.ClientCnxn: EventThread shut down&lt;br&gt;[root@server1 local]# hdfs namenode -format -clusterId mycluster&lt;br&gt;16/07/23 08:14:21 INFO namenode.NameNode: STARTUP_MSG:&lt;br&gt;/&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;em&gt;**&lt;/em&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;br&gt;STARTUP_MSG: Starting NameNode&lt;br&gt;STARTUP_MSG:   host = server1/198.176.49.198&lt;br&gt;STARTUP_MSG:   args = [-format, -clusterId, mycluster]&lt;br&gt;STARTUP_MSG:   version = 2.7.2&lt;br&gt;STARTUP_MSG:   classpath = /usr/local/hadoop-2.7.2/etc/hadoop:/usr/local/hadoop-2.7.2/share/hadoop/common/lib/jackson-core-asl-1.9.13.jar:/usr/local/hadoop-2.7.2/share/hadoop/common/lib/commons-codec-1.4.jar&lt;br&gt;&lt;strong&gt;此处省去大量lib…&lt;/strong&gt;&lt;br&gt;-2.7.2.jar:/usr/local/hadoop-2.7.2/contrib/capacity-scheduler/&lt;/na&gt;&lt;/em&gt;.jar&lt;br&gt;STARTUP_MSG:   build = &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf/hadoop.git&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://git-wip-us.apache.org/repos/asf/hadoop.git&lt;/a&gt; -r b165c4fe8a74265c792ce23f546c64604acf0e41; compiled by ‘jenkins’ on 2016-01-26T00:08Z&lt;br&gt;STARTUP_MSG:   java = 1.7.0_79&lt;br&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;em&gt;**&lt;/em&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;/&lt;br&gt;16/07/23 08:14:21 INFO namenode.NameNode: registered UNIX signal handlers for [TERM, HUP, INT]&lt;br&gt;16/07/23 08:14:21 INFO namenode.NameNode: createNameNode [-format, -clusterId, mycluster]&lt;br&gt;Formatting using clusterid: mycluster&lt;br&gt;16/07/23 08:14:22 INFO namenode.FSNamesystem: No KeyProvider found.&lt;br&gt;16/07/23 08:14:22 INFO namenode.FSNamesystem: fsLock is fair:true&lt;br&gt;16/07/23 08:14:22 INFO blockmanagement.DatanodeManager: dfs.block.invalidate.limit=1000&lt;br&gt;16/07/23 08:14:22 INFO blockmanagement.DatanodeManager: dfs.namenode.datanode.registration.ip-hostname-check=true&lt;br&gt;16/07/23 08:14:22 INFO blockmanagement.BlockManager: dfs.namenode.startup.delay.block.deletion.sec is set to 000:00:00:00.000&lt;br&gt;16/07/23 08:14:22 INFO blockmanagement.BlockManager: The block deletion will start around 2016 Jul 23 08:14:22&lt;br&gt;16/07/23 08:14:22 INFO util.GSet: Computing capacity for map BlocksMap&lt;br&gt;16/07/23 08:14:22 INFO util.GSet: VM type       = 64-bit&lt;br&gt;16/07/23 08:14:22 INFO util.GSet: 2.0% max memory 889 MB = 17.8 MB&lt;br&gt;16/07/23 08:14:22 INFO util.GSet: capacity      = 2^21 = 2097152 entries&lt;br&gt;16/07/23 08:14:22 INFO blockmanagement.BlockManager: dfs.block.access.token.enable=false&lt;br&gt;16/07/23 08:14:22 INFO blockmanagement.BlockManager: defaultReplication         = 2&lt;br&gt;16/07/23 08:14:22 INFO blockmanagement.BlockManager: maxReplication             = 512&lt;br&gt;16/07/23 08:14:22 INFO blockmanagement.BlockManager: minReplication             = 1&lt;br&gt;16/07/23 08:14:22 INFO blockmanagement.BlockManager: maxReplicationStreams      = 2&lt;br&gt;16/07/23 08:14:22 INFO blockmanagement.BlockManager: replicationRecheckInterval = 3000&lt;br&gt;16/07/23 08:14:22 INFO blockmanagement.BlockManager: encryptDataTransfer        = false&lt;br&gt;16/07/23 08:14:22 INFO blockmanagement.BlockManager: maxNumBlocksToLog          = 1000&lt;br&gt;16/07/23 08:14:22 INFO namenode.FSNamesystem: fsOwner             = root (auth:SIMPLE)&lt;br&gt;16/07/23 08:14:22 INFO namenode.FSNamesystem: supergroup          = supergroup&lt;br&gt;16/07/23 08:14:22 INFO namenode.FSNamesystem: isPermissionEnabled = true&lt;br&gt;16/07/23 08:14:22 INFO namenode.FSNamesystem: Determined nameservice ID: mycluster&lt;br&gt;16/07/23 08:14:22 INFO namenode.FSNamesystem: HA Enabled: true&lt;br&gt;16/07/23 08:14:22 INFO namenode.FSNamesystem: Append Enabled: true&lt;br&gt;16/07/23 08:14:22 INFO util.GSet: Computing capacity for map INodeMap&lt;br&gt;16/07/23 08:14:22 INFO util.GSet: VM type       = 64-bit&lt;br&gt;16/07/23 08:14:22 INFO util.GSet: 1.0% max memory 889 MB = 8.9 MB&lt;br&gt;16/07/23 08:14:22 INFO util.GSet: capacity      = 2^20 = 1048576 entries&lt;br&gt;16/07/23 08:14:22 INFO namenode.FSDirectory: ACLs enabled? false&lt;br&gt;16/07/23 08:14:22 INFO namenode.FSDirectory: XAttrs enabled? true&lt;br&gt;16/07/23 08:14:22 INFO namenode.FSDirectory: Maximum size of an xattr: 16384&lt;br&gt;16/07/23 08:14:22 INFO namenode.NameNode: Caching file names occuring more than 10 times&lt;br&gt;16/07/23 08:14:22 INFO util.GSet: Computing capacity for map cachedBlocks&lt;br&gt;16/07/23 08:14:22 INFO util.GSet: VM type       = 64-bit&lt;br&gt;16/07/23 08:14:22 INFO util.GSet: 0.25% max memory 889 MB = 2.2 MB&lt;br&gt;16/07/23 08:14:22 INFO util.GSet: capacity      = 2^18 = 262144 entries&lt;br&gt;16/07/23 08:14:22 INFO namenode.FSNamesystem: dfs.namenode.safemode.threshold-pct = 0.9990000128746033&lt;br&gt;16/07/23 08:14:22 INFO namenode.FSNamesystem: dfs.namenode.safemode.min.datanodes = 0&lt;br&gt;16/07/23 08:14:22 INFO namenode.FSNamesystem: dfs.namenode.safemode.extension     = 30000&lt;br&gt;16/07/23 08:14:22 INFO metrics.TopMetrics: NNTop conf: dfs.namenode.top.window.num.buckets = 10&lt;br&gt;16/07/23 08:14:22 INFO metrics.TopMetrics: NNTop conf: dfs.namenode.top.num.users = 10&lt;br&gt;16/07/23 08:14:22 INFO metrics.TopMetrics: NNTop conf: dfs.namenode.top.windows.minutes = 1,5,25&lt;br&gt;16/07/23 08:14:22 INFO namenode.FSNamesystem: Retry cache on namenode is enabled&lt;br&gt;16/07/23 08:14:22 INFO namenode.FSNamesystem: Retry cache will use 0.03 of total heap and retry cache entry expiry time is 600000 millis&lt;br&gt;16/07/23 08:14:22 INFO util.GSet: Computing capacity for map NameNodeRetryCache&lt;br&gt;16/07/23 08:14:22 INFO util.GSet: VM type       = 64-bit&lt;br&gt;16/07/23 08:14:22 INFO util.GSet: 0.029999999329447746% max memory 889 MB = 273.1 KB&lt;br&gt;16/07/23 08:14:22 INFO util.GSet: capacity      = 2^15 = 32768 entries&lt;br&gt;16/07/23 08:14:24 INFO namenode.FSImage: Allocated new BlockPoolId: BP-1601089490-198.176.49.198-1469276064635&lt;br&gt;16/07/23 08:14:24 INFO common.Storage: Storage directory /home/root/hadoop/tmp/dfs/name has been successfully formatted.&lt;br&gt;16/07/23 08:14:25 INFO namenode.NNStorageRetentionManager: Going to retain 1 images with txid &amp;gt;= 0&lt;br&gt;16/07/23 08:14:26 INFO util.ExitUtil: Exiting with status 0&lt;br&gt;16/07/23 08:14:26 INFO namenode.NameNode: SHUTDOWN_MSG:&lt;br&gt;/&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;em&gt;**&lt;/em&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;br&gt;SHUTDOWN_MSG: Shutting down NameNode at server1/198.176.49.198&lt;br&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;em&gt;**&lt;/em&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;/&lt;br&gt;[root@server1 local]# hadoop-daemon.sh start namenode&lt;br&gt;starting namenode, logging to /usr/local/hadoop-2.7.2/logs/hadoop-root-namenode-server1.out&lt;br&gt;[root@server1 local]# hadoop-daemons.sh start datanode&lt;br&gt;server3: starting datanode, logging to /usr/local/hadoop-2.7.2/logs/hadoop-root-datanode-server3.out&lt;br&gt;server4: starting datanode, logging to /usr/local/hadoop-2.7.2/logs/hadoop-root-datanode-server4.out&lt;br&gt;[root@server1 local]# hadoop-daemon.sh start zkfc&lt;br&gt;starting zkfc, logging to /usr/local/hadoop-2.7.2/logs/hadoop-root-zkfc-server1.out&lt;/p&gt;
&lt;p&gt;.^H[root@server1 local]#&lt;br&gt;[root@server1 local]# yarn-daemon.sh start resourcemanager&lt;br&gt;starting resourcemanager, logging to /usr/local/hadoop-2.7.2/logs/yarn-root-resourcemanager-server1.out&lt;br&gt;[root@server1 local]# yarn-daemons.sh start nodemanager&lt;br&gt;server4: starting nodemanager, logging to /usr/local/hadoop-2.7.2/logs/yarn-root-nodemanager-server4.out&lt;br&gt;server3: starting nodemanager, logging to /usr/local/hadoop-2.7.2/logs/yarn-root-nodemanager-server3.out&lt;br&gt;[root@server1 local]# mr-jobhistory-daemon.sh start historyserver&lt;br&gt;starting historyserver, logging to /usr/local/hadoop-2.7.2/logs/mapred-root-historyserver-server1.out&lt;br&gt;[root@server1 local]# jps&lt;br&gt;2511 Jps&lt;br&gt;2457 JobHistoryServer&lt;br&gt;2071 DFSZKFailoverController&lt;br&gt;1771 QuorumPeerMain&lt;br&gt;1950 NameNode&lt;br&gt;2169 ResourceManager&lt;br&gt;1076 JournalNode&lt;br&gt;[root@server1 local]# zkCli.sh&lt;br&gt;Connecting to localhost:2181&lt;br&gt;2016-07-23 08:19:47,928 [myid:] - INFO  [main:Environment@100] - Client environment:zookeeper.version=3.4.6-1569965, built on 02/20/2014 09:09 GMT&lt;br&gt;2016-07-23 08:19:47,931 [myid:] - INFO  [main:Environment@100] - Client environment:host.name=server1&lt;br&gt;2016-07-23 08:19:47,931 [myid:] - INFO  [main:Environment@100] - Client environment:java.version=1.7.0_79&lt;br&gt;2016-07-23 08:19:47,933 [myid:] - INFO  [main:Environment@100] - Client environment:java.vendor=Oracle Corporation&lt;br&gt;2016-07-23 08:19:47,933 [myid:] - INFO  [main:Environment@100] - Client environment:java.home=/usr/local/java/jdk1.7.0_79/jre&lt;br&gt;2016-07-23 08:19:47,933 [myid:] - INFO  [main:Environment@100] - Client environment:java.class.path=/usr/local/zookeeper-3.4.6/bin/../build/classes:/usr/local/zookeeper-3.4.6/bin/../build/lib/&lt;em&gt;.jar:/usr/local/zookeeper-3.4.6/bin/../lib/slf4j-log4j12-1.6.1.jar:/usr/local/zookeeper-3.4.6/bin/../lib/slf4j-api-1.6.1.jar:/usr/local/zookeeper-3.4.6/bin/../lib/netty-3.7.0.Final.jar:/usr/local/zookeeper-3.4.6/bin/../lib/log4j-1.2.16.jar:/usr/local/zookeeper-3.4.6/bin/../lib/jline-0.9.94.jar:/usr/local/zookeeper-3.4.6/bin/../zookeeper-3.4.6.jar:/usr/local/zookeeper-3.4.6/bin/../src/java/lib/&lt;/em&gt;.jar:/usr/local/zookeeper-3.4.6/bin/../conf:.:/usr/local/java/jdk1.7.0_79/lib/dt.jar:/usr/local/java/jdk1.7.0_79/lib/tools.jar&lt;br&gt;2016-07-23 08:19:47,933 [myid:] - INFO  [main:Environment@100] - Client environment:java.library.path=/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib&lt;br&gt;2016-07-23 08:19:47,933 [myid:] - INFO  [main:Environment@100] - Client environment:java.io.tmpdir=/tmp&lt;br&gt;2016-07-23 08:19:47,933 [myid:] - INFO  [main:Environment@100] - Client environment:java.compiler=&lt;na&gt;&lt;br&gt;2016-07-23 08:19:47,934 [myid:] - INFO  [main:Environment@100] - Client environment:os.name=Linux&lt;br&gt;2016-07-23 08:19:47,934 [myid:] - INFO  [main:Environment@100] - Client environment:os.arch=amd64&lt;br&gt;2016-07-23 08:19:47,934 [myid:] - INFO  [main:Environment@100] - Client environment:os.version=2.6.32-042stab112.15&lt;br&gt;2016-07-23 08:19:47,934 [myid:] - INFO  [main:Environment@100] - Client environment:user.name=root&lt;br&gt;2016-07-23 08:19:47,934 [myid:] - INFO  [main:Environment@100] - Client environment:user.home=/root&lt;br&gt;2016-07-23 08:19:47,934 [myid:] - INFO  [main:Environment@100] - Client environment:user.dir=/usr/local&lt;br&gt;2016-07-23 08:19:47,935 [myid:] - INFO  [main:ZooKeeper@438] - Initiating client connection, connectString=localhost:2181 sessionTimeout=30000 watcher=org.apache.zookeeper.ZooKeeperMain$MyWatcher@c81739c&lt;br&gt;Welcome to ZooKeeper!&lt;br&gt;2016-07-23 08:19:47,959 [myid:] - INFO  [main-SendThread(localhost.localdomain:2181):ClientCnxn$SendThread@975] - Opening socket connection to server localhost.localdomain/127.0.0.1:2181. Will not attempt to authenticate using SASL (unknown error)&lt;br&gt;2016-07-23 08:19:47,965 [myid:] - INFO  [main-SendThread(localhost.localdomain:2181):ClientCnxn$SendThread@852] - Socket connection established to localhost.localdomain/127.0.0.1:2181, initiating session&lt;br&gt;JLine support is enabled&lt;br&gt;2016-07-23 08:19:47,976 [myid:] - INFO  [main-SendThread(localhost.localdomain:2181):ClientCnxn$SendThread@1235] - Session establishment complete on server localhost.localdomain/127.0.0.1:2181, sessionid = 0x15617ab536f0002, negotiated timeout = 30000&lt;/na&gt;&lt;/p&gt;
&lt;p&gt;WATCHER::&lt;/p&gt;
&lt;p&gt;WatchedEvent state:SyncConnected type:None path:null&lt;br&gt;[zk: localhost:2181(CONNECTED) 0] ls /&lt;br&gt;[rmstore, yarn-leader-election, hadoop-ha, zookeeper]&lt;br&gt;[zk: localhost:2181(CONNECTED) 1] ls /hadoop-ha/mycluster&lt;br&gt;[ActiveBreadCrumb, ActiveStandbyElectorLock]&lt;/p&gt;
&lt;p&gt;`&lt;/p&gt;
&lt;h2 id=&quot;server2&quot;&gt;&lt;a href=&quot;#server2&quot; class=&quot;headerlink&quot; title=&quot;server2&quot;&gt;&lt;/a&gt;server2&lt;/h2&gt;&lt;p&gt;`&lt;br&gt;[root@server2 ~]# zkServer.sh status&lt;br&gt;JMX enabled by default&lt;br&gt;Using config: /usr/local/zookeeper-3.4.6/bin/../conf/zoo.cfg&lt;br&gt;Mode: leader&lt;br&gt;[root@server2 ~]# hdfs namenode -bootstrapStandby&lt;br&gt;16/07/23 08:15:02 INFO namenode.NameNode: STARTUP_MSG:&lt;br&gt;/&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;em&gt;**&lt;/em&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;br&gt;STARTUP_MSG: Starting NameNode&lt;br&gt;STARTUP_MSG:   host = server2/198.176.49.2&lt;br&gt;STARTUP_MSG:   args = [-bootstrapStandby]&lt;br&gt;STARTUP_MSG:   version = 2.7.2&lt;br&gt;STARTUP_MSG:   classpath = /usr/local/hadoop-2.7.2/etc/hadoop:/usr/local/hadoop-2.7.2/share/hadoop/common/lib/jackson-core-asl-1.9.13.jar:/usr/local/hadoop-2.7.2/share/hadoop/common/lib/commons-code&lt;br&gt;&lt;strong&gt;此处省去大量lib…&lt;/strong&gt;&lt;br&gt;doop.git -r b165c4fe8a74265c792ce23f546c64604acf0e41; compiled by ‘jenkins’ on 2016-01-26T00:08Z&lt;br&gt;STARTUP_MSG:   java = 1.7.0_79&lt;br&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;em&gt;**&lt;/em&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;/&lt;br&gt;16/07/23 08:15:02 INFO namenode.NameNode: registered UNIX signal handlers for [TERM, HUP, INT]&lt;br&gt;16/07/23 08:15:02 INFO namenode.NameNode: createNameNode [-bootstrapStandby]&lt;/p&gt;
&lt;p&gt;=====================================================&lt;br&gt;About to bootstrap Standby ID nn2 from:&lt;br&gt;           Nameservice ID: mycluster&lt;br&gt;        Other Namenode ID: nn1&lt;br&gt;  Other NN’s HTTP address: &lt;a href=&quot;http://server1:50070&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://server1:50070&lt;/a&gt;&lt;br&gt;  Other NN’s IPC  address: server1/198.176.49.198:9000&lt;br&gt;             Namespace ID: 1284273816&lt;br&gt;            Block pool ID: BP-1601089490-198.176.49.198-1469276064635&lt;br&gt;               Cluster ID: mycluster&lt;br&gt;           Layout version: -63&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;isUpgradeFinalized: true
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;=====================================================&lt;br&gt;16/07/23 08:15:04 INFO common.Storage: Storage directory /home/root/hadoop/tmp/dfs/name has been successfully formatted.&lt;br&gt;16/07/23 08:15:05 INFO namenode.TransferFsImage: Opening connection to &lt;a href=&quot;http://server1:50070/imagetransfer?getimage=1&amp;amp;txid=0&amp;amp;storageInfo=-63:1284273816:0:mycluster&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://server1:50070/imagetransfer?getimage=1&amp;amp;txid=0&amp;amp;storageInfo=-63:1284273816:0:mycluster&lt;/a&gt;&lt;br&gt;16/07/23 08:15:05 INFO namenode.TransferFsImage: Image Transfer timeout configured to 60000 milliseconds&lt;br&gt;16/07/23 08:15:05 INFO namenode.TransferFsImage: Transfer took 0.00s at 0.00 KB/s&lt;br&gt;16/07/23 08:15:05 INFO namenode.TransferFsImage: Downloaded file fsimage.ckpt_0000000000000000000 size 351 bytes.&lt;br&gt;16/07/23 08:15:05 INFO util.ExitUtil: Exiting with status 0&lt;br&gt;16/07/23 08:15:05 INFO namenode.NameNode: SHUTDOWN_MSG:&lt;br&gt;/&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;em&gt;**&lt;/em&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;br&gt;SHUTDOWN_MSG: Shutting down NameNode at server2/198.176.49.2&lt;br&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;em&gt;**&lt;/em&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;/&lt;br&gt;[root@server2 ~]# hadoop-daemon.sh start namenode&lt;br&gt;starting namenode, logging to /usr/local/hadoop-2.7.2/logs/hadoop-root-namenode-server2.out&lt;br&gt;[root@server2 ~]# hadoop-daemon.sh start zkfc&lt;br&gt;starting zkfc, logging to /usr/local/hadoop-2.7.2/logs/hadoop-root-zkfc-server2.out&lt;br&gt;[root@server2 ~]# jps&lt;br&gt;1613 QuorumPeerMain&lt;br&gt;1886 Jps&lt;br&gt;1007 JournalNode&lt;br&gt;1736 NameNode&lt;br&gt;1825 DFSZKFailoverController&lt;br&gt;[root@server2 ~]#&lt;br&gt;`&lt;/p&gt;
&lt;h2 id=&quot;server3&quot;&gt;&lt;a href=&quot;#server3&quot; class=&quot;headerlink&quot; title=&quot;server3&quot;&gt;&lt;/a&gt;server3&lt;/h2&gt;&lt;p&gt;`&lt;br&gt;[root@server3 ~]# zkServer.sh status&lt;br&gt;JMX enabled by default&lt;br&gt;Using config: /usr/local/zookeeper-3.4.6/bin/../conf/zoo.cfg&lt;br&gt;Mode: follower&lt;br&gt;[root@server3 ~]# jps&lt;br&gt;1017 JournalNode&lt;br&gt;1641 NodeManager&lt;br&gt;1750 Jps&lt;br&gt;1538 DataNode&lt;br&gt;1454 QuorumPeerMain&lt;br&gt;[root@server3 ~]# &lt;/p&gt;
&lt;p&gt;`&lt;/p&gt;
&lt;h2 id=&quot;server4&quot;&gt;&lt;a href=&quot;#server4&quot; class=&quot;headerlink&quot; title=&quot;server4&quot;&gt;&lt;/a&gt;server4&lt;/h2&gt;&lt;p&gt;&lt;code&gt;[root@server4 ~]# jps
902 Jps
676 DataNode
793 NodeManager
[root@server4 ~]#&lt;/code&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      Hadoop2.7.2 HA集群搭建
    
    </summary>
    
      <category term="BigData" scheme="http://www.guinguo.top/categories/BigData/"/>
    
    
      <category term="Hadoop" scheme="http://www.guinguo.top/tags/Hadoop/"/>
    
  </entry>
  
  <entry>
    <title>Hadoop Cluster Set Up P1_Prepare</title>
    <link href="http://www.guinguo.top/2016/07/23/Hadoop-Cluster-Set-Up-P1-Prepare/"/>
    <id>http://www.guinguo.top/2016/07/23/Hadoop-Cluster-Set-Up-P1-Prepare/</id>
    <published>2016-07-23T00:49:23.000Z</published>
    <updated>2016-09-12T03:23:01.981Z</updated>
    
    <content type="html">&lt;p&gt;前几天买了4台vps来搭建集群，具体情况如下：&lt;br&gt;本来要进行分区，存储数据的，但是这个类型的vps居然不支持重新分区。。。&lt;br&gt;Centos7&lt;/p&gt;
&lt;p&gt;Server1        master(NameNode)&lt;br&gt;Server2        master(SecondaryNameNode)&lt;br&gt;Server3        slave1(DataNode)&lt;br&gt;Server4        slave2(DataNode)&lt;/p&gt;
&lt;h1 id=&quot;改hosts文件，增加Hadoop用户&quot;&gt;&lt;a href=&quot;#改hosts文件，增加Hadoop用户&quot; class=&quot;headerlink&quot; title=&quot;改hosts文件，增加Hadoop用户&quot;&gt;&lt;/a&gt;改hosts文件，增加Hadoop用户&lt;/h1&gt;&lt;p&gt;拿到vps后，修改hosts文件&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vi /etc/hosts
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;像这样一行一行把ip地址映射上去&lt;br&gt;192.168.1.1 Server1&lt;/p&gt;
&lt;hr&gt;
&lt;pre&gt;&lt;code&gt;useradd hadoop
echo &amp;quot;hadoop123&amp;quot;|passwd --stdin hadoop
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;授予sudo权限&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;echo &amp;apos;hadoop  ALL=(ALL)       NOPASSWD: ALL&amp;apos; &amp;gt;&amp;gt; /etc/sudoers
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&quot;配置ssh免密码登录&quot;&gt;&lt;a href=&quot;#配置ssh免密码登录&quot; class=&quot;headerlink&quot; title=&quot;配置ssh免密码登录&quot;&gt;&lt;/a&gt;配置ssh免密码登录&lt;/h1&gt;&lt;p&gt;[root@server1 ~]# ssh-keygen -t rsa&lt;br&gt;三个回车，出现&lt;br&gt;The key’s randomart image is:&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;+--[ RSA 2048]----+
|E                |
|.                |
|o.               |
|o.     .         |
|o     . S .      |
|..     . +       |
|  +   . oo .     |
| . o o..+o=      |
|    .o=++=..     |
+-----------------+
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p&gt;将id-rsa.pub 公钥添加到.ssh/authorized_keys文件中&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cat  id-rsa.pub &amp;gt;&amp;gt; authorized_keys
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;我使用复制方式，从server1复制到server2，然后添加server2的公钥，再复制到server3，4。&lt;br&gt;最后在server4就有了一份全部server的公钥文件，如果麻烦你也可以直接复制到一个文件。&lt;br&gt;最后分发到四台server。执行&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;chmod 600 .ssh/authorized_keys
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;好了，配置好了之后，注意:&lt;br&gt;&lt;strong&gt;第一次ssh登录时可能需要输入密码，再次访问时即可免密码登录。&lt;/strong&gt;&lt;br&gt;还有我在每一台server是分别ssh其他三台server。因为出现：&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;The authenticity of host &amp;apos;server1 (xx.xx.xx.xx)&amp;apos; can&amp;apos;t be established.
ECDSA key fingerprint is c6:03:ee:f5:60:0c:ae:76:d8:f3:ad:70:c5:66:04:2d.
Are you sure you want to continue connecting (yes/no)?
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p&gt;会把host记录在.ssh/known_hosts文件中，之后就可以直接ssh上，如果嫌麻烦可以&lt;br&gt;修改/etc/ssh/ssh_config&lt;br&gt;将其中的# StrictHostKeyChecking ask 改成 StrictHostKeyChecking no&lt;/p&gt;
&lt;h1 id=&quot;安装jdk1-7&quot;&gt;&lt;a href=&quot;#安装jdk1-7&quot; class=&quot;headerlink&quot; title=&quot;安装jdk1.7&quot;&gt;&lt;/a&gt;安装jdk1.7&lt;/h1&gt;&lt;p&gt;这里安装的是jdk-7u79-linux-x64，因为1.8会出现各种奇怪的问题，之前在虚拟机就遇到过，所以还是装1.7的好&lt;br&gt;下载jdk-7u79-linux-x64.tar.gz，并上传到server上，&lt;br&gt;如果是国外的服务器，ftp上传慢的话，课使用&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;wget --no-cookies --no-check-certificate --header &amp;quot;Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com%2F;oraclelicense=accept-securebackup-cookie&amp;quot; &amp;quot;http://download.oracle.com/otn-pub/java/jdk/7u79-b15/jdk-7u79-linux-x64.tar.gz&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这个命令，下载速度有7M/s&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;解压安装&lt;/p&gt;
&lt;p&gt;  tar -zxvf jdk-7u79-linux-x64.tar.gz -C /usr/local/java/&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;配置环境变量&lt;/p&gt;
&lt;p&gt;  vi /etc/profile&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;增加&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;figcaption&gt;&lt;span&gt;lange:xml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#JAVA&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;JAVA_HOME=/usr/java/jdk1.7.0_79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;PATH=$JAVA_HOME/bin:$PATH&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export JAVA_HOME&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export PATH&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export CLASSPATH&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然后执行&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@server1 ~]# source /etc/profile
[root@server1 ~]# java -version
java version &amp;quot;1.7.0_79&amp;quot;
Java(TM) SE Runtime Environment (build 1.7.0_79-b15)
Java HotSpot(TM) 64-Bit Server VM (build 24.79-b02, mixed mode)
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;P2安装Zookeeper&lt;br&gt; 这里安装的版本是zookeeper-3.4.8&lt;br&gt;  参考 &lt;a href=&quot;/2016/05/26/Zookeeper集群安装于部署/&quot;&gt;Zookeeper集群安装于部署&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;P3安装Hadoop&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;SQL-on-Hadoop&quot;&gt;&lt;a href=&quot;#SQL-on-Hadoop&quot; class=&quot;headerlink&quot; title=&quot;SQL-on-Hadoop&quot;&gt;&lt;/a&gt;SQL-on-Hadoop&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;P4安装HBase&lt;/li&gt;
&lt;li&gt;P5安装Hive&lt;/li&gt;
&lt;li&gt;P6安装Spark&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      hadoop集群搭建前的准备
    
    </summary>
    
      <category term="BigData" scheme="http://www.guinguo.top/categories/BigData/"/>
    
    
      <category term="Hadoop" scheme="http://www.guinguo.top/tags/Hadoop/"/>
    
  </entry>
  
  <entry>
    <title>VMware 增加磁盘容量-Centos6</title>
    <link href="http://www.guinguo.top/2016/06/06/VMware-%E5%A2%9E%E5%8A%A0%E7%A3%81%E7%9B%98%E5%AE%B9%E9%87%8F-Centos6/"/>
    <id>http://www.guinguo.top/2016/06/06/VMware-增加磁盘容量-Centos6/</id>
    <published>2016-06-05T16:09:33.000Z</published>
    <updated>2016-06-05T16:16:44.120Z</updated>
    
    <content type="html">&lt;p&gt;直接给出命令：&lt;/p&gt;
&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;127&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;129&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;130&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;131&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;132&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;133&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;134&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;135&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;136&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;137&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;138&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;139&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;140&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;141&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;142&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;143&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;144&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;145&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;146&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;147&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;148&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;149&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;150&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;151&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;152&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;153&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;154&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;155&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;156&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;157&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;158&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;159&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;160&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;161&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;162&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;163&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;164&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;165&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;166&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;167&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;168&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;169&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;170&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;171&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;172&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;173&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;174&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;关机&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;扩展磁盘&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@apache-server ~]# df -h&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem            Size  Used Avail Use% Mounted on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/dev/mapper/vg_os-lv_root&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                       14G  9.3G  3.4G  74% /&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tmpfs                 495M     0  495M   0% /dev/shm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/dev/sda1             190M   27M  153M  15% /boot&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/dev/mapper/vg_os-lv_data&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                      5.0G   11M  4.8G   1% /data&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;					  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@apache-server ~]# fdisk -l&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Disk /dev/sda: 32.2 GB, 32212254720 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;255 heads, 63 sectors/track, 3916 cylinders&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Units = cylinders of 16065 * 512 = 8225280 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sector size (logical/physical): 512 bytes / 512 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;I/O size (minimum/optimal): 512 bytes / 512 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Disk identifier: 0x00012311&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   Device Boot      Start         End      Blocks   Id  System&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/dev/sda1   *           1          26      204800   83  Linux&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Partition 1 does not end on cylinder boundary.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/dev/sda2              26        2611    20765696   8e  Linux LVM&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Disk /dev/mapper/vg_os-lv_root: 14.6 GB, 14604566528 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;255 heads, 63 sectors/track, 1775 cylinders&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Units = cylinders of 16065 * 512 = 8225280 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sector size (logical/physical): 512 bytes / 512 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;I/O size (minimum/optimal): 512 bytes / 512 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Disk identifier: 0x00000000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Disk /dev/mapper/vg_os-lv_swap: 1073 MB, 1073741824 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;255 heads, 63 sectors/track, 130 cylinders&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Units = cylinders of 16065 * 512 = 8225280 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sector size (logical/physical): 512 bytes / 512 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;I/O size (minimum/optimal): 512 bytes / 512 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Disk identifier: 0x00000000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Disk /dev/mapper/vg_os-lv_data: 5582 MB, 5582618624 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;255 heads, 63 sectors/track, 678 cylinders&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Units = cylinders of 16065 * 512 = 8225280 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sector size (logical/physical): 512 bytes / 512 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;I/O size (minimum/optimal): 512 bytes / 512 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Disk identifier: 0x00000000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@apache-server ~]# fdisk /dev/sda&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;WARNING: DOS-compatible mode is deprecated. It&#39;s strongly recommended to&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         switch off the mode (command &#39;c&#39;) and change display units to&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         sectors (command &#39;u&#39;).&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Command (m for help): n&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Command action&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   e   extended&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   p   primary partition (1-4)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;p&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Partition number (1-4): 3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;First cylinder (2611-3916, default 2611): &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Using default value 2611&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Last cylinder, +cylinders or +size&amp;#123;K,M,G&amp;#125; (2611-3916, default 3916): &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Using default value 3916&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Command (m for help): w&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;The partition table has been altered!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Calling ioctl() to re-read partition table.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;WARNING: Re-reading the partition table failed with error 16: Device or resource busy.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;The kernel still uses the old table. The new table will be used at&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;the next reboot or after you run partprobe(8) or kpartx(8)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Syncing disks.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@apache-server ~]# reboot&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Broadcast message from root@apache-server&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        (/dev/pts/0) at 22:49 ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;The system is going down for reboot NOW!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@apache-server ~]# &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Last login: Sun Jun  5 22:47:34 2016 from 192.168.191.5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@apache-server ~]# fdisk -l&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Disk /dev/sda: 32.2 GB, 32212254720 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;255 heads, 63 sectors/track, 3916 cylinders&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Units = cylinders of 16065 * 512 = 8225280 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sector size (logical/physical): 512 bytes / 512 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;I/O size (minimum/optimal): 512 bytes / 512 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Disk identifier: 0x00012311&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   Device Boot      Start         End      Blocks   Id  System&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/dev/sda1   *           1          26      204800   83  Linux&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Partition 1 does not end on cylinder boundary.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/dev/sda2              26        2611    20765696   8e  Linux LVM&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/dev/sda3            2611        3916    10483750   83  Linux&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Disk /dev/mapper/vg_os-lv_root: 14.6 GB, 14604566528 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;255 heads, 63 sectors/track, 1775 cylinders&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Units = cylinders of 16065 * 512 = 8225280 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sector size (logical/physical): 512 bytes / 512 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;I/O size (minimum/optimal): 512 bytes / 512 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Disk identifier: 0x00000000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Disk /dev/mapper/vg_os-lv_swap: 1073 MB, 1073741824 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;255 heads, 63 sectors/track, 130 cylinders&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Units = cylinders of 16065 * 512 = 8225280 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sector size (logical/physical): 512 bytes / 512 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;I/O size (minimum/optimal): 512 bytes / 512 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Disk identifier: 0x00000000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Disk /dev/mapper/vg_os-lv_data: 5582 MB, 5582618624 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;255 heads, 63 sectors/track, 678 cylinders&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Units = cylinders of 16065 * 512 = 8225280 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sector size (logical/physical): 512 bytes / 512 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;I/O size (minimum/optimal): 512 bytes / 512 bytes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Disk identifier: 0x00000000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@apache-server ~]# lvm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;lvm&amp;gt; pvcreate /dev/sda3　　&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Device /dev/sda3　　 not found (or ignored by filtering).&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;lvm&amp;gt; pvcreate /dev/sda3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Physical volume &quot;/dev/sda3&quot; successfully created&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;lvm&amp;gt;  vgextend vg_os /dev/sda3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Volume group &quot;vg_os&quot; successfully extended&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;lvm&amp;gt;  lvextend /dev/vg_os/lv_root /dev/sda3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Size of logical volume vg_os/lv_root changed from 13.60 GiB (3482 extents) to 23.60 GiB (6041 extents).&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Logical volume lv_root successfully resized&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;lvm&amp;gt;  pvdisplay&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  --- Physical volume ---&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  PV Name               /dev/sda2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  VG Name               vg_os&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  PV Size               19.80 GiB / not usable 3.00 MiB&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Allocatable           yes (but full)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  PE Size               4.00 MiB&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Total PE              5069&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Free PE               0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Allocated PE          5069&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  PV UUID               oX0Vt2-m4F5-utFk-CAdx-Vw2P-id0v-l0FPba&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  --- Physical volume ---&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  PV Name               /dev/sda3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  VG Name               vg_os&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  PV Size               10.00 GiB / not usable 2.04 MiB&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Allocatable           yes (but full)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  PE Size               4.00 MiB&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Total PE              2559&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Free PE               0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Allocated PE          2559&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  PV UUID               B27Hb0-nLHZ-uEm4-RE9W-dUDJ-Y3xf-ZHAthg&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;lvm&amp;gt; quit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Exiting.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@apache-server ~]# resize2fs /dev/vg_os/lv_root&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;resize2fs 1.41.12 (17-May-2010)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem at /dev/vg_os/lv_root is mounted on /; on-line resizing required&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;old desc_blocks = 1, new_desc_blocks = 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Performing an on-line resize of /dev/vg_os/lv_root to 6185984 (4k) blocks.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;The filesystem on /dev/vg_os/lv_root is now 6185984 blocks long.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@apache-server ~]# df -h&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem            Size  Used Avail Use% Mounted on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/dev/mapper/vg_os-lv_root&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                       24G  9.3G   13G  43% /&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tmpfs                 495M     0  495M   0% /dev/shm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/dev/sda1             190M   27M  153M  15% /boot&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/dev/mapper/vg_os-lv_data&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                      5.0G   11M  4.8G   1% /data&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;cankao&lt;br&gt;&lt;a href=&quot;http://www.centoscn.com/CentOS/config/2015/0730/5942.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.centoscn.com/CentOS/config/2015/0730/5942.html&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://blog.csdn.net/gsying1474/article/details/49150037&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://blog.csdn.net/gsying1474/article/details/49150037&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      一开始分配的磁盘太小
    
    </summary>
    
      <category term="Linux" scheme="http://www.guinguo.top/categories/Linux/"/>
    
    
      <category term="Linux" scheme="http://www.guinguo.top/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>周总结--Hadoop HA</title>
    <link href="http://www.guinguo.top/2016/06/05/%E5%91%A8%E6%80%BB%E7%BB%93-Hadoop-HA/"/>
    <id>http://www.guinguo.top/2016/06/05/周总结-Hadoop-HA/</id>
    <published>2016-06-05T15:26:23.000Z</published>
    <updated>2016-06-07T10:46:05.890Z</updated>
    
    <content type="html">&lt;p&gt;又到一年高考季，我也要考汇编了2333&lt;/p&gt;
&lt;p&gt;　　这一周一直在搞这个Hadoop的集群部署，花了我好久。。。&lt;br&gt;一来是没有经验，二来是机子配置不行，跑四台虚拟机很卡。&lt;/p&gt;
&lt;p&gt;好了，什么是Hadoop HA呢？ HA–&amp;gt;High Available 高可靠性。&lt;br&gt;简单的说就是之前的HDFS集群NameNode 存在单点故障（SPOF ），而Hadoop 2.0 提供了NameNode 跟SecondryNameNode，&lt;br&gt;一个处于Active状态，一个处于Sandby状态（准备），如果Active节点挂掉了，Sandby节点就会自动切换为Active节点，这种自动切换提供了可靠性，相对于Hadoop1.0来说。&lt;br&gt;&lt;img src=&quot;http://www.linuxidc.com/upload/2012_09/120913111826701.png&quot; alt=&quot;HA&quot;&gt;&lt;br&gt;因为网上教程够多了，而且很多网络环境都不同，所以具体的配置我就不详细讲，底部给出参考博客，要有的环境，需要先装好Zookeeper，我上一篇就有具体讲怎么安装。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;解压(我是使用源码自己编译的tar包–编了很久233)&lt;/li&gt;
&lt;li&gt;改配置文件&lt;pre&gt;&lt;code&gt;- core-site.xml
- hdfs-site.xml
- yarn-site.xml
- mapred-site.xml
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;启动各个服务&lt;br&gt;&lt;img src=&quot;http://7xsve9.com1.z0.glb.clouddn.com/ha1.jpeg&quot; alt=&quot;active&quot;&gt;&lt;br&gt;&lt;img src=&quot;http://7xsve9.com1.z0.glb.clouddn.com/ha2.jpeg&quot; alt=&quot;standby&quot;&gt;&lt;br&gt;&lt;img src=&quot;http://7xsve9.com1.z0.glb.clouddn.com/mr.jpeg&quot; alt=&quot;app&quot;&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;我主要说一下遇到的问题，可能每个人的环境不同，会遇到不同的问题，&lt;br&gt;有些很奇怪，所以参考参考即可~&lt;br&gt;`&lt;/p&gt;
&lt;p&gt;16/06/03 09:27:14 INFO mapreduce.Job: Job job_1464916750502_0001 failed with state FAILED due to: Application application_1464916750502_0001 failed 2 times due to Error launching appattempt_1464916750502_0001_000002. Got exception: org.apache.hadoop.yarn.exceptions.YarnException: Unauthorized request to start container.&lt;br&gt;This token is expired. current time is 1464918625523 found 1464917829554&lt;br&gt;Note: System times on machines may be out of sync. Check system time and time zones.&lt;br&gt;        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)&lt;br&gt;        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)&lt;br&gt;        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)&lt;br&gt;        at java.lang.reflect.Constructor.newInstance(Constructor.java:526)&lt;br&gt;        at org.apache.hadoop.yarn.api.records.impl.pb.SerializedExceptionPBImpl.instantiateException(SerializedExceptionPBImpl.java:168)&lt;br&gt;        at org.apache.hadoop.yarn.api.records.impl.pb.SerializedExceptionPBImpl.deSerialize(SerializedExceptionPBImpl.java:106)&lt;br&gt;        at org.apache.hadoop.yarn.server.resourcemanager.amlauncher.AMLauncher.launch(AMLauncher.java:123)&lt;br&gt;        at org.apache.hadoop.yarn.server.resourcemanager.amlauncher.AMLauncher.run(AMLauncher.java:254)&lt;br&gt;        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)&lt;br&gt;        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)&lt;br&gt;        at java.lang.Thread.run(Thread.java:745)&lt;br&gt;. Failing the application.&lt;br&gt;&lt;strong&gt;&lt;br&gt;集群的时间不一致，使用date查看，然后&lt;br&gt; date -s “10:28:00” 改为一样的时间，或者可以使用时间同步NTP。&lt;br&gt;&lt;a href=&quot;http://stackoverflow.com/questions/20257878/yarnexception-unauthorized-request-to-start-container&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;stackoverflow上的讨论&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;========================================&lt;/p&gt;
&lt;p&gt;16/06/03 10:42:38 INFO retry.RetryInvocationHandler: Exception while invoking getApplicationReport of class ApplicationClientProtocolPBClientImpl over rm2. Trying to fail over immediately.&lt;br&gt;java.net.ConnectException: Call From itr-mastertest01/192.168.191.200 to itr-mastertest02:23140 failed on connection exception: java.net.ConnectException: Connection refused; For more details see:  &lt;a href=&quot;http://wiki.apache.org/hadoop/ConnectionRefused&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://wiki.apache.org/hadoop/ConnectionRefused&lt;/a&gt;&lt;br&gt;        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)&lt;br&gt;        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)&lt;br&gt;        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)&lt;br&gt;        at java.lang.reflect.Constructor.newInstance(Constructor.java:526)&lt;br&gt;        at org.apache.hadoop.net.NetUtils.wrapWithMessage(NetUtils.java:791)&lt;br&gt;        at org.apache.hadoop.net.NetUtils.wrapException(NetUtils.java:731)&lt;br&gt;        at org.apache.hadoop.ipc.Client.call(Client.java:1472)&lt;br&gt;        at org.apache.hadoop.ipc.Client.call(Client.java:1399)&lt;br&gt;        …&lt;br&gt;        at org.apache.hadoop.util.RunJar.main(RunJar.java:136)&lt;br&gt;Caused by: java.net.ConnectException: Connection refused&lt;br&gt;        at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)&lt;br&gt;        at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)&lt;br&gt;        … 38 more&lt;br&gt;16/06/03 10:42:41 INFO client.ConfiguredRMFailoverProxyProvider: Failing over to rm1&lt;br&gt;16/06/03 10:42:41 INFO retry.RetryInvocationHandler: Exception while invoking getApplicationReport of class ApplicationClientProtocolPBClientImpl over rm1 after 1 fail over attempts. Trying to fail over after sleeping for 1731ms.&lt;br&gt;java.net.ConnectException: Call From itr-mastertest01/192.168.191.200 to itr-mastertest01:23140 failed on connection exception: java.net.ConnectException: Connection refused; For more details see:  &lt;a href=&quot;http://wiki.apache.org/hadoop/ConnectionRefused&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://wiki.apache.org/hadoop/ConnectionRefused&lt;/a&gt;&lt;br&gt;        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)&lt;br&gt;        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)&lt;br&gt;        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)&lt;br&gt;        …&lt;br&gt;Caused by: java.net.ConnectException: Connection refused&lt;br&gt;        at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)&lt;br&gt;        at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)&lt;br&gt;        at org.apache.hadoop.net.SocketIOWithTimeout.connect(SocketIOWithTimeout.java:206)&lt;br&gt;        at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:530)&lt;br&gt;        at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:494)&lt;br&gt;        at org.apache.hadoop.ipc.Client$Connection.setupConnection(Client.java:607)&lt;br&gt;        at org.apache.hadoop.ipc.Client$Connection.setupIOstreams(Client.java:705)&lt;br&gt;        at org.apache.hadoop.ipc.Client$Connection.access$2800(Client.java:368)&lt;br&gt;        at org.apache.hadoop.ipc.Client.getConnection(Client.java:1521)&lt;br&gt;        at org.apache.hadoop.ipc.Client.call(Client.java:1438)&lt;br&gt;        … 38 more&lt;br&gt;16/06/03 10:42:43 INFO client.ConfiguredRMFailoverProxyProvider: Failing over to rm2&lt;br&gt;16/06/03 10:42:43 INFO retry.RetryInvocationHandler: Exception while invoking getApplicationReport of class ApplicationClientProtocolPBClientImpl over rm2 after 2 fail over attempts. Trying to fail over after sleeping for 2844ms.&lt;br&gt;java.net.ConnectException: Call From itr-mastertest01/192.168.191.200 to itr-mastertest02:23140 failed on connection exception: java.net.ConnectException: Connection refused; For more details see:  &lt;a href=&quot;http://wiki.apache.org/hadoop/ConnectionRefused&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://wiki.apache.org/hadoop/ConnectionRefused&lt;/a&gt;&lt;br&gt;        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)….&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;由于一开始的配置出错，导致重复格式化集群，所以把core-site.xml里面配的temp目录删掉，重新格式化就可以解决。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;========================================&lt;/p&gt;
&lt;h2 id=&quot;&quot;&gt;&lt;a href=&quot;#&quot; class=&quot;headerlink&quot; title=&quot;`&quot;&gt;&lt;/a&gt;`&lt;/h2&gt;&lt;p&gt;`&lt;br&gt;&lt;strong&gt;下面是搭好后的单词count测试&lt;/strong&gt;&lt;br&gt;[root@itr-mastertest01 mapreduce]# hadoop jar hadoop-mapreduce-examples-2.6.0.jar wordcount /test /output&lt;br&gt;16/06/03 13:50:38 INFO client.ConfiguredRMFailoverProxyProvider: Failing over to rm2&lt;br&gt;16/06/03 13:50:42 INFO input.FileInputFormat: Total input paths to process : 1&lt;br&gt;16/06/03 13:50:42 INFO mapreduce.JobSubmitter: number of splits:1&lt;br&gt;16/06/03 13:50:44 INFO mapreduce.JobSubmitter: Submitting tokens for job: job_1464931988760_0001&lt;br&gt;16/06/03 13:51:06 INFO impl.YarnClientImpl: Submitted application application_1464931988760_0001&lt;br&gt;16/06/03 13:51:06 INFO mapreduce.Job: The url to track the job: &lt;a href=&quot;http://itr-mastertest02:23188/proxy/application_1464931988760_0001/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://itr-mastertest02:23188/proxy/application_1464931988760_0001/&lt;/a&gt;&lt;br&gt;16/06/03 13:51:06 INFO mapreduce.Job: Running job: job_1464931988760_0001&lt;br&gt;16/06/03 13:52:42 INFO mapreduce.Job: Job job_1464931988760_0001 running in uber mode : false&lt;br&gt;16/06/03 13:52:42 INFO mapreduce.Job:  map 0% reduce 0%&lt;br&gt;16/06/03 13:54:12 INFO mapreduce.Job:  map 100% reduce 0%&lt;br&gt;16/06/03 13:54:55 INFO mapreduce.Job:  map 100% reduce 100%&lt;br&gt;16/06/03 13:54:58 INFO mapreduce.Job: Job job_1464931988760_0001 completed successfully&lt;br&gt;16/06/03 13:55:00 INFO mapreduce.Job: Counters: 49&lt;br&gt;        File System Counters&lt;br&gt;                FILE: Number of bytes read=13986&lt;br&gt;                FILE: Number of bytes written=249557&lt;br&gt;                FILE: Number of read operations=0&lt;br&gt;                FILE: Number of large read operations=0&lt;br&gt;                FILE: Number of write operations=0&lt;br&gt;                HDFS: Number of bytes read=44278&lt;br&gt;                HDFS: Number of bytes written=12069&lt;br&gt;                HDFS: Number of read operations=6&lt;br&gt;                HDFS: Number of large read operations=0&lt;br&gt;                HDFS: Number of write operations=2&lt;br&gt;        Job Counters&lt;br&gt;                Launched map tasks=1&lt;br&gt;                Launched reduce tasks=1&lt;br&gt;                Data-local map tasks=1&lt;br&gt;                Total time spent by all maps in occupied slots (ms)=83913&lt;br&gt;                Total time spent by all reduces in occupied slots (ms)=40564&lt;br&gt;                Total time spent by all map tasks (ms)=83913&lt;br&gt;                Total time spent by all reduce tasks (ms)=40564&lt;br&gt;                Total vcore-seconds taken by all map tasks=83913&lt;br&gt;                Total vcore-seconds taken by all reduce tasks=40564&lt;br&gt;                Total megabyte-seconds taken by all map tasks=85926912&lt;br&gt;                Total megabyte-seconds taken by all reduce tasks=41537536&lt;br&gt;        Map-Reduce Framework&lt;br&gt;                Map input records=380&lt;br&gt;                Map output records=2860&lt;br&gt;                Map output bytes=55276&lt;br&gt;                Map output materialized bytes=13986&lt;br&gt;                Input split bytes=86&lt;br&gt;                Combine input records=2860&lt;br&gt;                Combine output records=495&lt;br&gt;                Reduce input groups=495&lt;br&gt;                Reduce shuffle bytes=13986&lt;br&gt;                Reduce input records=495&lt;br&gt;                Reduce output records=495&lt;br&gt;                Spilled Records=990&lt;br&gt;                Shuffled Maps =1&lt;br&gt;                Failed Shuffles=0&lt;br&gt;                Merged Map outputs=1&lt;br&gt;                GC time elapsed (ms)=584&lt;br&gt;                CPU time spent (ms)=22260&lt;br&gt;                Physical memory (bytes) snapshot=316039168&lt;br&gt;                Virtual memory (bytes) snapshot=1703337984&lt;br&gt;                Total committed heap usage (bytes)=136450048&lt;br&gt;        Shuffle Errors&lt;br&gt;                BAD_ID=0&lt;br&gt;                CONNECTION=0&lt;br&gt;                IO_ERROR=0&lt;br&gt;                WRONG_LENGTH=0&lt;br&gt;                WRONG_MAP=0&lt;br&gt;                WRONG_REDUCE=0&lt;br&gt;        File Input Format Counters&lt;br&gt;                Bytes Read=44192&lt;br&gt;        File Output Format Counters&lt;br&gt;                Bytes Written=12069&lt;/p&gt;
&lt;p&gt;===================================================&lt;/p&gt;
&lt;p&gt;`&lt;br&gt;主要参考–&lt;a href=&quot;http://www.itweet.cn/2015/07/10/hadoop-2.4.0-auto-HA/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;hadoop-2.4.0-auto-HA&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      集群部署Hadoop HA
    
    </summary>
    
      <category term="周总结" scheme="http://www.guinguo.top/categories/%E5%91%A8%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="Hadoop" scheme="http://www.guinguo.top/tags/Hadoop/"/>
    
  </entry>
  
  <entry>
    <title>汇编实现快排，选择，插入等5种常用排序</title>
    <link href="http://www.guinguo.top/2016/05/29/%E6%B1%87%E7%BC%96%E5%AE%9E%E7%8E%B0%E5%BF%AB%E6%8E%92%EF%BC%8C%E9%80%89%E6%8B%A9%EF%BC%8C%E6%8F%92%E5%85%A5%E7%AD%895%E7%A7%8D%E5%B8%B8%E7%94%A8%E6%8E%92%E5%BA%8F/"/>
    <id>http://www.guinguo.top/2016/05/29/汇编实现快排，选择，插入等5种常用排序/</id>
    <published>2016-05-29T15:05:43.000Z</published>
    <updated>2016-05-30T05:03:21.561Z</updated>
    
    <content type="html">&lt;h1 id=&quot;一、说明&quot;&gt;&lt;a href=&quot;#一、说明&quot; class=&quot;headerlink&quot; title=&quot;一、说明&quot;&gt;&lt;/a&gt;一、说明&lt;/h1&gt;&lt;p&gt;　　分析五种排序的实现方法，分析实现了插入排序，选择排序，冒泡排序，希尔排序，快速排序五种内部排序算法。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;思路：&lt;/strong&gt;结合C语言的算法，先把每个内部排序算法相对应的C语言版写出来，然后对每一步翻译成汇编语言。&lt;/p&gt;
&lt;h1 id=&quot;二、数据结构&quot;&gt;&lt;a href=&quot;#二、数据结构&quot; class=&quot;headerlink&quot; title=&quot;二、数据结构&quot;&gt;&lt;/a&gt;二、数据结构&lt;/h1&gt;&lt;p&gt;　　使用DW数组，加上子程序设计功能。&lt;/p&gt;
&lt;h1 id=&quot;三、算法描述&quot;&gt;&lt;a href=&quot;#三、算法描述&quot; class=&quot;headerlink&quot; title=&quot;三、算法描述&quot;&gt;&lt;/a&gt;三、算法描述&lt;/h1&gt;&lt;h2 id=&quot;一-插入排序&quot;&gt;&lt;a href=&quot;#一-插入排序&quot; class=&quot;headerlink&quot; title=&quot;(一)    插入排序&quot;&gt;&lt;/a&gt;(一)    插入排序&lt;/h2&gt;&lt;h3 id=&quot;1-JAVA代码：&quot;&gt;&lt;a href=&quot;#1-JAVA代码：&quot; class=&quot;headerlink&quot; title=&quot;1.    JAVA代码：&quot;&gt;&lt;/a&gt;1.    JAVA代码：&lt;/h3&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;figcaption&gt;&lt;span&gt;插入&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; i=&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;i&amp;lt;a.length;i++)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	 &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; t = a[i];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; j=i-&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;j&amp;gt;=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;j--)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(a[j]&amp;gt;t)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			a[j+&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;]=a[j];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		a[j+&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;]=t;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;2-分配变量到寄存器：&quot;&gt;&lt;a href=&quot;#2-分配变量到寄存器：&quot; class=&quot;headerlink&quot; title=&quot;2.    分配变量到寄存器：&quot;&gt;&lt;/a&gt;2.    分配变量到寄存器：&lt;/h3&gt;&lt;p&gt;i–&amp;gt;CX，    j–&amp;gt;BX,    CX用于外循环计数，BP用于内循环计数。&lt;/p&gt;
&lt;h3 id=&quot;3-翻译成-核心-汇编代码：&quot;&gt;&lt;a href=&quot;#3-翻译成-核心-汇编代码：&quot; class=&quot;headerlink&quot; title=&quot;3.    翻译成(核心)汇编代码：&quot;&gt;&lt;/a&gt;3.    翻译成(核心)汇编代码：&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;figcaption&gt;&lt;span&gt;asm&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;DISORT:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;;直接插入排序 Direct Insert Sort --&amp;gt;DISORT	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV BP,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DISORT_C1:	;外循环&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP BP,COUNT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JAE FINISH&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV BX,BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV AX,A[BX]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	SUB BX,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DISORT_C2:	;内循环&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP BX,0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JL DISORT_INSERT;INSERT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP A[BX],AX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JLE DISORT_INSERT;INSERT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV DX,A[BX]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV A[BX+2],DX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	SUB BX,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JMP DISORT_C2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DISORT_INSERT:	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ADD BX,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV A[BX],AX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CALL OUTP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ADD BP,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JMP DISORT_C1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;二-选择排序&quot;&gt;&lt;a href=&quot;#二-选择排序&quot; class=&quot;headerlink&quot; title=&quot;(二)    选择排序&quot;&gt;&lt;/a&gt;(二)    选择排序&lt;/h2&gt;&lt;h3 id=&quot;1-JAVA代码：-1&quot;&gt;&lt;a href=&quot;#1-JAVA代码：-1&quot; class=&quot;headerlink&quot; title=&quot;1.    JAVA代码：&quot;&gt;&lt;/a&gt;1.    JAVA代码：&lt;/h3&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;figcaption&gt;&lt;span&gt;选择&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; i=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;i&amp;lt;a.length;i++)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	 index = i;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; j=i+&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;j&amp;lt;a.lenth;j++)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(a[j]&amp;lt;a[index])&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			index= j;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(index!=i)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	Swap(a[index],a[i]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;2-分配变量到寄存器：-1&quot;&gt;&lt;a href=&quot;#2-分配变量到寄存器：-1&quot; class=&quot;headerlink&quot; title=&quot;2.    分配变量到寄存器：&quot;&gt;&lt;/a&gt;2.    分配变量到寄存器：&lt;/h3&gt;&lt;p&gt;i–&amp;gt;BP,    index–&amp;gt;SI,    a[index]–&amp;gt;AX,        j–&amp;gt;BX&lt;/p&gt;
&lt;h3 id=&quot;3-翻译成-核心-汇编代码&quot;&gt;&lt;a href=&quot;#3-翻译成-核心-汇编代码&quot; class=&quot;headerlink&quot; title=&quot;3.    翻译成(核心)汇编代码&quot;&gt;&lt;/a&gt;3.    翻译成(核心)汇编代码&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;figcaption&gt;&lt;span&gt;asm&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;;选择排序 Select Sort --&amp;gt;SSORT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SSORT_C1:;外循环&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP BP,COUNT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JAE FINISH	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV SI,BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV BX,BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ADD BX,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SSORT_C2:;内循环&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP BX,COUNT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JAE SSORT_CHG&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PUSH BX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV BX,SI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV AX,A[BX]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP BX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP A[BX],AX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JGE SSORT_CONT1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV SI,BX&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;三-冒泡排序&quot;&gt;&lt;a href=&quot;#三-冒泡排序&quot; class=&quot;headerlink&quot; title=&quot;(三)    冒泡排序&quot;&gt;&lt;/a&gt;(三)    冒泡排序&lt;/h2&gt;&lt;h3 id=&quot;1-JAVA代码：-2&quot;&gt;&lt;a href=&quot;#1-JAVA代码：-2&quot; class=&quot;headerlink&quot; title=&quot;1.    JAVA代码：&quot;&gt;&lt;/a&gt;1.    JAVA代码：&lt;/h3&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;figcaption&gt;&lt;span&gt;冒泡&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; i=a.length-&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;i&amp;gt;=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;i--)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; j=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;j&amp;lt;i;j++)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(a[j]&amp;gt;a[j+&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;])&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			swap(a[j],a[j+&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;2-分配变量到寄存器：-2&quot;&gt;&lt;a href=&quot;#2-分配变量到寄存器：-2&quot; class=&quot;headerlink&quot; title=&quot;2.    分配变量到寄存器：&quot;&gt;&lt;/a&gt;2.    分配变量到寄存器：&lt;/h3&gt;&lt;p&gt;i–&amp;gt;BP,    length–&amp;gt;CX,    a[j+1]–&amp;gt;AX,        j–&amp;gt;BX&lt;/p&gt;
&lt;h3 id=&quot;3-翻译成-核心-汇编代码-1&quot;&gt;&lt;a href=&quot;#3-翻译成-核心-汇编代码-1&quot; class=&quot;headerlink&quot; title=&quot;3.    翻译成(核心)汇编代码&quot;&gt;&lt;/a&gt;3.    翻译成(核心)汇编代码&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;figcaption&gt;&lt;span&gt;asm&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;BBSORT_C1: ;外循环&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP CX,1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JLE FINISH&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV SI,BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	SUB SI,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV BX,0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BBSORT_C2: ;内循环&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP BX,SI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JA BBSORT_CONT1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV AX,A[BX]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP AX,A[BX+2]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JLE BBSORT_CONT2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	XCHG AX,A[BX+2]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV A[BX],AX&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;四-希尔排序&quot;&gt;&lt;a href=&quot;#四-希尔排序&quot; class=&quot;headerlink&quot; title=&quot;(四)    希尔排序&quot;&gt;&lt;/a&gt;(四)    希尔排序&lt;/h2&gt;&lt;h3 id=&quot;1-JAVA代码：-3&quot;&gt;&lt;a href=&quot;#1-JAVA代码：-3&quot; class=&quot;headerlink&quot; title=&quot;1.    JAVA代码：&quot;&gt;&lt;/a&gt;1.    JAVA代码：&lt;/h3&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;figcaption&gt;&lt;span&gt;希尔&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; gap=a.length/&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;;gap&amp;gt;&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;i/=&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; j=gap;j&amp;lt;a.length;j++)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(a[j]&amp;lt; a[j-gap])&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			temp =a[j];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;							&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; k=j-gap;k&amp;gt;=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&amp;amp;&amp;amp;a[j]&amp;gt;temp;k-=gap)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a[k+gap]=a[k];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;							&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a[k+gap]=temp;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;2-分配变量到寄存器：-3&quot;&gt;&lt;a href=&quot;#2-分配变量到寄存器：-3&quot; class=&quot;headerlink&quot; title=&quot;2.    分配变量到寄存器：&quot;&gt;&lt;/a&gt;2.    分配变量到寄存器：&lt;/h3&gt;&lt;p&gt;j–&amp;gt;BP,    gap–&amp;gt;SI,    temp–&amp;gt;AX,    K–&amp;gt;BX&lt;/p&gt;
&lt;h3 id=&quot;3-翻译成-核心-汇编代码-2&quot;&gt;&lt;a href=&quot;#3-翻译成-核心-汇编代码-2&quot; class=&quot;headerlink&quot; title=&quot;3.    翻译成(核心)汇编代码&quot;&gt;&lt;/a&gt;3.    翻译成(核心)汇编代码&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;figcaption&gt;&lt;span&gt;asm&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;HESORT_C1: ;外循环&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP SI,0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JBE FINISH&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV DI,SI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	SAL DI,1;STEP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV BP,DI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;HESORT_C2: ;内循环&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP BP,COUNT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JGE HESORT_CONT1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PUSH BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	SUB BP,DI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV DX,A[BP]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP A[BP],DX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JGE HESORT_CONT2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV AX,A[BP]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV BX,BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	SUB BX,DI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;HESORT_C3: ;第三层循环&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP BX,0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JL HESORT_REP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP A[BX],AX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JLE HESORT_REP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV DX,A[BX]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PUSH SI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV SI,DI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV A[BX+SI],DX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP SI&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;五-快速排序&quot;&gt;&lt;a href=&quot;#五-快速排序&quot; class=&quot;headerlink&quot; title=&quot;(五)    快速排序&quot;&gt;&lt;/a&gt;(五)    快速排序&lt;/h2&gt;&lt;h3 id=&quot;1-JAVA代码：-4&quot;&gt;&lt;a href=&quot;#1-JAVA代码：-4&quot; class=&quot;headerlink&quot; title=&quot;1.    JAVA代码：&quot;&gt;&lt;/a&gt;1.    JAVA代码：&lt;/h3&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;figcaption&gt;&lt;span&gt;快排&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Qsort(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; a[],&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; l,&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; h)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(l&amp;lt;h)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		Int posi = getP(a,l,h);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		Qsort(a,l,posi-&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		Qsort(a,posi+&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,h);	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;getP(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; a[],&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; l,&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; h)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; p = a[l];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; temp = l;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt;(l&amp;lt;h)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt;(l&amp;lt;h&amp;amp;&amp;amp;a[h]&amp;gt;=p)—h;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	a[l]=a[h]; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt;(l&amp;lt;h&amp;amp;&amp;amp;a[l]&amp;lt;=p)++l;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	a[h]=a[l];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a[l]=temp;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; low;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;2-分配变量到寄存器：-4&quot;&gt;&lt;a href=&quot;#2-分配变量到寄存器：-4&quot; class=&quot;headerlink&quot; title=&quot;2.    分配变量到寄存器：&quot;&gt;&lt;/a&gt;2.    分配变量到寄存器：&lt;/h3&gt;&lt;p&gt;h–&amp;gt;BP,    posi–&amp;gt;DI,        temp–&amp;gt;AX,    l–&amp;gt;BX&lt;/p&gt;
&lt;h3 id=&quot;3-翻译成-核心-汇编代码-3&quot;&gt;&lt;a href=&quot;#3-翻译成-核心-汇编代码-3&quot; class=&quot;headerlink&quot; title=&quot;3.    翻译成(核心)汇编代码&quot;&gt;&lt;/a&gt;3.    翻译成(核心)汇编代码&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;figcaption&gt;&lt;span&gt;asm&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;QsortC1:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP BX,BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JGE QsortC2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CALL GetP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CALL OUTP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PUSH DI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PUSH BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV BP,DI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	SUB BP,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CALL Qsort&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP DI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PUSH BX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV BX,DI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ADD BX,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CALL Qsort&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;QsortC2:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP DI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP BX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	RET	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GetP_W1:			;获取基准的第二个while循环&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP BX,BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JGE GetPCHG1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP A[BP],AX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JL GetPCHG1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	SUB BP,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JMP GetP_W1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GetPCHG1:		;第一个while的赋值&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV CX,A[BP]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV A[BX],CX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GetP_W2:			;获取基准的第三个while循环&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP BX,BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JAE GetPCHG2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP A[BX],AX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JG GetPCHG2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ADD BX,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JMP GetP_W2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GetPCHG2:		;第二个while的赋值&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV CX,A[BX]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV A[BP],CX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JMP GetP_W0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;四、效果与测试&quot;&gt;&lt;a href=&quot;#四、效果与测试&quot; class=&quot;headerlink&quot; title=&quot;四、效果与测试&quot;&gt;&lt;/a&gt;四、效果与测试&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;以下测试样例基于我校OJ官网数据结构题目。因此本实验的输出结果不单单只是排序后的结果，每一次排序完的结果都会输出出来，可以参考对照。&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;插入排序：&quot;&gt;&lt;a href=&quot;#插入排序：&quot; class=&quot;headerlink&quot; title=&quot;插入排序：&quot;&gt;&lt;/a&gt;插入排序：&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;http://7xsve9.com1.z0.glb.clouddn.com/insert2.jpg&quot; alt=&quot;快速排序&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;选择排序：&quot;&gt;&lt;a href=&quot;#选择排序：&quot; class=&quot;headerlink&quot; title=&quot;选择排序：&quot;&gt;&lt;/a&gt;选择排序：&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;http://7xsve9.com1.z0.glb.clouddn.com/select2.jpg&quot; alt=&quot;快速排序&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;冒泡排序：&quot;&gt;&lt;a href=&quot;#冒泡排序：&quot; class=&quot;headerlink&quot; title=&quot;冒泡排序：&quot;&gt;&lt;/a&gt;冒泡排序：&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;http://7xsve9.com1.z0.glb.clouddn.com/bubble2.jpg&quot; alt=&quot;快速排序&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;希尔排序：&quot;&gt;&lt;a href=&quot;#希尔排序：&quot; class=&quot;headerlink&quot; title=&quot;希尔排序：&quot;&gt;&lt;/a&gt;希尔排序：&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;http://7xsve9.com1.z0.glb.clouddn.com/HELL2.jpg&quot; alt=&quot;快速排序&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;快速排序：&quot;&gt;&lt;a href=&quot;#快速排序：&quot; class=&quot;headerlink&quot; title=&quot;快速排序：&quot;&gt;&lt;/a&gt;快速排序：&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;http://7xsve9.com1.z0.glb.clouddn.com/QSort2.jpg&quot; alt=&quot;快速排序&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;五、问题分析&quot;&gt;&lt;a href=&quot;#五、问题分析&quot; class=&quot;headerlink&quot; title=&quot;五、问题分析&quot;&gt;&lt;/a&gt;五、问题分析&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;前面四种排序算法基本思路都是使用循环然后交换数值，然而快速排序采用递归思想，经过仔细分析，使用子程序思想解决递归调用问题。&lt;/li&gt;
&lt;li&gt;某些排序算法涉及多重循环，在其中的判断跳转写错，导致死循环，或者根本没有执行它，经过debug调试解决。&lt;/li&gt;
&lt;li&gt;在进行判断的时候，有符号的比较跟无符号比较混淆，导致有些判断出错，经过debug调试才解决问题。&lt;/li&gt;
&lt;li&gt;在调用子程序的时候，没有保存好现场，导致调用后出现死循环，经过分析然后把相对应的寄存器入栈即可解决。&lt;/li&gt;
&lt;li&gt;在分析希尔排序时，由于它使用不同的步长来进行插入排序，经过思考分析，决定用一个寄存器记录步长。&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&quot;六、完整代码-可执行&quot;&gt;&lt;a href=&quot;#六、完整代码-可执行&quot; class=&quot;headerlink&quot; title=&quot;六、完整代码(可执行)&quot;&gt;&lt;/a&gt;六、完整代码(可执行)&lt;/h1&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;figcaption&gt;&lt;span&gt;sort&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;127&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;129&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;130&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;131&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;132&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;133&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;134&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;135&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;136&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;137&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;138&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;139&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;140&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;141&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;142&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;143&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;144&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;145&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;146&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;147&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;148&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;149&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;150&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;151&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;152&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;153&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;154&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;155&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;156&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;157&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;158&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;159&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;160&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;161&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;162&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;163&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;164&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;165&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;166&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;167&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;168&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;169&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;170&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;171&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;172&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;173&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;174&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;175&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;176&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;177&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;178&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;179&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;180&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;181&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;182&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;183&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;184&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;185&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;186&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;187&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;188&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;189&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;190&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;191&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;193&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;194&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;195&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;196&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;197&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;198&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;199&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;200&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;201&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;202&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;203&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;204&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;205&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;206&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;207&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;208&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;209&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;210&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;211&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;212&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;213&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;214&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;215&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;216&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;217&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;218&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;219&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;220&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;221&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;222&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;223&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;224&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;225&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;226&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;227&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;228&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;229&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;230&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;231&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;232&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;233&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;234&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;235&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;236&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;237&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;238&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;239&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;240&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;241&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;242&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;243&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;244&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;245&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;246&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;247&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;248&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;249&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;250&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;251&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;252&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;253&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;254&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;255&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;256&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;257&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;258&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;259&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;260&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;261&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;262&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;263&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;264&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;265&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;266&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;267&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;268&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;269&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;270&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;271&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;272&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;273&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;274&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;275&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;276&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;277&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;278&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;279&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;280&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;281&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;282&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;283&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;284&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;285&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;286&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;287&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;288&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;289&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;290&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;291&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;292&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;293&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;294&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;295&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;296&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;297&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;298&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;299&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;300&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;301&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;302&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;303&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;304&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;305&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;306&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;307&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;308&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;309&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;310&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;311&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;312&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;313&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;314&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;315&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;316&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;317&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;318&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;319&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;320&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;321&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;322&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;323&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;324&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;325&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;326&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;327&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;328&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;329&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;330&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;331&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;332&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;333&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;334&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;335&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;336&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;337&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;338&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;339&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;340&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;341&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;342&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;343&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;344&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;345&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;346&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;347&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;348&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;349&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;350&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;351&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;352&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;353&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;354&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;355&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;356&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;357&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;358&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;359&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;360&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;361&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;362&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;363&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;364&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;365&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;366&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;367&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;368&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;369&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;370&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;371&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;372&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;373&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;374&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;375&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;376&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;377&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;378&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;379&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;380&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;381&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;382&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;383&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;384&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;385&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;386&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;387&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;388&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;389&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;390&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;391&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;392&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;393&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;394&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;395&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;396&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;397&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;398&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;399&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;400&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;;完成快速排序 5/5 TODO DOC&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;S0	SEGMENT STACK&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	DW 30H DUP(?)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TOP	LABEL WORD&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;S0	ENDS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;S1	SEGMENT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;A	DW 5,4,8,0,9,3,2,6,7,1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;COUNT	DW ($-A) ;元素个数*2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;HCHH	DB 0DH,0AH,24H ;回车换行&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;FG		DB 2CH,20H,24H ;逗号，空格&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;TS		DB &amp;apos;Please choose the sort type.&amp;apos;,0DH,0AH&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		DB &amp;apos;1: Insert, 2: Select, 3: Bubble, 4: Shell, 5: Quick. (Sort)&amp;apos;,0DH,0AH,24H&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;S1	ENDS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;S2	SEGMENT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ASSUME SS:S0,DS:S1,CS:S2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MAIN	PROC FAR&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV AX,S0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV SS,AX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	LEA SP,TOP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV AX,S1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV DS,AX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV ES,AX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	XOR AX,AX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CALL OUTP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	LEA DX,TS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV AH,9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	INT 21H&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV AH,1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	INT 21H&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CALL CRLF&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP AL,31H&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JE DISORT;插入排序&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP AL,32H&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JE SSORT;选择排序&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP AL,33H&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JE BBSORT;冒泡排序&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP AL,34H&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JE HESORT;希尔排序&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP AL,35H&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JE QQSORT;快速排序&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JMP FINISH&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DISORT:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;;直接插入排序 Direct Insert Sort --&amp;gt;DISORT	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV BP,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DISORT_C1:	;外循环&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP BP,COUNT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JAE FINISH&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV BX,BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV AX,A[BX]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	SUB BX,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DISORT_C2:	;内循环&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP BX,0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JL DISORT_INSERT;INSERT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP A[BX],AX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JLE DISORT_INSERT;INSERT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV DX,A[BX]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV A[BX+2],DX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	SUB BX,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JMP DISORT_C2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DISORT_INSERT:	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ADD BX,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV A[BX],AX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CALL OUTP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ADD BP,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JMP DISORT_C1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;;选择排序 Select Sort --&amp;gt;SSORT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SSORT:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	XOR SI,SI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	XOR BP,BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	XOR CX,CX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV CX,COUNT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	SHR CX,1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SSORT_C1:;外循环&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP BP,COUNT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JAE FINISH	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV SI,BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV BX,BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ADD BX,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SSORT_C2:;内循环&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP BX,COUNT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JAE SSORT_CHG&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PUSH BX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV BX,SI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV AX,A[BX]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP BX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP A[BX],AX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JGE SSORT_CONT1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV SI,BX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SSORT_CONT1:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ADD BX,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JMP SSORT_C2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SSORT_CHG:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP SI,BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JE SSORT_CONT2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV BX,BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV DI,SI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV AX,A[BX]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV DX,A[DI]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	XCHG A[BX],DX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV A[DI],AX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SSORT_CONT2:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CALL OUTP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ADD BP,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JMP SSORT_C1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;;冒泡排序， Bubble Sort --&amp;gt;BBSORT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BBSORT:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	XOR BP,BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	XOR CX,CX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV CX,COUNT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	SHR CX,1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV BP,COUNT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	SUB BP,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BBSORT_C1: ;外循环&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP CX,1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JLE FINISH&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV SI,BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	SUB SI,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV BX,0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BBSORT_C2: ;内循环&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP BX,SI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JA BBSORT_CONT1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV AX,A[BX]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP AX,A[BX+2]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JLE BBSORT_CONT2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	XCHG AX,A[BX+2]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV A[BX],AX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BBSORT_CONT2:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ADD BX,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JMP BBSORT_C2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BBSORT_CONT1:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CALL OUTP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	SUB BP,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	DEC CX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JMP BBSORT_C1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;;希尔排序， Shell Sort --&amp;gt;HESORT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;HESORT:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	XOR SI,SI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	XOR BP,BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	XOR BX,BX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV SI,COUNT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	SHR SI,1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	SHR SI,1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;HESORT_C1: ;外循环&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP SI,0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JBE FINISH&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV DI,SI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	SAL DI,1;STEP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV BP,DI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;HESORT_C2: ;内循环&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP BP,COUNT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JGE HESORT_CONT1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PUSH BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	SUB BP,DI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV DX,A[BP]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP A[BP],DX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JGE HESORT_CONT2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV AX,A[BP]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV BX,BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	SUB BX,DI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;HESORT_C3: ;第三层循环&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP BX,0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JL HESORT_REP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP A[BX],AX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JLE HESORT_REP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV DX,A[BX]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PUSH SI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV SI,DI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV A[BX+SI],DX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP SI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;HESORT_CONT3:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	SUB BX,DI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JMP HESORT_C3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;HESORT_REP:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PUSH SI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV SI,DI	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV A[BX+SI],AX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP SI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;HESORT_CONT2:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ADD BP,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JMP HESORT_C2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;HESORT_CONT1:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CALL OUTP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	SHR SI,1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JMP HESORT_C1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;;快速排序， Quick Sort  --&amp;gt; QQSORT	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;QQSORT:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV BX,0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV BP,COUNT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	SUB BP,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CALL Qsort&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;FINISH:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JMP EXIT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;EXIT:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV AH,4CH&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	INT 21H&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MAIN	ENDP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Qsort PROC NEAR ;快排递归程序&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PUSH BX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PUSH BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PUSH DI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;QsortC1:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP BX,BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JGE QsortC2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CALL GetP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CALL OUTP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PUSH DI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PUSH BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV BP,DI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	SUB BP,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CALL Qsort&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP DI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PUSH BX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV BX,DI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ADD BX,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CALL Qsort&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;QsortC2:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP DI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP BX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	RET&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Qsort	ENDP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GetP PROC NEAR ;快排获取基准数子程序&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PUSH AX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PUSH DX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PUSH BX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PUSH BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV AX,A[BX]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV DX,AX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GetP_W0:			;获取基准的第一个while循环&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP BX,BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JGE GetPC1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GetP_W1:			;获取基准的第二个while循环&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP BX,BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JGE GetPCHG1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP A[BP],AX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JL GetPCHG1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	SUB BP,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JMP GetP_W1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GetPCHG1:		;第一个while的赋值&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV CX,A[BP]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV A[BX],CX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GetP_W2:			;获取基准的第三个while循环&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP BX,BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JAE GetPCHG2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP A[BX],AX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JG GetPCHG2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ADD BX,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JMP GetP_W2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GetPCHG2:		;第二个while的赋值&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV CX,A[BX]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV A[BP],CX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JMP GetP_W0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GetPC1:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV A[BX],DX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV DI,BX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP BX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP DX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP AX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	RET&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GetP ENDP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;OUTP PROC NEAR&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;;这段程序是用来输出数组里面的内容的，用逗号，空格分隔，最后输出回车换行&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PUSH AX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PUSH BX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PUSH CX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PUSH DX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PUSH BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PUSH DI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PUSH SI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV BX,0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV CX,COUNT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	LEA SI,A&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	SHR CX,1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;OUTP_PRINT:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV BX,[SI]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV AX,BX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	OR AX,AX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JNS OUTP_ZS;ZS表示-&amp;gt;正数&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV AH,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV DL,2DH&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	INT 21H&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	NEG BX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;OUTP_ZS:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV AX,BX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	XOR BP,BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;OUTP_L1:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	XOR DX,DX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV DI,10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	DIV DI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	INC BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PUSH DX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP AX,0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JNE OUTP_L1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;OUTP_L2:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP DX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ADD DL,30H&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV AH,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	INT 21H&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	DEC BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JNE OUTP_L2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	;, 分隔&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	CMP CX,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	JS  OUTP_L3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV AH,9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	LEA DX,FG&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	INT 21H&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;OUTP_L3:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	ADD SI,2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	LOOP OUTP_PRINT&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	;回车换行&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	LEA DX,HCHH&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV AH,9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	INT 21H&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP SI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP DI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP BP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP DX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP CX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP BX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP AX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	RET&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;OUTP ENDP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CRLF PROC NEAR ;回车换行&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PUSH DX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	PUSH AX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	LEA DX,HCHH&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	MOV AH,9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	INT 21H&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP AX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	POP DX&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	RET&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CRLF ENDP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;S2	ENDS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	END MAIN&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
    
    <summary type="html">
    
      汇编分析实现5种常用内部排序算法
    
    </summary>
    
      <category term="周总结" scheme="http://www.guinguo.top/categories/%E5%91%A8%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="ASM" scheme="http://www.guinguo.top/tags/ASM/"/>
    
  </entry>
  
  <entry>
    <title>Zookeeper集群安装于部署</title>
    <link href="http://www.guinguo.top/2016/05/26/Zookeeper%E9%9B%86%E7%BE%A4%E5%AE%89%E8%A3%85%E4%BA%8E%E9%83%A8%E7%BD%B2/"/>
    <id>http://www.guinguo.top/2016/05/26/Zookeeper集群安装于部署/</id>
    <published>2016-05-26T06:48:17.000Z</published>
    <updated>2016-06-07T10:47:03.679Z</updated>
    
    <content type="html">&lt;p&gt;&lt;img src=&quot;http://7xsve9.com1.z0.glb.clouddn.com/zk.jpg&quot; alt=&quot;zookeeper&quot;&gt;&lt;/p&gt;
&lt;p&gt;Zookeeper我就不多做介绍了，具体请看&lt;br&gt;&lt;a href=&quot;https://zh.wikipedia.org/zh/Apache_ZooKeeper&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;维基百科&lt;/a&gt;，或者&lt;a href=&quot;https://wiki.apache.org/hadoop/ZooKeeper&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;官网介绍&lt;/a&gt;&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;1、准备环境&quot;&gt;&lt;a href=&quot;#1、准备环境&quot; class=&quot;headerlink&quot; title=&quot;1、准备环境&quot;&gt;&lt;/a&gt;1、准备环境&lt;/h2&gt;&lt;h3 id=&quot;安装jdk，安装jdk，安装jdk&quot;&gt;&lt;a href=&quot;#安装jdk，安装jdk，安装jdk&quot; class=&quot;headerlink&quot; title=&quot;安装jdk，安装jdk，安装jdk&quot;&gt;&lt;/a&gt;安装jdk，安装jdk，安装jdk&lt;/h3&gt;&lt;p&gt;　　重要的事情说三遍，因为我就是没有装，导致弄了好久老是报错&lt;br&gt;使用zkServer.sh status 看出角色时报Error contacting service. It is probably not running.的错误&lt;br&gt;&lt;img src=&quot;/images/acmusume/01.png&quot; height=&quot;50px&quot; ,=&quot;&quot; width=&quot;50px&quot; style=&quot;margin:0 0&quot;&gt;&lt;br&gt;　　因为Zookeeper是java写的，所以需要java的环境。请到oracle官网下载最新版的jdk，并且解压安装，解压的话最好放到/usr/lib/jdk/下&lt;br&gt;，接着到Apache官网下载 &lt;a href=&quot;http://www.apache.org/dyn/closer.cgi/zookeeper/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Zookeeper&lt;/a&gt;。&lt;br&gt;　　然后，修改hosts文件，把主机跟ip地址映射起来，&lt;br&gt;&lt;img src=&quot;http://7xsve9.com1.z0.glb.clouddn.com/hosts.jpg&quot; alt=&quot;hosts&quot;&gt;&lt;br&gt;如果嫌麻烦的话，可以不用这一步，待会配置是直接填ip就行&lt;/p&gt;
&lt;h2 id=&quot;2、解压安装&quot;&gt;&lt;a href=&quot;#2、解压安装&quot; class=&quot;headerlink&quot; title=&quot;2、解压安装&quot;&gt;&lt;/a&gt;2、解压安装&lt;/h2&gt;&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;tar -zxvf zookeeper-3.4.6.tar.gz
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;h2 id=&quot;3、复制配置文件&quot;&gt;&lt;a href=&quot;#3、复制配置文件&quot; class=&quot;headerlink&quot; title=&quot;3、复制配置文件&quot;&gt;&lt;/a&gt;3、复制配置文件&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;cp /root/zookeeper-3.4.6/conf/zoo_sample.cfg /root/zookeeper-3.4.6/conf/zoo.cfg&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;4、修改配置文件zoo-cfg&quot;&gt;&lt;a href=&quot;#4、修改配置文件zoo-cfg&quot; class=&quot;headerlink&quot; title=&quot;4、修改配置文件zoo.cfg&quot;&gt;&lt;/a&gt;4、修改配置文件zoo.cfg&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;#建立data文件夹，用于存放数据的&lt;br&gt;mkdir /root/zookeeper-3.4.6/data&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim /root/zookeeper-3.4.6/conf/zoo.cfg 
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;#把下面对应的值改了就行&lt;br&gt;dataDir=/root/zookeeper-3.4.6/data&lt;/p&gt;
&lt;p&gt;server.1=itr-mastertest01:2888:3888&lt;br&gt;server.2=itr-mastertest02:2888:3888&lt;br&gt;server.3=itr-nodetest01:2888:3888&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;5、进入data目录&quot;&gt;&lt;a href=&quot;#5、进入data目录&quot; class=&quot;headerlink&quot; title=&quot;5、进入data目录&quot;&gt;&lt;/a&gt;5、进入data目录&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;cd /root/zookeeper-3.4.6/data&lt;br&gt;vim myid&lt;br&gt;1&lt;/p&gt;
&lt;p&gt;#1,代表第server.1台server&lt;br&gt;!wq&lt;/p&gt;
&lt;p&gt;#保存退出&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;6、复制到其他集群服务器上&quot;&gt;&lt;a href=&quot;#6、复制到其他集群服务器上&quot; class=&quot;headerlink&quot; title=&quot;6、复制到其他集群服务器上&quot;&gt;&lt;/a&gt;6、复制到其他集群服务器上&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;scp -rq /root/zookeeper-3.4.6 itr-mastertest02:/root/&lt;br&gt;scp -rq /root/zookeeper-3.4.6 nodetest01:/root/&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;7、修改myid的值&quot;&gt;&lt;a href=&quot;#7、修改myid的值&quot; class=&quot;headerlink&quot; title=&quot;7、修改myid的值&quot;&gt;&lt;/a&gt;7、修改myid的值&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;[root@mastertest02 data]# vim myid &lt;/p&gt;
&lt;p&gt;#写入2&lt;br&gt;[root@server3 data]# vi myid&lt;/p&gt;
&lt;p&gt;#写入3&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;8、启动zookeeper&quot;&gt;&lt;a href=&quot;#8、启动zookeeper&quot; class=&quot;headerlink&quot; title=&quot;8、启动zookeeper&quot;&gt;&lt;/a&gt;8、启动zookeeper&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;[root@itr-mastertest01 ~]# zk zookeeper-3.4.6/bin/zkServer.sh start&lt;br&gt;[root@itr-mastertest02 ~]# zk zookeeper-3.4.6/bin/zkServer.sh start&lt;br&gt;[root@itr-nodetest01 ~]# zk zookeeper-3.4.6/bin/zkServer.sh start&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;9、查看状态&quot;&gt;&lt;a href=&quot;#9、查看状态&quot; class=&quot;headerlink&quot; title=&quot;9、查看状态&quot;&gt;&lt;/a&gt;9、查看状态&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;[root@itr-mastertest01 ~]# zk zookeeper-3.4.6/bin/zkServer.sh status&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;http://7xsve9.com1.z0.glb.clouddn.com/zk1.jpg&quot; alt=&quot;itr-mastertest01&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;http://7xsve9.com1.z0.glb.clouddn.com/zk2.jpg&quot; alt=&quot;itr-mastertest02&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;http://7xsve9.com1.z0.glb.clouddn.com/zk3.jpg&quot; alt=&quot;itr-mastertest02&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      Zookeeper-cluster-deploy
    
    </summary>
    
      <category term="Hadoop" scheme="http://www.guinguo.top/categories/Hadoop/"/>
    
    
      <category term="Hadoop" scheme="http://www.guinguo.top/tags/Hadoop/"/>
    
      <category term="Zookeeper" scheme="http://www.guinguo.top/tags/Zookeeper/"/>
    
  </entry>
  
  <entry>
    <title>VMware桥接模式下无法ping通网关</title>
    <link href="http://www.guinguo.top/2016/05/18/VMware%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F%E4%B8%8B%E6%97%A0%E6%B3%95ping%E9%80%9A%E7%BD%91%E5%85%B3/"/>
    <id>http://www.guinguo.top/2016/05/18/VMware桥接模式下无法ping通网关/</id>
    <published>2016-05-18T01:55:14.000Z</published>
    <updated>2016-05-18T03:08:46.198Z</updated>
    
    <content type="html">&lt;p&gt;　　以下情况是发生在校园网或者单一网络环境下。如果你遇到同样的问题，并且是校园网，那可能跟我遇到同样的问题了。而且大神远程帮我配了很久，最后发现是网络环境问题，&lt;del&gt;好尴尬&lt;/del&gt;&lt;br&gt;&lt;img src=&quot;/images/acmusume/01.png&quot; height=&quot;50px&quot; ,=&quot;&quot; width=&quot;50px&quot; style=&quot;margin:0 0&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;昨天在配置一台Centos6的虚拟机网卡的时候，遇到的问题。虚拟机无法ping 通网关，也无法ping通宿主机(我本机)，也无法ping通外网。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;首先检查网卡属性是否正常选中了vmware bridge功能。&lt;/li&gt;
&lt;li&gt;vm workstation全局网络配置是否配置正常。&lt;/li&gt;
&lt;li&gt;这两项的网卡、bridge都要正常对应。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;我照着教程配置，如下：&lt;/p&gt;
&lt;h2 id=&quot;有问题的&quot;&gt;&lt;a href=&quot;#有问题的&quot; class=&quot;headerlink&quot; title=&quot;有问题的&quot;&gt;&lt;/a&gt;有问题的&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;cat /etc/sysconfig/network-scripts/ifcfg-eth0&lt;br&gt;&lt;img src=&quot;http://7xsve9.com1.z0.glb.clouddn.com/ip1.jpg&quot; alt=&quot;ifcfg-eth0&quot;&gt;&lt;br&gt;左边是虚拟机的，右边是我本机的网卡信息&lt;br&gt;默认网关都是172.16.85.254&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;保存之后，重启网卡。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;/etc/init.d/network restart&lt;br&gt;&lt;img src=&quot;http://7xsve9.com1.z0.glb.clouddn.com/ip2.jpg&quot; alt=&quot;ifcfg-eth0&quot;&gt;&lt;br&gt;倒数第四行是我的一个备份文件来着，不用管它&lt;/p&gt;
&lt;p&gt;查看ip信息&lt;br&gt;&lt;img src=&quot;http://7xsve9.com1.z0.glb.clouddn.com/ip3.jpg&quot; alt=&quot;ifcfg-eth0&quot;&gt;&lt;br&gt;好了，是我配的172.16.85.200&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;先看一下我本机能否ping通虚拟机跟网关&lt;br&gt;&lt;img src=&quot;http://7xsve9.com1.z0.glb.clouddn.com/ip4.jpg&quot; alt=&quot;ifcfg-eth0&quot;&gt;&lt;br&gt;本机正常~&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;再看一下虚拟机能否ping回来&lt;br&gt;&lt;img src=&quot;http://7xsve9.com1.z0.glb.clouddn.com/ip5.jpg&quot; alt=&quot;ifcfg-eth0&quot;&gt;&lt;br&gt;ping通自己，正常&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xsve9.com1.z0.glb.clouddn.com/ip6.jpg&quot; alt=&quot;ifcfg-eth0&quot;&gt;&lt;br&gt;&lt;strong&gt;但是，ping不通我本机的ip地址&lt;/strong&gt;难道是出口网关的问题？&lt;br&gt;我们ping一下它&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xsve9.com1.z0.glb.clouddn.com/ip7.jpg&quot; alt=&quot;ifcfg-eth0&quot;&gt;&lt;br&gt;oh~ 真的是这样。&lt;br&gt;　　好吧。到了这里，我大概猜到原因了，因为&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;想起了我之前遇到的一个问题，同样也是在虚拟机(Centos7桌面版)，
我本机连接校园网WIFI，已登录账号。然后虚拟机用桥接方式上网，
但是，虚拟机一打开网页，提示要登录，但是我本机已登录，所以本机就被挤下线了
就是虚拟机里面登录了，本机被踢下线了。
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;我们的校园网同一账号只允许一个上线&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;所以我虚拟机用桥接连到宿主机(我本机)，但是，它没有被分配ip所以上不了网，配置静态ip也不行，&lt;/strong&gt;&lt;br&gt;&lt;strong&gt;这就就好比我连接了校园网WiFi(无需密码可以连接的)，但是不登录，想自己配ip上网，肯定不行啊~。&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;正常的&quot;&gt;&lt;a href=&quot;#正常的&quot; class=&quot;headerlink&quot; title=&quot;正常的&quot;&gt;&lt;/a&gt;正常的&lt;/h2&gt;&lt;p&gt;所谓正常的，就是连接到WiFi，不是那种一个账号分配一个ip的网络，比如说校园网。&lt;br&gt;好了，我连接到一个WiFi环境下&lt;br&gt;做如下配置。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;img src=&quot;http://7xsve9.com1.z0.glb.clouddn.com/ip9.jpg&quot; alt=&quot;ifcfg-eth0&quot;&gt;&lt;br&gt;重启网卡。&lt;br&gt;&lt;img src=&quot;http://7xsve9.com1.z0.glb.clouddn.com/ip8.jpg&quot; alt=&quot;ifcfg-eth0&quot;&gt;&lt;br&gt;&lt;strong&gt;好了，一切正常了&lt;/strong&gt;&lt;br&gt;回归平静&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;最后感谢 &lt;a href=&quot;http://www.itweet.cn/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;whoami&lt;/a&gt; 大神帮我远程配置。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/acmusume/13.png&quot; height=&quot;50px&quot; ,=&quot;&quot; width=&quot;50px&quot; style=&quot;margin:0 0&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      校园网环境下，虚拟机下桥接模式无法ping通网关(或外网)
    
    </summary>
    
      <category term="Linux" scheme="http://www.guinguo.top/categories/Linux/"/>
    
    
      <category term="VMware网卡配置" scheme="http://www.guinguo.top/tags/VMware%E7%BD%91%E5%8D%A1%E9%85%8D%E7%BD%AE/"/>
    
  </entry>
  
  <entry>
    <title>JVM中几大垃圾收集器</title>
    <link href="http://www.guinguo.top/2016/05/16/JVM%E4%B8%AD%E5%87%A0%E5%A4%A7%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8/"/>
    <id>http://www.guinguo.top/2016/05/16/JVM中几大垃圾收集器/</id>
    <published>2016-05-16T00:59:28.000Z</published>
    <updated>2016-05-16T13:45:03.460Z</updated>
    
    <content type="html">&lt;p&gt;　　在java虚拟机中，无用的类的判断有一下三个条件：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;该类的所有实例已被回收，堆中无该类的任何实例&lt;/li&gt;
&lt;li&gt;加载该类的classloder已被回收&lt;/li&gt;
&lt;li&gt;该类的java.lang.class对象没有在任何地方被引用，无法在任何地方通过反射访问其方法&lt;/li&gt;
&lt;/ul&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;Serial&quot;&gt;&lt;a href=&quot;#Serial&quot; class=&quot;headerlink&quot; title=&quot;Serial&quot;&gt;&lt;/a&gt;Serial&lt;/h2&gt;&lt;hr&gt;
&lt;p&gt;历史最悠久，是一个单线程的垃圾收集器，采用&lt;strong&gt;复制&lt;/strong&gt;算法，在进行垃圾收集时，必须暂停其他所有的工作线程，直到它收集结束。它只会使用一个CPU或者单个线程进行工作。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;可能体验不好，但他简单高效，（一般停留几十ms或者100ms内），&lt;br&gt;不常发生是可以接受的，它仍是JVM运行在Client下默认的新生代收集器。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://www.processon.com/chart_image/573925ffe4b0b2fcdca6bedb.png&quot; alt=&quot;Serial&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;说一下收集的并行与并发：
并行（Parallel）：多条GC线程与用户线程并行工作，此时的用户线程依然要等待。
并发（Concurrent）：GC线程与用户线程同时执行（不一定并行），可能交替执行。用户线程运行着，
GC线程运行在另一个CPU
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;h2 id=&quot;ParNew&quot;&gt;&lt;a href=&quot;#ParNew&quot; class=&quot;headerlink&quot; title=&quot;ParNew&quot;&gt;&lt;/a&gt;ParNew&lt;/h2&gt;&lt;hr&gt;
&lt;p&gt;Serial 的多线程版本，其他很多可空参数与Serial相同(&lt;code&gt;-XX:SurvivorPatio&lt;/code&gt;)、收集算法、暂停其他所有线程STW(Stop The World)、对象分配规则、回收策略。&lt;br&gt;　　 Server下新生代收集器首选，除了Serial，只有它能与CMS一起配合工作。&lt;br&gt;可以使用&lt;code&gt;-XX: ParallelGCThreads&lt;/code&gt;指定线程数&lt;br&gt;&lt;img src=&quot;https://www.processon.com/chart_image/573935d7e4b06d79094ba025.png&quot; alt=&quot;ParNew&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;Parallel-Scavenge&quot;&gt;&lt;a href=&quot;#Parallel-Scavenge&quot; class=&quot;headerlink&quot; title=&quot;Parallel Scavenge&quot;&gt;&lt;/a&gt;Parallel Scavenge&lt;/h2&gt;&lt;hr&gt;
&lt;p&gt;这是一个新生代收集器，使用&lt;strong&gt;复制&lt;/strong&gt;算法，并行的多线程垃圾收集器，也叫吞吐量优先的收集器。&lt;br&gt;他与CMS的区别是，他的目标是达到一个可控的吞吐量，CMS是尽量减少停顿时间。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;那什么事吞吐量呢？&lt;br&gt;吞吐量 = 运行用户代码时间&lt;strong&gt;/&lt;/strong&gt;(运行用户代码时间+垃圾收集时间)&lt;br&gt;例如：jvm运行了100分钟，gc运行了1分钟，吞吐量就= (100-1)/100=99%&lt;br&gt;所以，CMS&lt;em&gt;（停顿时间）&lt;/em&gt;适合交互程序，而Parallel Scavenge&lt;em&gt;（高吞吐量）&lt;/em&gt;适合后台运算不需要太多交互的任务。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;参数&quot;&gt;&lt;a href=&quot;#参数&quot; class=&quot;headerlink&quot; title=&quot;参数&quot;&gt;&lt;/a&gt;参数&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;MaxGCPauseMillis  设置停顿时间，&amp;gt;0的毫秒数，是牺牲吞吐量，新生代空间获取来的&lt;br&gt;GCTimeRatio  设置吞吐量， 1-99，默认99，即最大允许1/(1+99)=1%的GC时间&lt;br&gt;比如GCTimeRatio=19，GC时间就为5%,===&amp;gt; 1/(1+19).&lt;br&gt;-XX:+UseAdaptivaSizePolicy 是一个开关，打开的话无需手动指定新生代，老年代大小，Survivor区比例等细节参数，会自动调整（动态的）&lt;br&gt;一般只需设置- Xmx(最大堆)，MaxGCpauseMillis(最大停顿时间)或者GCTimeRatio(吞吐量),其他细节由JVM完成。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;自适应也是Parallel Scavenge 与 ParNew的重要区别&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;Serial-Old&quot;&gt;&lt;a href=&quot;#Serial-Old&quot; class=&quot;headerlink&quot; title=&quot;Serial Old&quot;&gt;&lt;/a&gt;Serial Old&lt;/h2&gt;&lt;hr&gt;
&lt;p&gt;是Serial 的老年代版本，单线程。使用&lt;strong&gt;标记-整理&lt;/strong&gt;算法，主要用于Client模式。&lt;br&gt;在Server下&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;JDK1.5前与Parallel Scavenge 搭配&lt;/li&gt;
&lt;li&gt;作为CMS的后备&lt;br&gt;&lt;img src=&quot;https://www.processon.com/chart_image/57395e7be4b06d79094d9945.png&quot; alt=&quot;Serial Old&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;Parallel-Old&quot;&gt;&lt;a href=&quot;#Parallel-Old&quot; class=&quot;headerlink&quot; title=&quot;Parallel Old&quot;&gt;&lt;/a&gt;Parallel Old&lt;/h2&gt;&lt;hr&gt;
&lt;p&gt;是Parallel Scavenge 的老年代版本，多线程。使用&lt;strong&gt;标记-整理&lt;/strong&gt;算法，在JDK1.6才有的&lt;br&gt;使用：在注重吞吐量及CPU资源敏感的场合==&amp;gt;&lt;strong&gt;Parallel Scavenge + Parallel Old&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;https://www.processon.com/chart_image/57395fb0e4b06d79094dadad.png&quot; alt=&quot;Serial Old&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;CMS-Concurrent-Mark-Sweep&quot;&gt;&lt;a href=&quot;#CMS-Concurrent-Mark-Sweep&quot; class=&quot;headerlink&quot; title=&quot;CMS(Concurrent Mark Sweep)&quot;&gt;&lt;/a&gt;CMS(Concurrent Mark Sweep)&lt;/h2&gt;&lt;hr&gt;
&lt;p&gt;这是一个为了减少回收停顿时间的收集器，采用&lt;strong&gt;标记-清除&lt;/strong&gt;算法&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- T1	初始标记(initial mark)		仅标记可达GCroots的对象	STW&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- T2	并发标记(concurrent mark)	&lt;span class=&quot;function&quot;&gt;GCRoots &lt;span class=&quot;title&quot;&gt;Tracing&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(追踪)&lt;/span&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- T3	重新标记&lt;span class=&quot;params&quot;&gt;(remark)&lt;/span&gt;				修正T2时变动的对象		STW&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- T4	并发清除&lt;span class=&quot;params&quot;&gt;(concurrent sweep)&lt;/span&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;T2&amp;gt;T4&amp;gt;T3&amp;gt;T1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;https://www.processon.com/chart_image/5739c12fe4b0b2fcdcb04295.png&quot; alt=&quot;CMS&quot;&gt;&lt;br&gt;&lt;strong&gt;但是CMS也有它的缺点&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;对CPU资源非常敏感(并发程序的特点)，默认启动回收线程数：(cpu数量+3)/4，当CPU数量越多，回收的线程占用CPU就少==&amp;gt;比如 CPU=2时，那么久启动一个线程回收，占了50%的CPU资源.&lt;/li&gt;
&lt;li&gt;无法处理浮动垃圾(出现在标记过程之后的垃圾),可能出现Concurrent Mode Failure，导致另一次Full GC。&lt;/li&gt;
&lt;li&gt;标记-清理 ==&amp;gt; 产生大量的空间碎片，无法分配大的对象，导致另一次Full GC。&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;+UseCompactAtFullCollection (开关，默认打开)，在CMS顶不住要进行Full GC时开启内存碎片的合并整理过程，但停顿时间不得不变长。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;G1&quot;&gt;&lt;a href=&quot;#G1&quot; class=&quot;headerlink&quot; title=&quot;G1&quot;&gt;&lt;/a&gt;G1&lt;/h2&gt;&lt;hr&gt;
&lt;p&gt;Garbage-First，是当今收集器技术发展的最前沿成果之一，JDK7u4后达到商用程度。用于服务端应用的收集器，有如下特点：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;并行与并发，G1能够充分利用多CPU，多核环境下的硬件优势，来缩短STW停顿时间，且可以并发收集，让java进程继续执行&lt;/li&gt;
&lt;li&gt;分代收集，与其他收集器一样，能够采用不同的方式去处理新建的对象和已经存活一段时间，熬过了多次GC的对象，以获得更好的收集效果。&lt;/li&gt;
&lt;li&gt;可预测的停顿，相比CMS的优势，可以指定一个长度M的毫秒时间片内，消耗在GC的时间&amp;lt;N毫秒。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;G1不再是单独在某个代进行收集，而是划分堆成独立的Region，并且根据每个Region的价值大小进行收集的。cc采用Remembered Set来避免全局扫描的，查看G1的-&lt;a href=&quot;http://www.oracle.com/technetwork/articles/java/g1gc-1984535.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;详细信息&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;回收步骤: &lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;口     初始标记(Initial Marking)        &lt;/li&gt;
&lt;li&gt;口        并发标记(Concurrent Marking)    &lt;/li&gt;
&lt;li&gt;口        最终标记(FInal Marking)                &lt;/li&gt;
&lt;li&gt;口        筛选回收(Live Data Counting and Evacuation)    &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;前几个步骤与CMS有很多相似指出，初始标记只是标记一下GC Roots能直接关联到的对象，并修改TAMS(Next Top at Mask Start)的值，让下一阶段的用户程序并发运行时，能在可用的Region中创建新对象，需要STW，时间短。并发标记是从GC Roots开始对堆中对象进行可达性分析，找出存活对象，耗时较长，但也可以并发执行。最终标记阶段是为了修正在并发标记期间因用户程序继续运作而导致标记产生变动的那一部分标记记录，虚拟机将这段时间的对象变化记录在线程Remembered Set Logs里面，最终标记阶段需要把Remembered Set Logs的数据合并到Remembered Set中，需要STW，但仍可以并行执行。最后在筛选回收阶段会对每个Region的回收价值和成本进行排序，根据用户期望的GC停顿时间来指定回收计划，也可以做到与用户程序一起并发执行，但是因为时间可控，停顿用户将大幅度提高收集效率。&lt;br&gt;&lt;img src=&quot;https://www.processon.com/chart_image/5739cd6fe4b0b2fcdcb0dc23.png&quot; alt=&quot;G1&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;推荐使用-G1-的场景-Recommended-Use-Cases&quot;&gt;&lt;a href=&quot;#推荐使用-G1-的场景-Recommended-Use-Cases&quot; class=&quot;headerlink&quot; title=&quot;推荐使用 G1 的场景(Recommended Use Cases)&quot;&gt;&lt;/a&gt;推荐使用 G1 的场景(Recommended Use Cases)&lt;/h3&gt;&lt;p&gt;G1的首要目标是为需要大量内存的系统提供一个保证GC低延迟的解决方案. 也就是说堆内存在6GB及以上,稳定和可预测的暂停时间小于0.5秒.&lt;/p&gt;
&lt;p&gt;如果应用程序具有如下的一个或多个特征,那么将垃圾收集器从CMS或ParallelOldGC切换到G1将会大大提升性能.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Full GC 次数太频繁或者消耗时间太长.&lt;/li&gt;
&lt;li&gt;对象分配的频率或代数提升(promotion)显著变化.&lt;/li&gt;
&lt;li&gt;受够了太长的垃圾回收或内存整理时间(超过0.5~1秒)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;注意: 如果正在使用CMS或ParallelOldGC,而应用程序的垃圾收集停顿时间并不长,那么继续使用现在的垃圾收集器是个好主意. 使用最新的JDK时并不要求切换到G1收集器。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      总结一下jvm中几大垃圾收集器
    
    </summary>
    
      <category term="JVM学习" scheme="http://www.guinguo.top/categories/JVM%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="垃圾收集器" scheme="http://www.guinguo.top/tags/%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8/"/>
    
      <category term="GC" scheme="http://www.guinguo.top/tags/GC/"/>
    
  </entry>
  
  <entry>
    <title>Java中的枚举类Enum</title>
    <link href="http://www.guinguo.top/2016/05/15/Java%E4%B8%AD%E7%9A%84%E6%9E%9A%E4%B8%BE%E7%B1%BBEnum/"/>
    <id>http://www.guinguo.top/2016/05/15/Java中的枚举类Enum/</id>
    <published>2016-05-15T03:00:59.000Z</published>
    <updated>2016-05-15T09:03:18.068Z</updated>
    
    <content type="html">&lt;p&gt;Effective Java2中介绍了目前的枚举类模式，我简单总结一下。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;以前的枚举模式&quot;&gt;&lt;a href=&quot;#以前的枚举模式&quot; class=&quot;headerlink&quot; title=&quot;以前的枚举模式&quot;&gt;&lt;/a&gt;以前的枚举模式&lt;/h3&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;figcaption&gt;&lt;span&gt;enum&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; APPLE_RED =&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; APPLE_GREEN =&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; APPLE_YELLOW =&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; BANANA_GREEN =&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; BANANA_YELLOW =&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;产生的问题：&quot;&gt;&lt;a href=&quot;#产生的问题：&quot; class=&quot;headerlink&quot; title=&quot;产生的问题：&quot;&gt;&lt;/a&gt;产生的问题：&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;如果将apple传到想要banana的方法中，程序是无法检测出错误的。&lt;/li&gt;
&lt;li&gt;使程序很脆弱。如果int发生了变化，客户端就必须重新编译。如果不，程序运行正常，但他们的运行行为就是不确定的。&lt;/li&gt;
&lt;li&gt;打印出来就是一个数字， 意思不明确&lt;/li&gt;
&lt;li&gt;换成String可能导致性能问题（串比较）&lt;/li&gt;
&lt;li&gt;书写可能出现错误&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;现在的模式-类型安全的枚举&quot;&gt;&lt;a href=&quot;#现在的模式-类型安全的枚举&quot; class=&quot;headerlink&quot; title=&quot;现在的模式 类型安全的枚举&quot;&gt;&lt;/a&gt;现在的模式 &lt;em&gt;类型安全的枚举&lt;/em&gt;&lt;/h3&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;figcaption&gt;&lt;span&gt;enum&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;enum&lt;/span&gt; Apple &amp;#123;RED,GREEN,YELLOW&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;enum&lt;/span&gt; Banana &amp;#123;GREEN,YELLOW&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;想法&quot;&gt;&lt;a href=&quot;#想法&quot; class=&quot;headerlink&quot; title=&quot;想法&quot;&gt;&lt;/a&gt;想法&lt;/h3&gt;&lt;p&gt;　　通过共有的静态final域为每一个枚举常量导出实例的类。因为没有可以访问的构造器。–&amp;gt;final–&amp;gt;Singleton&lt;br&gt;完善了int枚举模式的不足之处，还允许添加任意的方法和域，并实现任意的接口。&lt;/p&gt;
&lt;h3 id=&quot;栗子&quot;&gt;&lt;a href=&quot;#栗子&quot; class=&quot;headerlink&quot; title=&quot;栗子&quot;&gt;&lt;/a&gt;栗子&lt;/h3&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;figcaption&gt;&lt;span&gt;enum&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;enum&lt;/span&gt; Operation &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		PLUS(&lt;span class=&quot;string&quot;&gt;&quot;+&quot;&lt;/span&gt;)&amp;#123;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;apply&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;double&lt;/span&gt; x,&lt;span class=&quot;keyword&quot;&gt;double&lt;/span&gt; y)&lt;/span&gt;&lt;/span&gt;&amp;#123;&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; x+y;&amp;#125;&amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		MINUS(&lt;span class=&quot;string&quot;&gt;&quot;-&quot;&lt;/span&gt;)&amp;#123;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;apply&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;double&lt;/span&gt; x,&lt;span class=&quot;keyword&quot;&gt;double&lt;/span&gt; y)&lt;/span&gt;&lt;/span&gt;&amp;#123;&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; x-y;&amp;#125;&amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		TIMES(&lt;span class=&quot;string&quot;&gt;&quot;*&quot;&lt;/span&gt;)&amp;#123;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;apply&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;double&lt;/span&gt; x,&lt;span class=&quot;keyword&quot;&gt;double&lt;/span&gt; y)&lt;/span&gt;&lt;/span&gt;&amp;#123;&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; x*y;&amp;#125;&amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		DIVIDE(&lt;span class=&quot;string&quot;&gt;&quot;/&quot;&lt;/span&gt;)&amp;#123;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;apply&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;double&lt;/span&gt; x,&lt;span class=&quot;keyword&quot;&gt;double&lt;/span&gt; y)&lt;/span&gt;&lt;/span&gt;&amp;#123;&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; x/y;&amp;#125;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; String symbol;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		Operation(String symbol)&amp;#123;&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.symbol = symbol;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&amp;#123;&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.symbol;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;apply&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;double&lt;/span&gt; x,&lt;span class=&quot;keyword&quot;&gt;double&lt;/span&gt; y)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;figcaption&gt;&lt;span&gt;test&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String[] args)&lt;/span&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;double&lt;/span&gt; x = Double.parseDouble(args[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;double&lt;/span&gt; y = Double.parseDouble(args[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;(Operation op : Operation.values())&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			System.out.printf(&lt;span class=&quot;string&quot;&gt;&quot;%f  %s %f = %f%n &quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;					x, op, y, op.apply(x,y));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;编译运行&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;http://7xsve9.com1.z0.glb.clouddn.com/enum.jpg&quot; alt=&quot;result&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      简单总结一下Java中的枚举类
    
    </summary>
    
      <category term="Java基础" scheme="http://www.guinguo.top/categories/Java%E5%9F%BA%E7%A1%80/"/>
    
    
      <category term="Enum类" scheme="http://www.guinguo.top/tags/Enum%E7%B1%BB/"/>
    
  </entry>
  
  <entry>
    <title>Linux系统配置ssh免密码登录</title>
    <link href="http://www.guinguo.top/2016/05/14/Linux%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AEssh%E5%85%8D%E5%AF%86%E7%A0%81%E7%99%BB%E5%BD%95/"/>
    <id>http://www.guinguo.top/2016/05/14/Linux系统配置ssh免密码登录/</id>
    <published>2016-05-14T02:51:24.000Z</published>
    <updated>2016-05-14T05:17:30.126Z</updated>
    
    <content type="html">&lt;p&gt; 一开始以为很简单，配置一下就好，没想到，一粗心，弄了有点久&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;　　首先呢，什么是SSH呢？–&amp;gt;&lt;a href=&quot;http://www.ibm.com/developerworks/cn/aix/library/au-sshsecurity/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;传送门&lt;/a&gt;。然后，如果你每次登录远程服务器，都需要按(复杂的)密码，会很麻烦的，为了安全性，不会设置简单密码，可是每次都输入，&lt;del&gt;很痛苦的&lt;/del&gt;。。。&lt;/p&gt;
&lt;p&gt;好了，如果你了解了ssh之后，那么，如何生成密匙对呢？&lt;/p&gt;
&lt;h2 id=&quot;利用git的ssh密匙对&quot;&gt;&lt;a href=&quot;#利用git的ssh密匙对&quot; class=&quot;headerlink&quot; title=&quot;利用git的ssh密匙对&quot;&gt;&lt;/a&gt;利用git的ssh密匙对&lt;/h2&gt;&lt;p&gt;　　打开PUTTYGEN，在Putty安装目录下，如果没有自行下载。然后点击顶部Conversions-&amp;gt;Import Key,选择id_rsa，一般存在C盘的用户目录下的.ssh文件夹里面，点击Save private key&lt;br&gt;保存下来，用于authenticate的公匙。把id_rsa.pub里面那一行内容拷贝下来。跳过第2步。&lt;/p&gt;
&lt;h2 id=&quot;自己生成密匙对&quot;&gt;&lt;a href=&quot;#自己生成密匙对&quot; class=&quot;headerlink&quot; title=&quot;自己生成密匙对&quot;&gt;&lt;/a&gt;自己生成密匙对&lt;/h2&gt;&lt;p&gt;　　同样打开PUTTYGEN,点击Generate，&lt;strong&gt;注意，鼠标要在中间（进度条下面不断移动！），如果不这样做要等很久，上次有同学后台运行，等了快半个钟都没好，不知道老外怎么设计的这个软件。。。&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;/images/acmusume/01.png&quot; height=&quot;50px&quot; ,=&quot;&quot; width=&quot;50px&quot; style=&quot;margin:0 0&quot;&gt;,好了之后，点击Save private key,保存下来，用于authenticate的公匙。顺便吧key框里面的内容拷贝下来，保存也行，点击Save public key。然后continue~&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;配置服务器&quot;&gt;&lt;a href=&quot;#配置服务器&quot; class=&quot;headerlink&quot; title=&quot;配置服务器&quot;&gt;&lt;/a&gt;配置服务器&lt;/h2&gt;&lt;p&gt;好了，完成以上两步中的一步就可以继续了，打开，putty，用密码登录远程服务器操作。&lt;/p&gt;
&lt;h3 id=&quot;建立-ssh目录（如果没有）&quot;&gt;&lt;a href=&quot;#建立-ssh目录（如果没有）&quot; class=&quot;headerlink&quot; title=&quot;建立~/.ssh目录（如果没有）&quot;&gt;&lt;/a&gt;建立~/.ssh目录（如果没有）&lt;/h3&gt;&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;ls ~/.ssh
authorized_keys
#没有就
mkdir ~/.ssh
vim ~/.ssh/authorized_keys
#把刚才复制的内容，贴进去
:wq#保存退出
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;注意，这里有一个坑，就是鼠标右键粘贴时，前面几个字母可能会丢失，我也不知道为什么，一不注意，就像我一样GG了–&amp;gt;&lt;a href=&quot;http://blog.sina.com.cn/s/blog_5f5e2ce50101788l.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;server refused our key&lt;/a&gt;&lt;/strong&gt;，我跟这位up主一样去找各种原因，，，&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;重启sshd服务&quot;&gt;&lt;a href=&quot;#重启sshd服务&quot; class=&quot;headerlink&quot; title=&quot;重启sshd服务&quot;&gt;&lt;/a&gt;重启sshd服务&lt;/h3&gt;&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;service sshd restart
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;h3 id=&quot;测试ssh公匙登录&quot;&gt;&lt;a href=&quot;#测试ssh公匙登录&quot; class=&quot;headerlink&quot; title=&quot;测试ssh公匙登录&quot;&gt;&lt;/a&gt;测试ssh公匙登录&lt;/h3&gt;&lt;p&gt;　　打开Putty&lt;br&gt;&lt;img src=&quot;http://7xsve9.com1.z0.glb.clouddn.com/ssh.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;然后就可以在putty中加入它了。然后点击open。&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;Using username &amp;quot;root&amp;quot;.
Authenticating with public key &amp;quot;imported-openssh-key&amp;quot;
Last login: Fri May 13 22:29:27 2016 from xx.xx.xx.xx
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p&gt;中间如果出现什么问题可以参考 &lt;a href=&quot;https://segmentfault.com/a/1190000002911599&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;centos7 服务器部署ssh证书授权登录&lt;/a&gt; 进行更详细的配置。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      不用输入密码自动远程登录
    
    </summary>
    
      <category term="Linux" scheme="http://www.guinguo.top/categories/Linux/"/>
    
    
      <category term="ssh" scheme="http://www.guinguo.top/tags/ssh/"/>
    
  </entry>
  
  <entry>
    <title>CentOS 开启http 端口(80)</title>
    <link href="http://www.guinguo.top/2016/05/09/CentOS-%E5%BC%80%E5%90%AFhttp-%E7%AB%AF%E5%8F%A3-80/"/>
    <id>http://www.guinguo.top/2016/05/09/CentOS-开启http-端口-80/</id>
    <published>2016-05-09T04:47:59.000Z</published>
    <updated>2016-05-11T03:14:56.873Z</updated>
    
    <content type="html">&lt;p&gt;　　最近我的vps差点被我玩 &lt;del&gt;坏了&lt;/del&gt;&lt;br&gt;&lt;img align=&quot;center&quot; src=&quot;/images/acmusume/01.png&quot; height=&quot;50px&quot; ,=&quot;&quot; width=&quot;50px&quot; style=&quot;margin:0 0&quot;&gt;&lt;br&gt;就是防火墙被我改了，一开始22端口被我换成1888，因为一般的ssh连接都是用22端口，我就想换一个，也许安全的点。一开始没问题，过几天后我发现居然连接不上了。。。&lt;/p&gt;
&lt;p&gt;　　我就查了网上的资料，发现是我防火墙的问题。我开了一个应用，tomcat的8080端口，然后用nginx代理为80，但是，自从我改了ssh端口后就访问不了了，网上的教程就是说有两种方法开启端口。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;编辑iptables文件&lt;br&gt;什么是iptables呢？，它是Linux的防火墙，可以根据各种规则配置开放或者关闭网络端口。&lt;a href=&quot;https://zh.wikipedia.org/wiki/Iptables&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;wiki&lt;/a&gt;&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;vi /etc/sysconfig/iptables　
#允许80端口通过防火墙，加在COMMIT之前
A INPUT -m state –state NEW -m tcp -p tcp –dport 80 -j ACCEPT
#保存退出后，重启防火墙
service iptables restart
#或者 /etc/init.d/iptables restart
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;直接command更改(原理也是同1)　&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;#查看防火墙状态
service iptables status
#开启80端口
iptables -I INPUT -p tcp --dport 80 -j ACCEPT 
#保存，可能我之前就是没有保存，导致配置无效。。。
service iptables save 
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;但是，我安装以上方法配置后，发现仍然不行。&lt;/strong&gt;&lt;br&gt;nginx也访问不了了，最后我是用以下方式解决的~&lt;/p&gt;
&lt;h1 id=&quot;1、iptables-rules&quot;&gt;&lt;a href=&quot;#1、iptables-rules&quot; class=&quot;headerlink&quot; title=&quot;1、iptables rules&quot;&gt;&lt;/a&gt;1、iptables rules&lt;/h1&gt;&lt;p&gt;　　有两种方法打开80端口，第一种是用iptables命令，第二种是配置文件，(就如同我上面列的两种)，&lt;br&gt;使用命令的：&lt;br&gt;检测iptables是否有效，简单的命令：&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;iptables -L
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;http://7xsve9.com2.z0.glb.clouddn.com/iptables-L.jpg&quot;&gt;&lt;/p&gt;
&lt;p&gt;现在是没有开启80端口的，&lt;/p&gt;
&lt;p&gt;可以看出哪些端口是开启的(ACCEPT)，哪些是关闭的(REJECT)，&lt;strong&gt;但是&lt;/strong&gt;，并没有我80端口accept！&lt;br&gt;可以使用命令：&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;iptables -vnL
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p&gt;查看更精确的信息。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://7xsve9.com2.z0.glb.clouddn.com/iptables-vnl.jpg&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;2、打开80端口&quot;&gt;&lt;a href=&quot;#2、打开80端口&quot; class=&quot;headerlink&quot; title=&quot;2、打开80端口&quot;&gt;&lt;/a&gt;2、打开80端口&lt;/h1&gt;&lt;p&gt;　打开80端口，我们需要增加一条记录，加在ACCEPT 后REJECT前，&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;#iptables -I INPUT 1 -i eth0 -p tcp --dport 80 -m state --state NEW,ESTABLISHED -j ACCEPT
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p&gt;这条命令会增加一条规则，在第一行，启动防火墙端口80，再一次检查端口状态&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;   #iptables –line -vnL&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;http://7xsve9.com2.z0.glb.clouddn.com/iptables-80.jpg&quot;&gt;&lt;br&gt;现在，我们看到80端口已经打开了，外网可以访问到服务器的80端口应用了.&lt;/p&gt;
&lt;h1 id=&quot;3、保存&quot;&gt;&lt;a href=&quot;#3、保存&quot; class=&quot;headerlink&quot; title=&quot;3、保存&quot;&gt;&lt;/a&gt;3、保存&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;但是&lt;/strong&gt;这只是临时的，只有保存了，&lt;del&gt;我之前就是没有保存。。。&lt;/del&gt; 之后才会生效，不然重启后又没了。&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;#service iptables save
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p&gt;正确的话，会有提示说iptables:[ OK ]&lt;/p&gt;
&lt;h1 id=&quot;4、重启防火墙&quot;&gt;&lt;a href=&quot;#4、重启防火墙&quot; class=&quot;headerlink&quot; title=&quot;4、重启防火墙&quot;&gt;&lt;/a&gt;4、重启防火墙&lt;/h1&gt;&lt;p&gt;现在，防火墙的规则已经永久保证了，我们可以重启它&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;#service iptables restart
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p&gt;会提示几个[ OK ],表示正常了。&lt;br&gt;最后，测试一下是否可以访问到服务器的80端口,&lt;br&gt;ok,now it work~&lt;/p&gt;
</content>
    
    <summary type="html">
    
      如何打开Linux的端口
    
    </summary>
    
      <category term="Linux" scheme="http://www.guinguo.top/categories/Linux/"/>
    
    
      <category term="CentOS开启端口" scheme="http://www.guinguo.top/tags/CentOS%E5%BC%80%E5%90%AF%E7%AB%AF%E5%8F%A3/"/>
    
  </entry>
  
  <entry>
    <title>JVM学习之OpenJDK源码编译</title>
    <link href="http://www.guinguo.top/2016/05/03/JVM%E5%AD%A6%E4%B9%A0%E4%B9%8BOpenJDK%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91/"/>
    <id>http://www.guinguo.top/2016/05/03/JVM学习之OpenJDK源码编译/</id>
    <published>2016-05-03T02:26:26.000Z</published>
    <updated>2016-05-03T15:19:14.987Z</updated>
    
    <content type="html">&lt;p&gt;在centos7下进行编译&lt;br&gt;具体步骤：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;获取openjdk源码&lt;/li&gt;
&lt;li&gt;安装openjdk6–BoostrapJK&lt;/li&gt;
&lt;li&gt;安装编译时的依赖&lt;/li&gt;
&lt;li&gt;配置环境变量&lt;/li&gt;
&lt;li&gt;编译&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;1. 获取openjdk源码&lt;/h3&gt;&lt;br&gt;可以到这里去下载，&lt;a href=&quot;https://jdk7.java.net/source.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;OpenJDK Source Releases&lt;/a&gt;&lt;br&gt;我下载的是openjdk-7u40版本，openjdk7，update40，build43&lt;br&gt;&lt;h3&gt;2. 下载jdk6–BoostrapJDK&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;我使用jdk6来辅助编译。可以到oracle官网下载，&lt;a href=&quot;http://www.oracle.com/technetwork/java/javase/downloads/java-archive-downloads-javase6-419409.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;jdk-6u45-linux-x64.bin&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;/p&gt;&lt;h3&gt;3.安装编译时的依赖&lt;/h3&gt;&lt;br&gt;可以使用以下命令一次安装完成&lt;p&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;yum -y install build-essential gawk m4
openjkd-6-jkd libasound2-dev libcups2-dev 
libxrender-dev xorg-dev xutils-dev
xllproto-print-dev binutils libmotif3
libmotif-dev ant
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;/p&gt;&lt;h3&gt;3.配置环境变量,编译&lt;/h3&gt;&lt;br&gt;OpenJKD在编译时读取的环境变量很多，但是大多数都有默认值，必须设置的只有两个：LANG和ALT_BOOTDIR。分别为C跟bootJDK的路径&lt;br&gt;所有的环境变量可以使用下面的脚本设置：&lt;br&gt;&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;export LANG=C&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#Bootstrap JDK 安装位置&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export ALT_BOOTDIR=/opt/openJDK/jdk1.6.0_45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#允许自动下载&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export ALLOW_DOWNLOADS=true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#并行编译的线程数，和CPU内核数量一致即可&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export HOTSPOT_BUILD_JOBS=2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export ALT_PARALLEL_COMPILE_JOBS=2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#比较本次build出来的映像与先前版本的差异，对于我们没哟意义，&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#必须设置为false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export SKIP_COMPARE_IMAGES=true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#使用预编译头文件，不加这个编译会更慢一些&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export USE_PRECOMPILED_HEADER=true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#要编译的内容&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export BUILD_LANGTOOLS=true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export BUILD_HOTSPOT=true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export BUILD_JDK=true&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#把它设置为false，可以避开javaws和浏览器java插件的build&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BUILD_DEPLOY=false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#把它设置为false就不会build出安装包。因为安装包里有些奇怪的依赖&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;BUILD_INSTALL=false&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#编译结果所存放的路径&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export ALT_OUTPUTDIR=/opt/openJDK/openjdk/build&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#这两个变量必须去掉&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;unset CLASSPATH&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;unset JAVA_HOME&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;unset LD_LIBRARY_PATH&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;全部设置结束之后，可以输入 make sanity 检测是否正确，如果一切顺利，会输出：Sanity check passed.就可以编译了。&lt;br&gt;输入make(不加参数默认为make all)，我的虚拟机配置比较低，整个编译的过程用了一个多钟。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;结果如下：&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;http://7xsve9.com1.z0.glb.clouddn.com/build.jpg&quot;&gt;&lt;br&gt;我在虚拟机中编译的，而且配置不高，所以有点慢.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;那么问题来了，如何看结果ne？&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;　　编译完成之后，进入OpenJDK源码下的build/j2sdk-image目录,(或者build-debug、build-fastdebug这两个目录)，这是整个JDK完整编译结果，内容为debug版jdk，将其复制到%JAVA_HOME%下，替换Oracle JDK。就可以作为一个完整的JDK使用，编译出来的虚拟机，在-version命令中带有用户的机器名。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@localhost ~]# java -version
openjdk version &amp;quot;1.7.0-internal-debug&amp;quot;
OpenJDK Runtime Environment (build 1.7.0-internal-debug-root_2016_04_25_20_00-b00)
OpenJDK 64-Bit Server VM (build 24.0-b56-jvmg, mixed mode)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;　　大多数情况我们只关心Hotspot虚拟机，只想单独编译它的话，那么使用hotspot/make目录下的MakeFile进行替换即可，其他参数与前面一致，这时候虚拟机的输出结果存放在&lt;br&gt;    &lt;code&gt;build/hotspot/outputdir/linux_amd64_compiler2&lt;/code&gt; 中，里面对应了不同的优化级别的目录。&lt;/p&gt;
&lt;p&gt;进入 目录jvmg，在运行虚拟机前，还要手工编辑目录下的env.sh文件，这个文件由编译脚本自动产生，用于设置虚拟机的环境变量，里面已经发布了”JAVA_HOME，CLASSPATH，HOTSPOT_BUILD_USER” 3个环境变量，还需要增加一个“LD_LIBRSRY_CLASSPATH”：&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;LD_LIBRARY_PATH=.:$&amp;#123;JAVA_HOME&amp;#125;/jre/lib/amd64/native_threads:$&amp;#123;JAVA_HOME&amp;#125;/jre/lib/amd64:/opt/openJDK/openjdk/build/hotspot/outputdir/linux_amd64_compiler2/product&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export LD_LIBRARY_PATH&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后执行&lt;/p&gt;
&lt;blockquote&gt;
&lt;pre&gt;&lt;code&gt;. ./env.sh
./gama -version   #有可能是test_gamma,这是自带的一段八皇后代码
&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;结果如下&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;http://7xsve9.com1.z0.glb.clouddn.com/jvm.jpg&quot;&gt;&lt;/p&gt;
&lt;p&gt;　　自己编译的虚拟机成功运行起来，哈哈哈~&lt;br&gt;&lt;img src=&quot;/images/acmusume/32.png&quot; height=&quot;50px&quot; ,=&quot;&quot; width=&quot;50px&quot; style=&quot;margin:0 0&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;编译过程中有可能报错：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Error: time is more than 10 years from present: 1104530400000 when building java/openjdk* lists.freebsd.org&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;通过修改CurrencyData.properties文件, 把10年之前的时间修改为10年之内即可&lt;br&gt;Index: /usr/openjdk/jdk/src/share/classes/java/util/CurrencyData.properties&lt;br&gt;把2006改掉就可以&lt;del&gt;重新编译了&lt;/del&gt;&lt;img src=&quot;/images/acmusume/01.png&quot; height=&quot;50px&quot; ,=&quot;&quot; width=&quot;50px&quot; style=&quot;margin:0 0&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      自己编译JDK
    
    </summary>
    
      <category term="JVM学习" scheme="http://www.guinguo.top/categories/JVM%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="java虚拟机" scheme="http://www.guinguo.top/tags/java%E8%99%9A%E6%8B%9F%E6%9C%BA/"/>
    
      <category term="编译openjdk" scheme="http://www.guinguo.top/tags/%E7%BC%96%E8%AF%91openjdk/"/>
    
  </entry>
  
</feed>
